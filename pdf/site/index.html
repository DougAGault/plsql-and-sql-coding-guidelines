



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://insum-labs.github.io/plsql-and-sql-coding-guidelines/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="images/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.2">
    
    
      
        <title>PL/SQL & SQL Coding Guidelines</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/application.30686662.css">
      
        <link rel="stylesheet" href="assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#7cb342">
      
    
    
      <script src="assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="stylesheets/extra.css">
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="light-green" data-md-color-accent="green">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#introduction-to-the-insum-plsql-and-sql-coding-guidelines" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
    <nav class="md-header-nav md-grid">
      <div class="md-flex">
        <div class="md-flex__cell md-flex__cell--shrink">
          <a href="https://insum-labs.github.io/plsql-and-sql-coding-guidelines/" title="PL/SQL & SQL Coding Guidelines" class="md-header-nav__button md-logo">
            
              <img src="./images/insum-logo.png" height="31">
            
          </a>
        </div>
        <div class="md-flex__cell md-flex__cell--shrink">
          <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
        </div>
        <div class="md-flex__cell md-flex__cell--stretch">
          <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
            
              
                <span class="md-header-nav__topic">
                  PL/SQL & SQL Coding Guidelines Version 1.0
                </span>
                <span class="md-header-nav__topic">
                  Introduction to the Insum PL/SQL and SQL Coding Guidelines
                </span>
              
            
          </div>
        </div>
        <div class="md-flex__cell md-flex__cell--shrink">
          
            
              <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
              
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
            
          
        </div>
        
          <div class="md-flex__cell md-flex__cell--shrink">
            <div class="md-header-nav__source">
              


  

<a href="https://github.com/insum-labs/plsql-and-sql-coding-guidelines" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    insum-labs/plsql-and-sql-coding-guidelines
  </div>
</a>
            </div>
          </div>
        
      </div>
    </nav>
  </header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://insum-labs.github.io/plsql-and-sql-coding-guidelines/" title="PL/SQL & SQL Coding Guidelines" class="md-nav__button md-logo">
      
        <img src="images/insum-logo.png" width="48" height="48">
      
    </a>
    PL/SQL & SQL Coding Guidelines
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/insum-labs/plsql-and-sql-coding-guidelines" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    insum-labs/plsql-and-sql-coding-guidelines
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Introduction to the Insum PL/SQL and SQL Coding Guidelines
      </label>
    
    <a href="." title="Introduction to the Insum PL/SQL and SQL Coding Guidelines" class="md-nav__link md-nav__link--active">
      Introduction to the Insum PL/SQL and SQL Coding Guidelines
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#why-are-standards-important" class="md-nav__link">
    Why are standards important
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    License
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trademarks" class="md-nav__link">
    Trademarks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disclaimer" class="md-nav__link">
    Disclaimer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#revision-history" class="md-nav__link">
    Revision History
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#why-are-standards-important" class="md-nav__link">
    Why are standards important
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    License
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trademarks" class="md-nav__link">
    Trademarks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disclaimer" class="md-nav__link">
    Disclaimer
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#revision-history" class="md-nav__link">
    Revision History
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="introduction-to-the-insum-plsql-and-sql-coding-guidelines">Introduction to the Insum PL/SQL and SQL Coding Guidelines</h1>
<p>SQL and PL/SQL code is fundamentally some of the most important code that Insum writes for our customers and partners. The difference between SQL and PL/SQL that performs well and that doesn't can be the difference between a successful system (our customers and partners) and a huge disappointment (Healthcare.gov's rollout for example, not done by Insum...).</p>
<p>In 2019, Rich Soule of Insum forked these guidelines from the Trivadis guidelines and changed most of the rules to comply with Insum coding standards and added many new guidelines. New rules were also suggested in the Trivadis Issues, and while many were adopted, some (and some we consider very important) were not.</p>
<p>Originally, Trivadis published their guidelines for PL/SQL &amp; SQL in 2009 in the context of the DOAG conference in Nuremberg. Since then these guidelines have been continuously extended and improved. Now they are managed as a set of markdown files. This makes the the guidelines more adaptable for individual application needs and simplifies the continous improvement.</p>
<p>We all stand in the shoulders of giants. Many people have participated in the creation and refinement of these guidelines. Without the efforts from Roger Troller, Jörn Kulessa, Daniela Reiner, Richard Bushnell, Andreas Flubacher, Thomas Mauch, and Philipp Salvisberg, and, more recently, many folks from the Insum Team, these guidelines wouldn't be what they are today.</p>
<h3 id="why-are-standards-important">Why are standards important</h3>
<p>For a machine executing a program, code formatting is of no importance. However, for the human eye, well-formatted code is much easier to read. Modern tools can help to implement format and coding rules.</p>
<p>Implementing formatting and coding standards has the following advantages for PL/SQL development:</p>
<ul>
<li>Well-formatted code is easier to read, analyze and maintain (not only for the author but also for other developers).</li>
<li>The developers do not have to define their own guidelines - it is already defined.</li>
<li>The code has a structure that makes it easier to avoid making errors.</li>
<li>The code is more efficient concerning performance and organization of the whole application.</li>
<li>The code is more modular and thus easier to use for other applications.</li>
</ul>
<p>This document only defines possible standards. These standards are not written in stone, but are meant as guidelines. If standards already exist, and they are different from those in this document, it makes no sense to change them unless the existing standards have fundamental flaws that would decrease performance and/or significantly decrease the maintainability of code. Almost every system has a mixture of "code that follows the standards" and "code that doesn't follow the standards". Gental migration over time to follow a good set of reasonable standards will always be much better than giving up because standards were not followed in the past.</p>
<p>Overall, the most important thing when writing good code is that you must be able to defend your work.</p>
<h2 id="license">License</h2>
<p>The Insum PL/SQL &amp; SQL Coding Guidelines are licensed under the Apache License, Version 2.0. You may obtain a copy of the License at <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a>.</p>
<h3 id="trademarks">Trademarks</h3>
<p>All terms that are known trademarks or service marks have been capitalized. All trademarks are the property of their respective owners.</p>
<h3 id="disclaimer">Disclaimer</h3>
<p>The authors and publisher shall have neither liability nor responsibility to any person or entity with respect to the loss or damages arising from the information contained in this work. This work may include inaccuracies or typographical errors and solely represent the opinions of the authors. Changes are periodically made to this document without notice. The authors reserve the right to revise this document at any time without notice.</p>
<h2 id="revision-history">Revision History</h2>
<table>
<thead>
<tr>
<th>Version</th>
<th>Who</th>
<th>Date</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.0</td>
<td>Soule</td>
<td>2020.02.05</td>
<td>Forked from the <a href="https://trivadis.github.io/plsql-and-sql-coding-guidelines/">Trivadis</a> standards with many updates due to coding style and minor updates to grammar, removal of some sections, changes to titles of other sections, etc.</td>
</tr>
</tbody>
</table>
<h1 id="document-conventions">Document Conventions</h1>
<p>This document describes rules and recommendations for developing applications using the PL/SQL &amp; SQL Language.</p>
<h2 id="scope">Scope</h2>
<p>This document applies to the PL/SQL and SQL language as used within ORACLE databases and tools, which access ORACLE databases.</p>
<h2 id="sqale">SQALE</h2>
<p>SQALE (Software Quality Assessment based on Lifecycle Expectations) is a method to support the evaluation of a software application source code. It is a generic method, independent of the language and source code analysis tools.</p>
<h3 id="sqale-characteristics-and-subcharacteristics">SQALE characteristics and subcharacteristics</h3>
<table>
<thead>
<tr>
<th>Characteristic</th>
<th>Description and Subcharacteristics</th>
</tr>
</thead>
<tbody>
<tr>
<td>Changeability</td>
<td>The capability of the software product to enable a specified modification to be implemented.<ul><li>Architecture related changeability</li><li>Logic related changeability</li><li>Data related changeability</li><ul></td>
</tr>
<tr>
<td>Efficiency</td>
<td>The capability of the software product to provide appropriate performance, relative to the amount of resources used, under stated conditions.<ul><li>Memory use</li><li>Processor use</li><li>Network use</li></ul></td>
</tr>
<tr>
<td>Maintainability</td>
<td>The capability of the software product to be modified. Modifications may include corrections, improvements or adaptation of the software to changes in environment, and in requirements and functional specifications.<ul><li>Understandability</li><li>Readability</li></ul></td>
</tr>
<tr>
<td>Portability</td>
<td>The capability of the software product to be transferred from one environment to another.<ul><li>Compiler related portability</li><li>Hardware related portability</li><li>Language related portability</li><li>OS related portability</li><li>Software related portability</li><li>Time zone related portability.</li></ul></td>
</tr>
<tr>
<td>Reliability</td>
<td>The capability of the software product to maintain a specified level of performance when used under specified conditions.<ul><li>Architecture related reliability</li><li>Data related reliability</li><li>Exception handling</li><li>Fault tolerance</li><li>Instruction related reliability</li><li>Logic related reliability</li><li>Resource related reliability</li><li>Synchronization related reliability</li><li>Unit tests coverage.</li></ul></td>
</tr>
<tr>
<td>Reusability</td>
<td>The capability of the software product to be reused within the development process.<ul><li>Modularity</li><li>Transportability.</li></ul></td>
</tr>
<tr>
<td>Security</td>
<td>The capability of the software product to protect information and data so that unauthorized persons or systems cannot read or modify them and authorized persons or systems are not denied access to them.<ul><li>API abuse</li><li>Errors (e.g. leaving a system in a vulnerable state)</li><li>Input validatation and representation</li><li>Security features.</li></ul></td>
</tr>
<tr>
<td>Testability</td>
<td>The capability of the software product to enable modified software to be validated.<ul><li>Integration level testability</li><li>Unit level testability.</li></ul></td>
</tr>
</tbody>
</table>
<h3 id="severity-of-the-rule">Severity of the rule</h3>
<div class="admonition bug">
<p class="admonition-title">Blocker</p>
<p>Will or may result in a bug.</p>
</div>
<div class="admonition danger">
<p class="admonition-title">Critical</p>
<p>Will have a high/direct impact on the maintenance cost.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Will have a medium/potential impact on the maintenance cost.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Will have a low impact on the maintenance cost.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Very low impact; it is just a remediation cost report.</p>
</div>
<h3 id="keywords-used">Keywords used</h3>
<table>
<thead>
<tr>
<th>Keyword</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>Always</td>
<td>Emphasizes this rule must be enforced.</td>
</tr>
<tr>
<td>Never</td>
<td>Emphasizes this action must not happen.</td>
</tr>
<tr>
<td>Avoid</td>
<td>Emphasizes that the action should be prevented, but some exceptions may exist.</td>
</tr>
<tr>
<td>Try</td>
<td>Emphasizes that the rule should be attempted whenever possible and appropriate.</td>
</tr>
<tr>
<td>Example</td>
<td>Precedes text used to illustrate a rule or a recommendation.</td>
</tr>
<tr>
<td>Reason</td>
<td>Explains the thoughts and purpose behind a rule or a recommendation.</td>
</tr>
<tr>
<td>Restriction</td>
<td>Describes the circumstances to be fulfilled to make use of a rule.</td>
</tr>
<tr>
<td># Naming Conventions</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="general-guidelines">General Guidelines</h2>
<ol>
<li>Never use names with a leading numeric character.</li>
<li>Always choose meaningful and specific names.</li>
<li>Avoid using abbreviations. </li>
<li>If abbreviations are used, they must be widely known and accepted. </li>
<li>Create a glossary with all accepted abbreviations.</li>
<li>Never use ORACLE keywords as names. A list of ORACLEs keywords may be found in the dictionary view <code>V$RESERVED_WORDS</code>.</li>
<li>Avoid adding redundant or meaningless prefixes and suffixes to identifiers.<br/>Example: <code>CREATE TABLE emp_table</code>.</li>
<li>Always use one spoken language (e.g. English, German, French) for all objects in your application.</li>
<li>Always use the same names for elements with the same meaning.</li>
</ol>
<h2 id="naming-conventions-for-plsql">Naming Conventions for PL/SQL</h2>
<p>In general, ORACLE is not case sensitive with names. A variable named personname is equal to one named PersonName, as well as to one named PERSONNAME. Some products (e.g. TMDA by Trivadis, APEX, OWB) put each name within double quotes (&quot;) so ORACLE will treat these names to be case sensitive. Using case sensitive variable names force developers to use double quotes for each reference to the variable. Our recommendation is to write all names in lowercase and to avoid double quoted identifiers.</p>
<p>A widely used convention is to follow a <code>{prefix}variablecontent{suffix}</code> pattern.</p>
<p>The following table shows a possible set of naming conventions. </p>
<table>
<thead>
<tr>
<th>Identifier</th>
<th>Prefix</th>
<th>Suffix</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>Global Variable</td>
<td><code>g_</code></td>
<td></td>
<td><code>g_version</code></td>
</tr>
<tr>
<td>Local Variable</td>
<td><code>l_</code></td>
<td></td>
<td><code>l_version</code></td>
</tr>
<tr>
<td>Constants *</td>
<td><code>k_</code></td>
<td></td>
<td><code>k_employee_permanent</code></td>
</tr>
<tr>
<td>Record</td>
<td><code>r_</code></td>
<td></td>
<td><code>r_employee</code></td>
</tr>
<tr>
<td>Array / Table</td>
<td><code>t_</code></td>
<td></td>
<td><code>t_employee</code></td>
</tr>
<tr>
<td>Object</td>
<td><code>o_</code></td>
<td></td>
<td><code>o_employee</code></td>
</tr>
<tr>
<td>Cursor Parameter</td>
<td><code>p_</code></td>
<td></td>
<td><code>p_empno</code></td>
</tr>
<tr>
<td>In Parameter</td>
<td><code>in_</code></td>
<td></td>
<td><code>in_empno</code></td>
</tr>
<tr>
<td>Out Parameter</td>
<td><code>out_</code></td>
<td></td>
<td><code>out_ename</code></td>
</tr>
<tr>
<td>In/Out Parameter</td>
<td><code>io_</code></td>
<td></td>
<td><code>io_employee</code></td>
</tr>
<tr>
<td>Record Type Definitions</td>
<td><code>r_</code></td>
<td><code>_type</code></td>
<td><code>r_employee_type</code></td>
</tr>
<tr>
<td>Array/Table Type Definitions</td>
<td><code>t_</code></td>
<td><code>_type</code></td>
<td><code>t_employee_type</code></td>
</tr>
<tr>
<td>Exception</td>
<td><code>e_</code></td>
<td></td>
<td><code>e_employee_exists</code></td>
</tr>
<tr>
<td>Subtypes</td>
<td></td>
<td><code>_type</code></td>
<td><code>big_string_type</code></td>
</tr>
<tr>
<td>Cursor</td>
<td></td>
<td><code>_cur</code></td>
<td><code>employee_cur</code></td>
</tr>
</tbody>
</table>
<p>* Why k_ instead of c_ for constants? A k is hard (straight lines, hard sound when pronouced in English) while a c is soft (curved lines and soft sound when pronounced in English). C also has the possibility of being vague (some folks use c_ for cursors) and sounds changable... Also, very big companies (like Google in their coding standards) use k as a prefix for constants.</p>
<h2 id="database-object-naming-conventions">Database Object Naming Conventions</h2>
<p>Never enclose object names (table names, column names, etc.) in double quotes to enforce mixed case or lower case object names in the data dictionary.</p>
<p>Edition Based Redefinition (EBR) is one major exception to this guideline. When naming tables that will be covered by editioning views, it is preferable to name the covered table in lower case begining with an underscore (for example: <code>"_employee"</code>). The base table will be covered by an editioning view that has the name <code>employee</code>. This greatly simplifies migration from non-EBR systems to EBR systems since all existing code already references data stored in <code>employee</code>. "Embracing the abomination of forced lower case names" highlights the fact that these objects shouldn't be directly referenced (execpt, obviously, by forward and reverse cross edition triggers during edition migration, and simple auditing/surrogate key triggers, if they are used). Since developers and users should only be referencing data through editioning views (which to them are effectively the tables of the applications) they won't be tempted to use the base table. In addition, when using tools to look at the list of tables, all editioning view covered tables will be aligned together and thus clearly delinated from non-covered tables.</p>
<h3 id="collection-type">Collection Type</h3>
<p>A collection type should include the name of the collected objects in their name. Furthermore, they should have the suffix <code>_ct</code> to identify it as a collection.</p>
<p>Optionally prefixed by a project abbreviation.</p>
<p>Examples:</p>
<ul>
<li><code>employee_ct</code></li>
<li><code>order_ct</code></li>
</ul>
<h3 id="column">Column</h3>
<p>Singular name of what is stored in the column (unless the column data type is a collection, in this case you use plural names)</p>
<p>Add a useful comment to the database dictionary for every column.</p>
<h3 id="dml-instead-of-trigger">DML / Instead of Trigger</h3>
<p>Choose a naming convention that includes:</p>
<p>either</p>
<ul>
<li>the name of the object the trigger is added to,</li>
<li>the activity done by the trigger,</li>
<li>the suffix <code>_trg</code></li>
</ul>
<p>or</p>
<ul>
<li>the name of the object the trigger is added to,</li>
<li>any of the triggering events:<ul>
<li><code>_br_iud</code> for Before Row on Insert, Update and Delete</li>
<li><code>_io_id</code> for Instead of Insert and Delete</li>
</ul>
</li>
</ul>
<p>Examples:</p>
<ul>
<li><code>employee_br_iud</code></li>
<li><code>order_audit_trg</code></li>
<li><code>order_journal_trg</code></li>
</ul>
<h3 id="foreign-key-constraint">Foreign Key Constraint</h3>
<p>Table name followed by referenced table name followed by a <code>_fk</code> and an optional number suffix. If working on a pre-12.2 database, then you will probably end up being forced into abbreviations due to short object name lengths in older databases.</p>
<p>Examples:</p>
<ul>
<li><code>employee_department_fk</code></li>
<li><code>sct_icmd_ic_fk1</code> --Pre 12.2 database</li>
</ul>
<h3 id="function">Function</h3>
<p>Name is built from a verb followed by a noun in general. Nevertheless, it is not sensible to call a function <code>get_...</code> as a function always gets something.</p>
<p>The name of the function should answer the question “What is the outcome of the function?”</p>
<p>Optionally prefixed by a project abbreviation.</p>
<p>Example: <code>employee_by_id</code></p>
<p>If more than one function provides the same outcome, you have to be more specific with the name.</p>
<h3 id="index">Index</h3>
<p>Indexes serving a constraint (primary, unique or foreign key) are named accordingly. </p>
<p>Other indexes should have the name of the table and columns (or their purpose) in their name and should also have <code>_idx</code> as a suffix.</p>
<h3 id="object-type">Object Type</h3>
<p>The name of an object type is built by its content (singular) followed by a <code>_ot</code> suffix.</p>
<p>Optionally prefixed by a project abbreviation.</p>
<p>Example: <code>employee_ot</code></p>
<h3 id="package">Package</h3>
<p>Name is built from the content that is contained within the package.</p>
<p>Optionally prefixed by a project abbreviation.</p>
<p>Examples:</p>
<ul>
<li><code>employee_api</code> - API for the employee table</li>
<li><code>logger</code> - Utilities including logging support</li>
<li><code>constants</code> - Constants for use across a project</li>
<li><code>types</code> - Types for use across a project</li>
</ul>
<h3 id="primary-key-constraint">Primary Key Constraint</h3>
<p>Table name or table abbreviation followed by the suffix <code>_pk</code>.</p>
<p>Examples:</p>
<ul>
<li><code>employee_pk</code></li>
<li><code>department_pk</code></li>
<li><code>contract_pk</code></li>
</ul>
<h3 id="procedure">Procedure</h3>
<p>Name is built from a verb followed by a noun. The name of the procedure should answer the question “What is done?” </p>
<p>Procedures and functions are often named with underscores between words because some editors write all letters in uppercase in the object tree, so it is difficult to read them.</p>
<p>Optionally prefixed by a project abbreviation.</p>
<p>Examples:</p>
<ul>
<li><code>calculate_salary</code></li>
<li><code>set_hiredate</code></li>
<li><code>check_order_state</code></li>
</ul>
<h3 id="sequence">Sequence</h3>
<p>Version: Pre 12 only, 12 and later use identity columns, or potentially even better, use a default of <code>to_number(sys_guid(), 'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX')</code>.</p>
<p>Name is built from the table name the sequence serves as primary key generator and the suffix <code>_seq</code> or the purpose of the sequence followed by a <code>_seq</code>.</p>
<p>Optionally prefixed by a project abbreviation.</p>
<p>Examples:</p>
<ul>
<li><code>employee_seq</code></li>
<li><code>order_number_seq</code></li>
</ul>
<h3 id="synonym">Synonym</h3>
<p>Synonyms should share the name with the object referenced in another schema.</p>
<h3 id="system-trigger">System Trigger</h3>
<p>Name of the event the trigger is based on.</p>
<ul>
<li>Activity done by the trigger</li>
<li>Suffix <code>_trg</code></li>
</ul>
<p>Examples:</p>
<ul>
<li><code>ddl_audit_trg</code></li>
<li><code>logon_trg</code></li>
</ul>
<h3 id="table">Table</h3>
<p>Singular name of what is contained in the table.</p>
<p>Add a comment to the database dictionary for every table and every column in the table.</p>
<p>Optionally prefixed by a project abbreviation.</p>
<p>Examples:</p>
<ul>
<li><code>employee</code></li>
<li><code>department</code></li>
<li><code>sct_contract</code></li>
<li><code>sct_contract_line</code></li>
<li><code>sct_incentive_module</code></li>
</ul>
<p>Reason: Singular names have the following advantages over plural names:
1. In general, tables represent entities. Entities are singular. This encourages the art of Entity-Relationship modeling.
2. If all table names are singular, then you don't have to know if a table has a single row or multiple rows before you use it.
3. Plural names can be vastly different from singular names. What is the plural of news? lotus? knife? cactus? nucleus? There are so many words that are difficult and nonstandard to pluralize that it can add significant work to a project to 'figure out the plurals'.
4. For non-native speakers of whatever language is being used for table names, point number 3 is magnified significantly.
5. Plurals add extra unnecessary length to table names.
6. By far the biggest reason: There is no value in going through all the work to plural a table name. SQL statements often deal with a single row from a table with multiple rows, so you can't make the argument that <code>employees</code> is better than <code>employee</code> 'because the SQL will read better'.</p>
<p>Example (bad):</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">well_bores</span>
<span class="n">well_bore_completions</span>
<span class="n">well_bore_completion_components</span>
<span class="n">well_bore_studies</span>
<span class="n">well_bore_study_results</span>
<span class="n">wells</span>
</pre></div>
</td></tr></table>

<p>Example (good):</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">well</span>
<span class="n">well_bore</span>
<span class="n">well_bore_completion</span>
<span class="n">well_bore_completion_component</span>
<span class="n">well_bore_study</span>
<span class="n">well_bore_study_result</span>
</pre></div>
</td></tr></table>

<h3 id="surrogate-key-columns">Surrogate Key Columns</h3>
<p>Surrogate primary key columns should be the table name with an underscore and id appended. For example: <code>employee_id</code></p>
<p>Reason: Naming the surrogate primary key column the same name that it would have (at least 99% of the time) when used as a foreign key allows the use of the <code>using</code> clause in SQL which greatly increases readability and maintainability of SQL code. When each table has a surrogate primary key column named <code>id</code>, then <code>select</code> clauses that select multiple id columns will need aliases (more code, harder to read and maintain). Additionaly, the <code>id</code> surrogate key column means that every join will be forced into the <code>on</code> syntax which is more error-prone and harder to read than the <code>using</code> clause.</p>
<p>Example (bad):</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span> <span class="n">e</span><span class="p">.</span><span class="n">id</span> <span class="k">as</span> <span class="n">employee_id</span>
      <span class="p">,</span><span class="n">d</span><span class="p">.</span><span class="n">id</span> <span class="k">as</span> <span class="n">department_id</span>
      <span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span>
      <span class="p">,</span><span class="n">d</span><span class="p">.</span><span class="n">name</span>
  <span class="k">from</span> <span class="n">employee</span> <span class="n">e</span>
  <span class="k">join</span> <span class="n">department</span> <span class="n">d</span> <span class="k">on</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span> <span class="o">=</span> <span class="n">d</span><span class="p">.</span><span class="n">id</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<p>Example (good):</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span> <span class="n">e</span><span class="p">.</span><span class="n">employee_id</span>
      <span class="p">,</span><span class="n">department_id</span>
      <span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span>
      <span class="p">,</span><span class="n">d</span><span class="p">.</span><span class="n">name</span>
  <span class="k">from</span> <span class="n">employee</span> <span class="n">e</span>
  <span class="k">join</span> <span class="n">department</span> <span class="n">d</span> <span class="k">using</span> <span class="p">(</span><span class="n">department_id</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<h3 id="temporary-table-global-temporary-table">Temporary Table (Global Temporary Table)</h3>
<p>Naming as described for tables.</p>
<p>Ideally suffixed by <code>_gtt</code></p>
<p>Optionally prefixed by a project abbreviation.</p>
<p>Examples:</p>
<ul>
<li><code>employee_gtt</code></li>
<li><code>contract_gtt</code></li>
</ul>
<h3 id="unique-key-constraint">Unique Key Constraint</h3>
<p>Table name followed by the role of the unique key constraint, a <code>_uk</code> and an optional number suffix, if necessary.</p>
<p>Examples:</p>
<ul>
<li><code>employee_name_uk</code></li>
<li><code>department_deptno_uk</code></li>
<li><code>sct_contract_uk</code></li>
</ul>
<h3 id="view">View</h3>
<p>Singular name of what is contained in the view.</p>
<p>Ideally, suffixed by an indicator identifying the object as a view like <code>_v</code> or <code>_vw</code> (mostly used, when a 1:1 view layer lies above the table layer, but <em>not</em> used for editioning views)</p>
<p>Add a comment to the database dictionary for every view and every column.</p>
<p>Optionally prefixed by a project abbreviation.</p>
<p>Examples:</p>
<ul>
<li><code>active_order</code> -- A view that selects only active orders from the order table</li>
<li><code>order_v</code> -- A view to the order table</li>
<li><code>order</code> -- An editioning view that covers the <code>"_order"</code> base table</li>
</ul>
<h1 id="coding-style">Coding Style</h1>
<h2 id="formatting">Formatting</h2>
<h3 id="rules">Rules</h3>
<table>
<thead>
<tr>
<th align="center">Rule</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">1</td>
<td>All code is written in lowercase.</td>
</tr>
<tr>
<td align="center">2</td>
<td>3 space indention.</td>
</tr>
<tr>
<td align="center">3</td>
<td>One command per line.</td>
</tr>
<tr>
<td align="center">4</td>
<td>Keywords <code>loop</code>, <code>else</code>, <code>elseif</code>, <code>end if</code>, <code>when</code> on a new line.</td>
</tr>
<tr>
<td align="center">5</td>
<td>Commas in front of separated elements.</td>
</tr>
<tr>
<td align="center">6</td>
<td>Call parameters aligned, operators aligned, values aligned.</td>
</tr>
<tr>
<td align="center">7</td>
<td>SQL keywords are right aligned within a SQL command.</td>
</tr>
<tr>
<td align="center">8</td>
<td>Within a program unit only line comments <code>--</code> are used.</td>
</tr>
<tr>
<td align="center">9</td>
<td>Brackets are used when needed or when helpful to clarify a construct.</td>
</tr>
</tbody>
</table>
<h3 id="example">Example</h3>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">procedure</span> <span class="n">set_salary</span><span class="p">(</span><span class="n">in_employee_id</span> <span class="k">IN</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span> <span class="k">is</span>
   <span class="k">cursor</span> <span class="n">c_employee</span><span class="p">(</span><span class="n">p_employee_id</span> <span class="k">IN</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span> <span class="k">is</span> 
      <span class="k">select</span> <span class="n">last_name</span>
            <span class="p">,</span><span class="n">first_name</span>
            <span class="p">,</span><span class="n">salary</span>
        <span class="k">from</span> <span class="n">employee</span>
       <span class="k">where</span> <span class="n">employee_id</span> <span class="o">=</span> <span class="n">p_employee_id</span>
    <span class="k">order</span> <span class="k">by</span> <span class="n">last_name</span>
            <span class="p">,</span><span class="n">first_name</span><span class="p">;</span>

   <span class="n">r_employee</span>     <span class="n">c_employee</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>
   <span class="n">l_new_salary</span>   <span class="n">employee</span><span class="p">.</span><span class="n">salary</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">open</span>  <span class="n">c_employee</span><span class="p">(</span><span class="n">p_employee_id</span> <span class="o">=&gt;</span> <span class="n">in_employee_id</span><span class="p">);</span>
   <span class="k">fetch</span> <span class="n">c_employee</span> <span class="k">INTO</span> <span class="n">r_employee</span><span class="p">;</span>
   <span class="k">close</span> <span class="n">c_employee</span><span class="p">;</span>

   <span class="n">new_salary</span> <span class="p">(</span><span class="n">in_employee_id</span> <span class="o">=&gt;</span> <span class="n">in_employee_id</span>
              <span class="p">,</span><span class="n">out_salary</span>     <span class="o">=&gt;</span> <span class="n">l_new_salary</span><span class="p">);</span>

   <span class="c1">-- Check whether salary has changed</span>
   <span class="k">if</span> <span class="n">r_employee</span><span class="p">.</span><span class="n">salary</span> <span class="o">&lt;&gt;</span> <span class="n">l_new_salary</span> <span class="k">then</span>
      <span class="k">update</span> <span class="n">employee</span>
         <span class="k">set</span> <span class="n">salary</span> <span class="o">=</span> <span class="n">l_new_salary</span>
       <span class="k">where</span> <span class="n">employee_id</span> <span class="o">=</span> <span class="n">in_employee_id</span><span class="p">;</span>
   <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
<span class="k">end</span> <span class="n">set_salary</span><span class="p">;</span>
</pre></div>
</td></tr></table>

<h2 id="code-commenting">Code Commenting</h2>
<h3 id="commenting-goals">Commenting Goals</h3>
<p>Code comments are there to help future readers of the code (there is a good chance that future reader is you... Any code that you wrote six months to a year ago might as well have been written by someone else) understand how to use the code (especially in PL/SQL package specs) and how to maintain the code (especially in PL/SQL package bodies).</p>
<h3 id="package-version-function">Package Version Function</h3>
<p>Each package should have a package_version function that returns a varchar2.</p>
<h4 id="package-spec">Package Spec</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">--</span><span class="nv">This</span> <span class="nv">function</span> <span class="nv">returns</span> <span class="nv">the</span> <span class="nv">version</span> <span class="nv">number</span> <span class="nv">of</span> <span class="nv">the</span> <span class="nv">package</span> <span class="nv">using</span> <span class="nv">the</span> <span class="nv">following</span> <span class="nv">rules</span>:
<span class="o">--</span> <span class="mi">1</span>. <span class="k">If</span> <span class="nv">there</span> <span class="nv">is</span> <span class="nv">a</span> <span class="nv">major</span> <span class="nv">change</span> <span class="nv">that</span> <span class="nv">impacts</span> <span class="nv">multiple</span> <span class="nv">packages</span>, <span class="nv">increment</span> <span class="nv">the</span> <span class="nv">first</span> <span class="nv">digit</span>, <span class="nv">e</span>.<span class="nv">g</span>. <span class="mi">03</span>.<span class="mi">05</span>.<span class="mi">09</span> <span class="o">-&gt;</span> <span class="mi">04</span>.<span class="mi">00</span>.<span class="mi">00</span>
<span class="o">--</span> <span class="mi">2</span>. <span class="k">If</span> <span class="nv">there</span> <span class="nv">is</span> <span class="nv">a</span> <span class="nv">change</span> <span class="nv">to</span> <span class="nv">the</span> <span class="nv">package</span> <span class="nv">spec</span>, <span class="nv">increment</span> <span class="nv">the</span> <span class="nv">first</span> <span class="nv">dot</span>, <span class="nv">e</span>.<span class="nv">g</span>. <span class="mi">03</span>.<span class="mi">02</span>.<span class="mi">05</span> <span class="o">-&gt;</span> <span class="mi">03</span>.<span class="mi">03</span>.<span class="mi">00</span>
<span class="o">--</span> <span class="mi">3</span>. <span class="k">If</span> <span class="nv">there</span> <span class="nv">is</span> <span class="nv">a</span> <span class="nv">minor</span> <span class="nv">change</span>, <span class="nv">only</span> <span class="nv">to</span> <span class="nv">the</span> <span class="nv">package</span> <span class="nv">body</span>, <span class="nv">increment</span> <span class="nv">the</span> <span class="nv">last</span> <span class="nv">dot</span> <span class="nv">e</span>.<span class="nv">g</span>. <span class="mi">03</span>.<span class="mi">02</span>.<span class="mi">05</span> <span class="o">-&gt;</span> <span class="mi">03</span>.<span class="mi">02</span>.<span class="mi">06</span>
<span class="o">--</span> <span class="mi">4</span>. <span class="k">If</span> <span class="nv">the</span> <span class="nv">function</span> <span class="nv">returns</span> <span class="nv">a</span> <span class="nv">value</span> <span class="nv">ending</span> <span class="nv">in</span> <span class="nv">WIP</span>, <span class="k">then</span> <span class="nv">the</span> <span class="nv">package</span> <span class="nv">is</span> <span class="nv">actively</span> <span class="nv">being</span> <span class="nv">worked</span> <span class="nv">on</span> <span class="nv">by</span> <span class="nv">a</span> <span class="nv">developer</span>.
<span class="nv">function</span> <span class="nv">package_version</span> <span class="k">return</span> <span class="nv">varchar2</span><span class="c1">;</span>
</pre></div>
</td></tr></table>

<h4 id="package-body">Package Body</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">--</span> <span class="nv">Increment</span> <span class="nv">the</span> <span class="nv">version</span> <span class="nv">number</span> <span class="nv">based</span> <span class="nv">upon</span> <span class="nv">the</span> <span class="nv">following</span> <span class="nv">rules</span>
<span class="o">--</span> <span class="mi">1</span>. <span class="k">If</span> <span class="nv">there</span> <span class="nv">is</span> <span class="nv">a</span> <span class="nv">major</span> <span class="nv">change</span> <span class="nv">that</span> <span class="nv">impacts</span> <span class="nv">multiple</span> <span class="nv">packages</span>, <span class="nv">increment</span> <span class="nv">the</span> <span class="nv">first</span> <span class="nv">digit</span>, <span class="nv">e</span>.<span class="nv">g</span>. <span class="mi">03</span>.<span class="mi">05</span>.<span class="mi">09</span> <span class="o">-&gt;</span> <span class="mi">04</span>.<span class="mi">00</span>.<span class="mi">00</span>
<span class="o">--</span> <span class="mi">2</span>. <span class="k">If</span> <span class="nv">there</span> <span class="nv">is</span> <span class="nv">a</span> <span class="nv">change</span> <span class="nv">to</span> <span class="nv">the</span> <span class="nv">package</span> <span class="nv">spec</span>, <span class="nv">increment</span> <span class="nv">the</span> <span class="nv">first</span> <span class="nv">dot</span>, <span class="nv">e</span>.<span class="nv">g</span>. <span class="mi">03</span>.<span class="mi">02</span>.<span class="mi">05</span> <span class="o">-&gt;</span> <span class="mi">03</span>.<span class="mi">03</span>.<span class="mi">00</span>
<span class="o">--</span> <span class="mi">3</span>. <span class="k">If</span> <span class="nv">there</span> <span class="nv">is</span> <span class="nv">a</span> <span class="nv">minor</span> <span class="nv">change</span>, <span class="nv">only</span> <span class="nv">to</span> <span class="nv">the</span> <span class="nv">package</span> <span class="nv">body</span>, <span class="nv">increment</span> <span class="nv">the</span> <span class="nv">last</span> <span class="nv">dot</span> <span class="nv">e</span>.<span class="nv">g</span>. <span class="mi">03</span>.<span class="mi">02</span>.<span class="mi">05</span> <span class="o">-&gt;</span> <span class="mi">03</span>.<span class="mi">02</span>.<span class="mi">06</span>
<span class="o">--</span> <span class="mi">4</span>. <span class="k">If</span> <span class="nv">a</span> <span class="nv">developer</span> <span class="nv">begins</span> <span class="nv">work</span> <span class="nv">on</span> <span class="nv">a</span> <span class="nv">package</span>, <span class="nv">increment</span> <span class="nv">the</span> <span class="nv">comment</span> <span class="nv">version</span> <span class="nv">and</span> <span class="k">include</span> <span class="nv">the</span> <span class="nv">words</span> <span class="s1">&#39;</span><span class="s">IN PROGRESS</span><span class="s1">&#39;</span> <span class="nv">in</span> 
<span class="o">--</span>    <span class="nv">the</span> <span class="nv">new</span> <span class="nv">version</span> <span class="nv">line</span>. <span class="nv">Increment</span> <span class="nv">the</span> <span class="k">return</span> <span class="nv">value</span> <span class="nv">and</span> <span class="nv">add</span> <span class="nv">WIP</span> <span class="nv">to</span> <span class="nv">the</span> <span class="k">return</span> <span class="nv">value</span>. <span class="nv">Example</span>:  <span class="k">return</span> <span class="s1">&#39;</span><span class="s">01.00.01 WIP</span><span class="s1">&#39;</span>  
<span class="o">--</span>    <span class="nv">And</span> <span class="k">then</span> <span class="nv">IMMEDIATELY</span> <span class="nv">push</span><span class="o">/</span><span class="nv">commit</span> <span class="o">&amp;</span> <span class="nv">compile</span> <span class="nv">the</span> <span class="nv">package</span>.
<span class="o">--</span>   <span class="nv">As</span> <span class="nv">you</span> <span class="nv">are</span> <span class="nv">working</span> <span class="nv">on</span> <span class="nv">the</span> <span class="nv">package</span> <span class="nv">and</span> <span class="nv">make</span> <span class="nv">updates</span> <span class="nv">to</span> <span class="nv">lines</span>, <span class="nv">use</span> <span class="nv">the</span> <span class="nv">version</span> <span class="nv">number</span> <span class="nv">at</span> <span class="nv">the</span> <span class="k">end</span> <span class="nv">of</span> <span class="nv">the</span> <span class="nv">line</span> <span class="nv">to</span> <span class="nv">indicate</span> <span class="nv">when</span> 
<span class="o">--</span>  <span class="nv">the</span> <span class="nv">line</span> <span class="nv">was</span> <span class="nv">changed</span>. <span class="nv">Example</span>: <span class="nv">l_person</span> :<span class="o">=</span> <span class="s1">&#39;</span><span class="s">Bob</span><span class="s1">&#39;</span><span class="c1">;  -- 01.00.01 Bob is the new person, was Joe.</span>
<span class="o">--</span> <span class="mi">5</span>. <span class="nv">Once</span> <span class="nv">work</span> <span class="nv">is</span> <span class="nv">complete</span>, <span class="nv">remove</span> <span class="s1">&#39;</span><span class="s">IN PROGRESS</span><span class="s1">&#39;</span> <span class="nv">from</span> <span class="nv">the</span> <span class="nv">comment</span> <span class="nv">and</span> <span class="nv">remove</span> <span class="nv">WIP</span> <span class="nv">from</span> <span class="nv">the</span> <span class="k">return</span> <span class="nv">value</span>.
<span class="o">--</span> <span class="mi">6</span>. <span class="k">If</span> <span class="nv">your</span> <span class="nv">work</span> <span class="nv">crosses</span> <span class="nv">the</span> <span class="nv">boundary</span> <span class="nv">of</span> <span class="nv">a</span> <span class="nv">sprint</span>, <span class="nv">having</span> <span class="nv">WIP</span> <span class="nv">in</span> <span class="nv">the</span> <span class="k">return</span> <span class="nv">value</span> <span class="nv">will</span> <span class="nv">indicate</span> <span class="nv">that</span> <span class="nv">the</span> <span class="nv">package</span> <span class="nv">should</span> <span class="nv">not</span> <span class="nv">be</span> <span class="nv">promoted</span>.
<span class="nv">function</span> <span class="nv">package_version</span> <span class="k">return</span> <span class="nv">varchar2</span>
<span class="nv">is</span>
<span class="nv">begin</span>
  <span class="o">--</span> <span class="mi">01</span>.<span class="mi">00</span>.<span class="mi">00</span> <span class="nv">YYYY</span><span class="o">-</span><span class="nv">MM</span><span class="o">-</span><span class="nv">DD</span> <span class="nv">First</span> <span class="o">&amp;</span> <span class="nv">Last</span> <span class="nv">Name</span>  <span class="nv">Initial</span> <span class="nv">Version</span>
  <span class="o">--</span> <span class="mi">01</span>.<span class="mi">00</span>.<span class="mi">01</span> <span class="nv">YYYY</span><span class="o">-</span><span class="nv">MM</span><span class="o">-</span><span class="nv">DD</span> <span class="nv">First</span> <span class="o">&amp;</span> <span class="nv">Last</span> <span class="nv">Name</span>  <span class="nv">Fixed</span> <span class="nv">issue</span> <span class="nv">number</span> <span class="mi">72</span> <span class="nv">documented</span> <span class="nv">in</span> <span class="nv">Jira</span> <span class="nv">ticket</span> <span class="mi">87</span>: <span class="nv">https</span>:<span class="o">//</span><span class="nv">ourjiraurl</span>.<span class="nv">com</span><span class="o">/</span><span class="nv">f</span>?<span class="nv">p</span><span class="o">=</span><span class="mi">87</span>
   <span class="k">return</span> <span class="s1">&#39;</span><span class="s">01.00.01</span><span class="s1">&#39;</span> <span class="c1">;</span>
<span class="k">end</span> <span class="nv">package_version</span><span class="c1">;</span>
</pre></div>
</td></tr></table>

<p>Some notes on the above: We are computer scientists, we write dates as YYYY-MM-DD, not DD-MON-RR or MON-DD-YYYY or any other way.</p>
<p>If you are in the middle of an update, then the function would look like this:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">[snip]</span>
  <span class="na">-- 01.00.00 YYYY-MM-DD First &amp; Last Name  Initial Version</span>
  <span class="na">-- 01.00.01 YYYY-MM-DD First &amp; Last Name  Fixed issue documented in Jira ticket 87: https://ourjiraurl.com/f?p</span><span class="o">=</span><span class="s">87</span>
<span class="s">  -- 01.00.02 2019-10-25 Rich Soule         IN PROGRESS Fixing issue documented in Jira ticket 90: https://ourjiraurl.com/f?p=90</span>
<span class="s">   return &#39;01.00.02 WIP&#39; ;</span>
<span class="na">end package_version;</span>
</pre></div>
</td></tr></table>

<h3 id="commenting-conventions">Commenting Conventions</h3>
<p>Inside a program unit only use the line commenting technique <code>--</code> unless you temporarly deactivate code sections for testing.</p>
<p>To comment the source code for later document generation, comments like <code>/** ... */</code> are used. Within these documentation comments, tags may be used to define the documentation structure.</p>
<p>Tools like ORACLE SQL Developer or PL/SQL Developer include documentation functionality based on a javadoc-like tagging. </p>
<h3 id="commenting-tags">Commenting Tags</h3>
<table>
<thead>
<tr>
<th>Tag</th>
<th>Meaning</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>param</code></td>
<td>Description of a parameter.</td>
<td><code>@param in_string input string</code></td>
</tr>
<tr>
<td><code>return</code></td>
<td>Description of the return value of a function.</td>
<td><code>@return result of the calculation</code></td>
</tr>
<tr>
<td><code>throws</code></td>
<td>Describe errors that may be raised by the program unit.</td>
<td><code>@throws no_data_found</code></td>
</tr>
</tbody>
</table>
<h3 id="example_1">Example</h3>
<p>This is an example using the documentation capabilities of SQL Developer. </p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cm">/**</span>
<span class="cm">Check whether we passed a valid sql name</span>

<span class="cm">@param   in_name  string to be checked</span>
<span class="cm">@return  in_name if the string represents a valid sql name</span>
<span class="cm">@throws  ORA-44003: invalid SQL name </span>

<span class="cm">&lt;b&gt;Call Example:&lt;/b&gt;</span>
<span class="cm">&lt;pre&gt;</span>
<span class="cm">   select tvdassert.valid_sql_name(&#39;TEST&#39;) from dual;</span>
<span class="cm">   SELECT tvdassert.valid_sql_name(&#39;123&#39;) from dual</span>
<span class="cm">&lt;/pre&gt;</span>
<span class="cm">*/</span>
</pre></div>
</td></tr></table>

<h1 id="language-usage">Language Usage</h1>
<h2 id="general">General</h2>
<h3 id="g-1010-try-to-label-your-sub-blocks">G-1010: Try to label your sub blocks.</h3>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability</p>
</div>
<h4 id="reason">Reason</h4>
<p>It's a good alternative for comments to indicate the start and end of a named processing.</p>
<h4 id="example-bad">Example (bad)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">begin</span>
   <span class="k">begin</span> 
      <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span><span class="p">;</span>

   <span class="k">begin</span>
      <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="example-good">Example (good)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">&lt;&lt;</span><span class="n">good</span><span class="o">&gt;&gt;</span>
<span class="k">begin</span>
   <span class="o">&lt;&lt;</span><span class="n">prepare_data</span><span class="o">&gt;&gt;</span>
   <span class="k">begin</span> 
      <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">prepare_data</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">process_data</span><span class="o">&gt;&gt;</span>
   <span class="k">begin</span>
      <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">process_data</span><span class="p">;</span>
<span class="k">end</span> <span class="n">good</span><span class="p">;</span> 
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="g-1020-have-a-matching-loop-or-block-label">G-1020: Have a matching loop or block label.</h3>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability</p>
</div>
<h4 id="reason_1">Reason</h4>
<p>Use a label directly in front of loops and nested anonymous blocks:</p>
<ul>
<li>To give a name to that portion of code and thereby self-document what it is doing.</li>
<li>So that you can repeat that name with the <code>end</code> statement of that block or loop.</li>
</ul>
<h4 id="example-bad_1">Example (bad)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">i</span> <span class="nb">integer</span><span class="p">;</span>
   <span class="n">k_min_value</span> <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="n">k_max_value</span> <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
   <span class="n">k_increment</span> <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="o">&lt;&lt;</span><span class="n">prepare_data</span><span class="o">&gt;&gt;</span>
   <span class="k">begin</span> 
      <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">process_data</span><span class="o">&gt;&gt;</span>
   <span class="k">begin</span>
      <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span><span class="p">;</span>

   <span class="n">i</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_min_value</span><span class="p">;</span>
   <span class="o">&lt;&lt;</span><span class="n">while_loop</span><span class="o">&gt;&gt;</span>
   <span class="n">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">k_max_value</span><span class="p">)</span> 
   <span class="n">loop</span> 
      <span class="n">i</span> <span class="p">:</span><span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">k_increment</span><span class="p">;</span> 
   <span class="k">end</span> <span class="n">loop</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">basic_loop</span><span class="o">&gt;&gt;</span>
   <span class="n">loop</span> 
      <span class="n">exit</span> <span class="n">basic_loop</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">for_loop</span><span class="o">&gt;&gt;</span>
   <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">k_min_value</span><span class="p">..</span><span class="n">k_max_value</span>
   <span class="n">loop</span> 
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
   <span class="k">end</span> <span class="n">loop</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="example-good_1">Example (good)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">i</span> <span class="nb">integer</span><span class="p">;</span>
   <span class="n">k_min_value</span> <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="n">k_max_value</span> <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
   <span class="n">k_increment</span> <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="o">&lt;&lt;</span><span class="n">prepare_data</span><span class="o">&gt;&gt;</span>
   <span class="k">begin</span> 
      <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">prepare_data</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">process_data</span><span class="o">&gt;&gt;</span>
   <span class="k">begin</span>
      <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">process_data</span><span class="p">;</span>

   <span class="n">i</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_min_value</span><span class="p">;</span>
   <span class="o">&lt;&lt;</span><span class="n">while_loop</span><span class="o">&gt;&gt;</span>
   <span class="n">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">k_max_value</span><span class="p">)</span> 
   <span class="n">loop</span> 
      <span class="n">i</span> <span class="p">:</span><span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">k_increment</span><span class="p">;</span> 
   <span class="k">end</span> <span class="n">loop</span> <span class="n">while_loop</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">basic_loop</span><span class="o">&gt;&gt;</span>
   <span class="n">loop</span> 
      <span class="n">exit</span> <span class="n">basic_loop</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">basic_loop</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">for_loop</span><span class="o">&gt;&gt;</span>
   <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">k_min_value</span><span class="p">..</span><span class="n">k_max_value</span>
   <span class="n">loop</span> 
     <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">for_loop</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="g-1030-avoid-defining-variables-that-are-not-used">G-1030: Avoid defining variables that are not used.</h3>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Efficiency, Maintainability</p>
</div>
<h4 id="reason_2">Reason</h4>
<p>Unused variables decrease the maintainability and readability of your code.</p>
<h4 id="example-bad_2">Example (bad)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">my_proc</span> <span class="k">is</span>
      <span class="n">l_last_name</span>  <span class="n">employee</span><span class="p">.</span><span class="n">last_name</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
      <span class="n">l_first_name</span> <span class="n">employee</span><span class="p">.</span><span class="n">first_name</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
      <span class="n">k_department_id</span> <span class="n">constant</span> <span class="n">department</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
      <span class="n">e_good</span> <span class="k">exception</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="k">select</span> <span class="n">e</span><span class="p">.</span><span class="n">last_name</span>
        <span class="k">into</span> <span class="n">l_last_name</span>
        <span class="k">from</span> <span class="n">employee</span> <span class="n">e</span>
       <span class="k">where</span> <span class="n">e</span><span class="p">.</span><span class="n">department_id</span> <span class="o">=</span> <span class="n">k_department_id</span><span class="p">;</span>
   <span class="k">exception</span>
      <span class="k">when</span> <span class="n">no_data_found</span> <span class="k">then</span> <span class="k">null</span><span class="p">;</span> <span class="c1">-- handle_no_data_found;</span>
      <span class="k">when</span> <span class="n">too_many_rows</span> <span class="k">then</span> <span class="k">null</span><span class="p">;</span> <span class="c1">-- handle_too_many_rows;</span>
   <span class="k">end</span> <span class="n">my_proc</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="example-good_2">Example (good)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">my_proc</span> <span class="k">is</span>
      <span class="n">l_last_name</span>  <span class="n">employee</span><span class="p">.</span><span class="n">last_name</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
      <span class="n">k_department_id</span> <span class="n">constant</span> <span class="n">department</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
      <span class="n">e_good</span> <span class="k">exception</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="k">select</span> <span class="n">e</span><span class="p">.</span><span class="n">last_name</span>
        <span class="k">into</span> <span class="n">l_last_name</span>
        <span class="k">from</span> <span class="n">employee</span> <span class="n">e</span>
       <span class="k">where</span> <span class="n">e</span><span class="p">.</span><span class="n">department_id</span> <span class="o">=</span> <span class="n">k_department_id</span><span class="p">;</span>

      <span class="n">raise</span> <span class="n">e_good</span><span class="p">;</span>
   <span class="k">exception</span>
      <span class="k">when</span> <span class="n">no_data_found</span> <span class="k">then</span> <span class="k">null</span><span class="p">;</span> <span class="c1">-- handle_no_data_found;</span>
      <span class="k">when</span> <span class="n">too_many_rows</span> <span class="k">then</span> <span class="k">null</span><span class="p">;</span> <span class="c1">-- handle_too_many_rows;</span>
   <span class="k">end</span> <span class="n">my_proc</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="g-1040-always-avoid-dead-code">G-1040: Always avoid dead code.</h3>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability</p>
</div>
<h4 id="reason_3">Reason</h4>
<p>Any part of your code, which is no longer used or cannot be reached, should be eliminated from your programs to simplify the code.</p>
<h4 id="example-bad_3">Example (bad)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nv">declare</span>
   <span class="nv">k_dept_purchasing</span> <span class="nv">constant</span> <span class="nv">departments</span>.<span class="nv">department_id</span><span class="o">%</span><span class="nv">type</span> :<span class="o">=</span> <span class="mi">30</span><span class="c1">;</span>
<span class="nv">begin</span>
   <span class="k">if</span> <span class="mi">2</span><span class="o">=</span><span class="mi">3</span> <span class="k">then</span>
      <span class="nv">null</span><span class="c1">; -- some dead code here</span>
   <span class="k">end</span> <span class="k">if</span><span class="c1">;</span>

   <span class="nv">null</span><span class="c1">; -- some enabled code here</span>

   <span class="o">&lt;&lt;</span><span class="nv">my_loop</span><span class="o">&gt;&gt;</span>
   <span class="k">loop</span>
      <span class="k">exit</span> <span class="nv">my_loop</span><span class="c1">;    </span>
      <span class="nv">null</span><span class="c1">; -- some dead code here</span>
   <span class="k">end</span> <span class="k">loop</span> <span class="nv">my_loop</span><span class="c1">;</span>

   <span class="nv">null</span><span class="c1">; -- some other enabled code here</span>

   <span class="nv">case</span> 
      <span class="nv">when</span> <span class="mi">1</span> <span class="o">=</span> <span class="mi">1</span> <span class="nv">and</span> <span class="s1">&#39;</span><span class="s">x</span><span class="s1">&#39;</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">y</span><span class="s1">&#39;</span> <span class="k">then</span>
         <span class="nv">null</span><span class="c1">; -- some dead code here</span>
      <span class="k">else</span>
         <span class="nv">null</span><span class="c1">; -- some further enabled code here</span>
   <span class="k">end</span> <span class="nv">case</span><span class="c1">;</span>

   <span class="o">&lt;&lt;</span><span class="nv">my_loop2</span><span class="o">&gt;&gt;</span>
   <span class="k">for</span> <span class="nv">r_emp</span> <span class="nv">in</span> <span class="ss">(</span><span class="nv">select</span> <span class="nv">last_name</span>
                   <span class="nv">from</span> <span class="nv">employee</span>
                  <span class="nv">where</span> <span class="nv">department_id</span> <span class="o">=</span> <span class="nv">k_dept_purchasing</span>
                     <span class="nv">or</span> <span class="nv">commission_pct</span> <span class="nv">is</span> <span class="nv">not</span> <span class="nv">null</span> 
                    <span class="nv">and</span> <span class="mi">5</span><span class="o">=</span><span class="mi">6</span><span class="ss">)</span> 
                <span class="o">--</span> <span class="s2">&quot;</span><span class="s">or commission_pct is not null</span><span class="s2">&quot;</span> <span class="nv">is</span> <span class="nv">dead</span> <span class="nv">code</span> 
   <span class="k">loop</span>
      <span class="nv">sys</span>.<span class="nv">dbms_output</span>.<span class="nv">put_line</span><span class="ss">(</span><span class="nv">r_emp</span>.<span class="nv">last_name</span><span class="ss">)</span><span class="c1">;</span>
   <span class="k">end</span> <span class="k">loop</span> <span class="nv">my_loop2</span><span class="c1">;</span>

   <span class="k">return</span><span class="c1">;</span>
   <span class="nv">null</span><span class="c1">; -- some dead code here</span>
<span class="k">end</span><span class="c1">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="example-good_3">Example (good)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nv">declare</span>
   <span class="nv">k_dept_admin</span> <span class="nv">constant</span> <span class="nv">dept</span>.<span class="nv">deptno</span><span class="o">%</span><span class="nv">type</span> :<span class="o">=</span> <span class="mi">10</span><span class="c1">;</span>
<span class="nv">begin</span>
   <span class="nv">null</span><span class="c1">; -- some enabled code here</span>
   <span class="nv">null</span><span class="c1">; -- some other enabled code here</span>
   <span class="nv">null</span><span class="c1">; -- some further enabled code here</span>

   <span class="o">&lt;&lt;</span><span class="nv">my_loop2</span><span class="o">&gt;&gt;</span>
   <span class="k">for</span> <span class="nv">r_emp</span> <span class="nv">in</span> <span class="ss">(</span><span class="nv">select</span> <span class="nv">last_name</span>
                   <span class="nv">from</span> <span class="nv">employee</span>
                  <span class="nv">where</span> <span class="nv">department_id</span> <span class="o">=</span> <span class="nv">k_dept_admin</span>
                     <span class="nv">or</span> <span class="nv">commission_pct</span> <span class="nv">is</span> <span class="nv">not</span> <span class="nv">null</span><span class="ss">)</span> 
   <span class="k">loop</span>
      <span class="nv">sys</span>.<span class="nv">dbms_output</span>.<span class="nv">put_line</span><span class="ss">(</span><span class="nv">r_emp</span>.<span class="nv">last_name</span><span class="ss">)</span><span class="c1">;</span>
   <span class="k">end</span> <span class="k">loop</span> <span class="nv">my_loop2</span><span class="c1">;</span>
<span class="k">end</span><span class="c1">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="g-1050-avoid-using-literals-in-your-code">G-1050: Avoid using literals in your code.</h3>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Changeability</p>
</div>
<h4 id="reason_4">Reason</h4>
<p>Literals are often used more than once in your code. Having them defined as a constant reduces typos in your code and improves the maintainability.</p>
<p>All constants should be collated in just one package used as a library. If these constants should be used in SQL too it is good practice to write a deterministic package function for every constant.</p>
<h4 id="example-bad_4">Example (bad)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nv">declare</span>
   <span class="nv">l_job</span> <span class="nv">employee</span>.<span class="nv">job_id</span><span class="o">%</span><span class="nv">type</span><span class="c1">;</span>
<span class="nv">begin</span>
   <span class="nv">select</span> <span class="nv">e</span>.<span class="nv">job_id</span>
     <span class="nv">into</span> <span class="nv">l_job</span>
     <span class="nv">from</span> <span class="nv">employee</span> <span class="nv">e</span>
    <span class="nv">where</span> <span class="nv">e</span>.<span class="nv">manager_id</span> <span class="nv">is</span> <span class="nv">null</span><span class="c1">;</span>

   <span class="k">if</span> <span class="nv">l_job</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">ad_pres</span><span class="s1">&#39;</span> <span class="k">then</span>
      <span class="nv">null</span><span class="c1">;</span>
   <span class="k">end</span> <span class="k">if</span><span class="c1">;</span>
<span class="nv">exception</span>
   <span class="nv">when</span> <span class="nv">no_data_found</span> <span class="k">then</span> 
      <span class="nv">null</span><span class="c1">; -- handle_no_data_found;</span>
   <span class="nv">when</span> <span class="nv">too_many_rows</span> <span class="k">then</span> 
      <span class="nv">null</span><span class="c1">; -- handle_too_many_rows; </span>
<span class="k">end</span><span class="c1">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="example-good_4">Example (good)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nv">create</span> <span class="nv">or</span> <span class="nv">replace</span> <span class="nv">package</span> <span class="nv">constants</span> <span class="nv">is</span>
   <span class="nv">k_president</span> <span class="nv">constant</span> <span class="nv">employee</span>.<span class="nv">job_id</span><span class="o">%</span><span class="nv">type</span> :<span class="o">=</span> <span class="s1">&#39;</span><span class="s">ad_pres</span><span class="s1">&#39;</span><span class="c1">;</span>
<span class="k">end</span> <span class="nv">constants</span><span class="c1">;</span>
<span class="o">/</span>

<span class="nv">declare</span>
   <span class="nv">l_job</span> <span class="nv">employee</span>.<span class="nv">job_id</span><span class="o">%</span><span class="nv">type</span><span class="c1">;</span>
<span class="nv">begin</span>
   <span class="nv">select</span> <span class="nv">e</span>.<span class="nv">job_id</span>
     <span class="nv">into</span> <span class="nv">l_job</span>
     <span class="nv">from</span> <span class="nv">employee</span> <span class="nv">e</span>
    <span class="nv">where</span> <span class="nv">e</span>.<span class="nv">manager_id</span> <span class="nv">is</span> <span class="nv">null</span><span class="c1">;</span>

   <span class="k">if</span> <span class="nv">l_job</span> <span class="o">=</span> <span class="nv">constants</span>.<span class="nv">k_president</span> <span class="k">then</span>
      <span class="nv">null</span><span class="c1">;</span>
   <span class="k">end</span> <span class="k">if</span><span class="c1">;</span>
<span class="nv">exception</span>
   <span class="nv">when</span> <span class="nv">no_data_found</span> <span class="k">then</span> 
      <span class="nv">null</span><span class="c1">; -- handle_no_data_found;</span>
   <span class="nv">when</span> <span class="nv">too_many_rows</span> <span class="k">then</span> 
      <span class="nv">null</span><span class="c1">; -- handle_too_many_rows; </span>
<span class="k">end</span><span class="c1">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="g-1060-avoid-storing-rowids-or-urowids-in-database-tables">G-1060: Avoid storing ROWIDs or UROWIDs in database tables.</h3>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Reliability</p>
</div>
<h4 id="reason_5">Reason</h4>
<p>It is an extremely dangerous practice to store ROWIDs in a table, except for some very limited scenarios of runtime duration. Any manually explicit or system generated implicit table reorganization will reassign the row's ROWID and break the data consistency.</p>
<p>Instead of using ROWID for later reference to the original row one should use the primary key column(s).</p>
<h4 id="example-bad_5">Example (bad)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">begin</span>
   <span class="k">insert</span> <span class="k">into</span> <span class="n">employee_log</span> <span class="p">(</span><span class="n">employee_id</span>
                            <span class="p">,</span><span class="n">last_name</span>
                            <span class="p">,</span><span class="n">first_name</span>
                            <span class="p">,</span><span class="n">rid</span><span class="p">)</span>
   <span class="k">select</span> <span class="n">employee_id</span> 
         <span class="p">,</span><span class="n">last_name</span>
         <span class="p">,</span><span class="n">first_name</span>
         <span class="p">,</span><span class="n">rowid</span>
     <span class="k">from</span> <span class="n">employee</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="example-good_5">Example (good)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">begin</span>
   <span class="k">insert</span> <span class="k">into</span> <span class="n">employee_log</span> <span class="p">(</span><span class="n">employee_id</span>
                            <span class="p">,</span><span class="n">last_name</span>
                            <span class="p">,</span><span class="n">first_name</span><span class="p">)</span>
   <span class="k">select</span> <span class="n">employee_id</span> 
         <span class="p">,</span><span class="n">last_name</span>
         <span class="p">,</span><span class="n">first_name</span>
     <span class="k">from</span> <span class="n">employee</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="g-1070-avoid-nesting-comment-blocks">G-1070: Avoid nesting comment blocks.</h3>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability</p>
</div>
<h4 id="reason_6">Reason</h4>
<p>Having an end-of-comment within a block comment will end that block-comment. This does not only influence your code but is also very hard to read.</p>
<h4 id="example-bad_6">Example (bad)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">begin</span>
   <span class="cm">/* comment one -- nested comment two */</span>
   <span class="k">null</span><span class="p">;</span>
   <span class="c1">-- comment three /* nested comment four */</span>
   <span class="k">null</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="example-good_6">Example (good)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">begin</span>
   <span class="cm">/* comment one, comment two */</span>
   <span class="k">null</span><span class="p">;</span>
   <span class="c1">-- comment three, comment four</span>
   <span class="k">null</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h2 id="variables-types">Variables &amp; Types</h2>
<h3 id="general_1">General</h3>
<h4 id="g-2110-try-to-use-anchored-declarations-for-variables-constants-and-types">G-2110: Try to use anchored declarations for variables, constants and types.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Maintainability, Reliability</p>
</div>
<h5 id="reason_7">Reason</h5>
<p>Changing the size of the database column last_name in the employee table from <code>varchar2(20 char)</code> to <code>varchar2(30 char)</code> will result in an error within your code whenever a value larger than the hard coded size is read from the table. This can be avoided using anchored declarations.</p>
<h5 id="example-bad_7">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">my_proc</span> <span class="k">is</span>
      <span class="n">l_last_name</span>  <span class="n">varchar2</span><span class="p">(</span><span class="mi">20</span> <span class="nb">char</span><span class="p">);</span>
      <span class="n">k_first_row</span> <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="k">select</span> <span class="n">e</span><span class="p">.</span><span class="n">last_name</span>
        <span class="k">into</span> <span class="n">l_last_name</span>
        <span class="k">from</span> <span class="n">employee</span> <span class="n">e</span>
       <span class="k">where</span> <span class="n">rownum</span> <span class="o">=</span> <span class="n">k_first_row</span><span class="p">;</span>
   <span class="k">exception</span>
      <span class="k">when</span> <span class="n">no_data_found</span> <span class="k">then</span> <span class="k">null</span><span class="p">;</span> <span class="c1">-- handle no_data_found</span>
      <span class="k">when</span> <span class="n">too_many_rows</span> <span class="k">then</span> <span class="k">null</span><span class="p">;</span> <span class="c1">-- handle too_many_rows (impossible)</span>
   <span class="k">end</span> <span class="n">my_proc</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_7">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">my_proc</span> <span class="k">is</span>
      <span class="n">l_last_name</span>  <span class="n">employee</span><span class="p">.</span><span class="n">last_name</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
      <span class="n">k_first_row</span> <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="k">select</span> <span class="n">e</span><span class="p">.</span><span class="n">last_name</span>
        <span class="k">into</span> <span class="n">l_last_name</span>
        <span class="k">from</span> <span class="n">employee</span> <span class="n">e</span>
       <span class="k">where</span> <span class="n">rownum</span> <span class="o">=</span> <span class="n">k_first_row</span><span class="p">;</span>
   <span class="k">exception</span>
      <span class="k">when</span> <span class="n">no_data_found</span> <span class="k">then</span> <span class="k">null</span><span class="p">;</span> <span class="c1">-- handle no_data_found</span>
      <span class="k">when</span> <span class="n">too_many_rows</span> <span class="k">then</span> <span class="k">null</span><span class="p">;</span> <span class="c1">-- handle too_many_rows (impossible)</span>
   <span class="k">end</span> <span class="n">my_proc</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-2120-try-to-have-a-single-location-to-define-your-types">G-2120: Try to have a single location to define your types.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Changeability</p>
</div>
<h5 id="reason_8">Reason</h5>
<p>Single point of change when changing the data type. No need to argue where to define types or where to look for existing definitions.</p>
<p>A single location could be either a type specification package or the database (database-defined types).</p>
<h5 id="example-bad_8">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">my_proc</span> <span class="k">is</span>
      <span class="n">subtype</span> <span class="n">big_string_type</span> <span class="k">is</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">1000</span> <span class="nb">char</span><span class="p">);</span>
      <span class="n">l_note</span> <span class="n">big_string_type</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="n">l_note</span> <span class="p">:</span><span class="o">=</span> <span class="n">some_function</span><span class="p">();</span>
   <span class="k">end</span> <span class="n">my_proc</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_8">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">types</span> <span class="k">is</span>
   <span class="n">subtype</span> <span class="n">big_string_type</span> <span class="k">is</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">1000</span> <span class="nb">char</span><span class="p">);</span>
<span class="k">end</span> <span class="n">types</span><span class="p">;</span>
<span class="o">/</span>

<span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">my_proc</span> <span class="k">is</span>
      <span class="n">l_note</span> <span class="n">types</span><span class="p">.</span><span class="n">big_string_type</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="n">l_note</span> <span class="p">:</span><span class="o">=</span> <span class="n">some_function</span><span class="p">();</span>
   <span class="k">end</span> <span class="n">my_proc</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-2130-try-to-use-subtypes-for-constructs-used-often-in-your-code">G-2130: Try to use subtypes for constructs used often in your code.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Changeability</p>
</div>
<h5 id="reason_9">Reason</h5>
<p>Single point of change when changing the data type.</p>
<p>Your code will be easier to read as the usage of a variable/constant may be derived from its definition.</p>
<h5 id="examples-of-possible-subtype-definitions">Examples of possible subtype definitions</h5>
<table>
<thead>
<tr>
<th>Type</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ora_name_type</code></td>
<td>Object corresponding to the ORACLE naming conventions (table, variable, column, package, etc.).</td>
</tr>
<tr>
<td>max_vc2_type</td>
<td>String variable with maximal VARCHAR2 size.</td>
</tr>
<tr>
<td><code>array_index_type</code></td>
<td>Best fitting data type for array navigation.</td>
</tr>
<tr>
<td><code>id_type</code></td>
<td>Data type used for all primary key (table_name_id) columns.</td>
</tr>
</tbody>
</table>
<h5 id="example-bad_9">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">my_proc</span> <span class="k">is</span>
      <span class="n">l_note</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">1000</span> <span class="nb">char</span><span class="p">);</span>
   <span class="k">begin</span>
      <span class="n">l_note</span> <span class="p">:</span><span class="o">=</span> <span class="n">some_function</span><span class="p">();</span>
   <span class="k">end</span> <span class="n">my_proc</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_9">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">types</span> <span class="k">is</span>
   <span class="n">subtype</span> <span class="n">big_string_type</span> <span class="k">is</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">1000</span> <span class="nb">char</span><span class="p">);</span>
<span class="k">end</span> <span class="n">types</span><span class="p">;</span>
<span class="o">/</span>

<span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">my_proc</span> <span class="k">is</span>
      <span class="n">l_note</span> <span class="n">types</span><span class="p">.</span><span class="n">big_string_type</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="n">l_note</span> <span class="p">:</span><span class="o">=</span> <span class="n">some_function</span><span class="p">();</span>
   <span class="k">end</span> <span class="n">my_proc</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-2140-never-initialize-variables-with-null">G-2140: Never initialize variables with NULL.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability</p>
</div>
<h5 id="reason_10">Reason</h5>
<p>Variables are initialized to NULL by default.</p>
<h5 id="example-bad_10">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_note</span> <span class="n">big_string_type</span> <span class="p">:</span><span class="o">=</span> <span class="k">null</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">l_note</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_10">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_note</span> <span class="n">big_string_type</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">l_note</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-2150-avoid-comparisons-with-null-value-consider-using-is-not-null">G-2150: Avoid comparisons with NULL value, consider using IS [NOT] NULL.</h4>
<div class="admonition bug">
<p class="admonition-title">Blocker</p>
<p>Portability, Reliability</p>
</div>
<h5 id="reason_11">Reason</h5>
<p>The NULL value can cause confusion both from the standpoint of code review and code execution. You must always use the <code>IS NULL</code> or <code>IS NOT NULL</code> syntax when you need to check if a value is or is not <code>NULL</code>.</p>
<h5 id="example-bad_11">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_value</span> <span class="nb">integer</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">if</span> <span class="n">l_value</span> <span class="o">=</span> <span class="k">null</span> <span class="k">then</span>
      <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_11">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_value</span> <span class="nb">integer</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">if</span> <span class="n">l_value</span> <span class="k">is</span> <span class="k">null</span> <span class="k">then</span>
      <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-2160-avoid-initializing-variables-using-functions-in-the-declaration-section">G-2160: Avoid initializing variables using functions in the declaration section.</h4>
<div class="admonition danger">
<p class="admonition-title">Critical</p>
<p>Reliability</p>
</div>
<h5 id="reason_12">Reason</h5>
<p>If your initialization fails, you will not be able to handle the error in your exceptions block.</p>
<h5 id="example-bad_12">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">k_department_id</span> <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
   <span class="n">l_department_name</span> <span class="n">department</span><span class="p">.</span><span class="n">department_name</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> 
      <span class="n">department_api</span><span class="p">.</span><span class="n">name_by_id</span><span class="p">(</span><span class="n">in_id</span> <span class="o">=&gt;</span> <span class="n">k_department_id</span><span class="p">);</span>
<span class="k">begin</span>
   <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">l_department_name</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_12">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">k_department_id</span>  <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
   <span class="n">k_unkown_name</span>    <span class="n">constant</span> <span class="n">department</span><span class="p">.</span><span class="n">department_name</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;unknown&#39;</span><span class="p">;</span>
   <span class="n">l_department_name</span> <span class="n">department</span><span class="p">.</span><span class="n">department_name</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="o">&lt;&lt;</span><span class="n">init</span><span class="o">&gt;&gt;</span>
   <span class="k">begin</span>
      <span class="n">l_department_name</span> <span class="p">:</span><span class="o">=</span> <span class="n">department_api</span><span class="p">.</span><span class="n">name_by_id</span><span class="p">(</span><span class="n">in_id</span> <span class="o">=&gt;</span> <span class="n">k_department_id</span><span class="p">);</span>
   <span class="k">exception</span>
      <span class="k">when</span> <span class="n">value_error</span> <span class="k">then</span>
         <span class="n">l_department_name</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_unkown_name</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">init</span><span class="p">;</span>

   <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">l_department_name</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-2170-never-overload-variables">G-2170: Never overload variables.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Reliability</p>
</div>
<h5 id="reason_13">Reason</h5>
<p>The readability of your code will be higher when you do not overload variables.</p>
<h5 id="example-bad_13">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">begin</span> 
   <span class="o">&lt;&lt;</span><span class="n">main</span><span class="o">&gt;&gt;</span>
   <span class="k">declare</span>
      <span class="n">k_main</span> <span class="n">constant</span> <span class="n">user_objects</span><span class="p">.</span><span class="n">object_name</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;test_main&#39;</span><span class="p">;</span>
      <span class="n">k_sub</span> <span class="n">constant</span> <span class="n">user_objects</span><span class="p">.</span><span class="n">object_name</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;test_sub&#39;</span><span class="p">;</span>
      <span class="n">k_sep</span> <span class="n">constant</span> <span class="n">user_objects</span><span class="p">.</span><span class="n">object_name</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39; - &#39;</span><span class="p">;</span>
      <span class="n">l_variable</span> <span class="n">user_objects</span><span class="p">.</span><span class="n">object_name</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_main</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="o">&lt;&lt;</span><span class="n">sub</span><span class="o">&gt;&gt;</span>
      <span class="k">declare</span>
         <span class="n">l_variable</span> <span class="n">user_objects</span><span class="p">.</span><span class="n">object_name</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_sub</span><span class="p">;</span>
      <span class="k">begin</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">l_variable</span> <span class="o">||</span> <span class="n">k_sep</span> <span class="o">||</span> <span class="n">main</span><span class="p">.</span><span class="n">l_variable</span><span class="p">);</span>
      <span class="k">end</span> <span class="n">sub</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">main</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_13">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">begin</span> 
   <span class="o">&lt;&lt;</span><span class="n">main</span><span class="o">&gt;&gt;</span>
   <span class="k">declare</span>
      <span class="n">k_main</span> <span class="n">constant</span> <span class="n">user_objects</span><span class="p">.</span><span class="n">object_name</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;test_main&#39;</span><span class="p">;</span>
      <span class="n">k_sub</span> <span class="n">constant</span> <span class="n">user_objects</span><span class="p">.</span><span class="n">object_name</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;test_sub&#39;</span><span class="p">;</span>
      <span class="n">k_sep</span> <span class="n">constant</span> <span class="n">user_objects</span><span class="p">.</span><span class="n">object_name</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39; - &#39;</span><span class="p">;</span>
      <span class="n">l_main_variable</span> <span class="n">user_objects</span><span class="p">.</span><span class="n">object_name</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_main</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="o">&lt;&lt;</span><span class="n">sub</span><span class="o">&gt;&gt;</span>
      <span class="k">declare</span>
         <span class="n">l_sub_variable</span> <span class="n">user_objects</span><span class="p">.</span><span class="n">object_name</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_sub</span><span class="p">;</span>
      <span class="k">begin</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">l_sub_variable</span> <span class="o">||</span> <span class="n">k_sep</span> <span class="o">||</span> <span class="n">l_main_variable</span><span class="p">);</span>
      <span class="k">end</span> <span class="n">sub</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">main</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-2180-never-use-quoted-identifiers">G-2180: Never use quoted identifiers.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Maintainability</p>
</div>
<h5 id="reason_14">Reason</h5>
<p>Quoted identifiers make your code hard to read and maintain.</p>
<h5 id="example-bad_14">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="ss">&quot;sal+comm&quot;</span> <span class="nb">integer</span><span class="p">;</span>
   <span class="ss">&quot;my constant&quot;</span> <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="ss">&quot;my exception&quot;</span> <span class="k">exception</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="ss">&quot;sal+comm&quot;</span> <span class="p">:</span><span class="o">=</span> <span class="ss">&quot;my constant&quot;</span><span class="p">;</span>
<span class="k">exception</span>
   <span class="k">when</span> <span class="ss">&quot;my exception&quot;</span> <span class="k">then</span>
      <span class="k">null</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_14">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_sal_comm</span>     <span class="nb">integer</span><span class="p">;</span>
   <span class="n">k_my_constant</span> <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="n">e_my_exception</span> <span class="k">exception</span><span class="p">;</span>   
<span class="k">begin</span>
   <span class="n">l_sal_comm</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_my_constant</span><span class="p">;</span>
<span class="k">exception</span>
   <span class="k">when</span> <span class="n">e_my_exception</span> <span class="k">then</span>
      <span class="k">null</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-2185-avoid-using-overly-short-names-for-explicitly-or-implicitly-declared-identifiers">G-2185: Avoid using overly short names for explicitly or implicitly declared identifiers.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability</p>
</div>
<h5 id="reason_15">Reason</h5>
<p>You should ensure that the name you have chosen well defines its purpose and usage. While you can save a few keystrokes typing very short names, the resulting code is obscure and hard for anyone besides the author to understand.</p>
<h5 id="example-bad_15">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">i</span> <span class="nb">integer</span><span class="p">;</span>
   <span class="k">c</span> <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="n">e</span> <span class="k">exception</span><span class="p">;</span>   
<span class="k">begin</span>
   <span class="n">i</span> <span class="p">:</span><span class="o">=</span> <span class="k">c</span><span class="p">;</span>
<span class="k">exception</span>
   <span class="k">when</span> <span class="n">e</span> <span class="k">then</span>
      <span class="k">null</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_15">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_sal_comm</span>     <span class="nb">integer</span><span class="p">;</span>
   <span class="n">k_my_constant</span> <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="n">e_my_exception</span> <span class="k">exception</span><span class="p">;</span>   
<span class="k">begin</span>
   <span class="n">l_sal_comm</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_my_constant</span><span class="p">;</span>
<span class="k">exception</span>
   <span class="k">when</span> <span class="n">e_my_exception</span> <span class="k">then</span>
      <span class="k">null</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-2190-avoid-using-rowid-or-urowid">G-2190: Avoid using ROWID or UROWID.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Portability, Reliability</p>
</div>
<h5 id="reason_16">Reason</h5>
<p>Be careful about your use of Oracle-specific data types like <code>ROWID</code> and <code>UROWID</code>. They might offer a slight improvement in performance over other means of identifying a single row (primary key or unique index value), but that is by no means guaranteed. </p>
<p>Use of <code>ROWID</code> or <code>UROWID</code> means that your SQL statement will not be portable to other SQL databases. Many developers are also not familiar with these data types, which can make the code harder to maintain. </p>
<h5 id="example-bad_16">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_department_name</span> <span class="n">department</span><span class="p">.</span><span class="n">department_name</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="n">l_rowid</span> <span class="n">rowid</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">update</span> <span class="n">department</span> 
      <span class="k">set</span> <span class="n">department_name</span> <span class="o">=</span> <span class="n">l_department_name</span>
    <span class="k">where</span> <span class="n">rowid</span> <span class="o">=</span> <span class="n">l_rowid</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_16">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_department_name</span>  <span class="n">department</span><span class="p">.</span><span class="n">department_name</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="n">l_department_id</span>    <span class="n">department</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">update</span> <span class="n">department</span> 
      <span class="k">set</span> <span class="n">department_name</span> <span class="o">=</span> <span class="n">l_department_name</span>
    <span class="k">where</span> <span class="n">department_id</span> <span class="o">=</span> <span class="n">l_department_id</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="numeric-data-types">Numeric Data Types</h3>
<h4 id="g-2220-try-to-use-pls_integer-instead-of-number-for-arithmetic-operations-with-integer-values">G-2220: Try to use PLS_INTEGER instead of NUMBER for arithmetic operations with integer values.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Efficiency</p>
</div>
<h5 id="reason_17">Reason</h5>
<p><code>PLS_INTEGER</code> having a length of -2,147,483,648 to 2,147,483,647, on a 32bit system.</p>
<p>There are many reasons to use <code>PLS_INTEGER</code> instead of <code>NUMBER</code>:</p>
<ul>
<li><code>PLS_INTEGER</code> uses less memory</li>
<li><code>PLS_INTEGER</code> uses machine arithmetic, which is up to three times faster than library arithmetic, which is used by <code>NUMBER</code>.</li>
</ul>
<h5 id="example-bad_17">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">constants</span> <span class="k">is</span>
   <span class="n">k_big_increase</span> <span class="n">constant</span> <span class="nb">number</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

   <span class="k">function</span> <span class="n">big_increase</span> <span class="k">return</span> <span class="nb">number</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="k">return</span> <span class="n">k_big_increase</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">big_increase</span><span class="p">;</span>
<span class="k">end</span> <span class="n">constants</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_17">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">constants</span> <span class="k">is</span>
   <span class="n">k_big_increase</span> <span class="n">constant</span> <span class="n">pls_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

   <span class="k">function</span> <span class="n">big_increase</span> <span class="k">return</span> <span class="n">pls_integer</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="k">return</span> <span class="n">k_big_increase</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">big_increase</span><span class="p">;</span>
<span class="k">end</span> <span class="n">constants</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-2230-try-to-use-simple_integer-datatype-when-appropriate">G-2230: Try to use SIMPLE_INTEGER datatype when appropriate.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Efficiency</p>
</div>
<h5 id="restriction">Restriction</h5>
<p>ORACLE 11g or later</p>
<h5 id="reason_18">Reason</h5>
<p><code>SIMPLE_INTEGER</code> does no checks on numeric overflow, which results in better performance compared to the other numeric datatypes.</p>
<p>With ORACLE 11g, the new data type <code>SIMPLE_INTEGER</code> has been introduced. It is a sub-type of <code>PLS_INTEGER</code> and covers the same range. The basic difference is that <code>SIMPLE_INTEGER</code> is always <code>NOT NULL</code>.  When the value of the declared variable is never going to be null then you can declare it as <code>SIMPLE_INTEGER</code>. Another major difference is that you will never face a numeric overflow using <code>SIMPLE_INTEGER</code> as this data type wraps around without giving any error. <code>SIMPLE_INTEGER</code> data type gives major performance boost over <code>PLS_INTEGER</code> when code is compiled in <code>NATIVE</code> mode, because arithmetic operations on SIMPLE_INTEGER type are performed directly at the hardware level.</p>
<h5 id="example-bad_18">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">constants</span> <span class="k">is</span>
   <span class="n">co_big_increase</span> <span class="n">constant</span> <span class="nb">number</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

   <span class="k">function</span> <span class="n">big_increase</span> <span class="k">return</span> <span class="nb">number</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="k">return</span> <span class="n">co_big_increase</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">big_increase</span><span class="p">;</span>
<span class="k">end</span> <span class="n">constants</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_18">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">constants</span> <span class="k">is</span>
   <span class="n">co_big_increase</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

   <span class="k">function</span> <span class="n">big_increase</span> <span class="k">return</span> <span class="n">simple_integer</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="k">return</span> <span class="n">co_big_increase</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">big_increase</span><span class="p">;</span>
<span class="k">end</span> <span class="n">constants</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="character-data-types">Character Data Types</h3>
<h4 id="g-2310-avoid-using-char-data-type">G-2310: Avoid using CHAR data type.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Reliability</p>
</div>
<h5 id="reason_19">Reason</h5>
<p><code>CHAR</code> is a fixed length data type, which should only be used when appropriate. <code>CHAR</code> columns/variables are always filled to its specified lengths; this may lead to unwanted side effects and undesired results.</p>
<h5 id="example-bad_19">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">types</span> 
<span class="k">is</span>
   <span class="n">subtype</span> <span class="n">description_type</span> <span class="k">is</span> <span class="nb">char</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<span class="k">end</span> <span class="n">types</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_19">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">types</span> 
<span class="k">is</span>
   <span class="n">subtype</span> <span class="n">description_type</span> <span class="k">is</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">200</span> <span class="nb">char</span><span class="p">);</span>
<span class="k">end</span> <span class="n">types</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-2320-avoid-using-varchar-data-type">G-2320: Avoid using VARCHAR data type.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Portability</p>
</div>
<h5 id="reason_20">Reason</h5>
<p>Do not use the <code>VARCHAR</code> data type. Use the <code>VARCHAR2</code> data type instead. Although the <code>VARCHAR</code> data type is currently synonymous with <code>VARCHAR2</code>, the <code>VARCHAR</code> data type is scheduled to be redefined as a separate data type used for variable-length character strings compared with different comparison semantics.</p>
<h5 id="example-bad_20">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">types</span> <span class="k">is</span>
   <span class="n">subtype</span> <span class="n">description_type</span> <span class="k">is</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">200</span> <span class="nb">char</span><span class="p">);</span>
<span class="k">end</span> <span class="n">types</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_20">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">types</span> <span class="k">is</span>
   <span class="n">subtype</span> <span class="n">description_type</span> <span class="k">is</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">200</span> <span class="nb">char</span><span class="p">);</span>
<span class="k">end</span> <span class="n">types</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-2330-never-use-zero-length-strings-to-substitute-null">G-2330: Never use zero-length strings to substitute NULL.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Portability</p>
</div>
<h5 id="reason_21">Reason</h5>
<p>Today zero-length strings and <code>NULL</code> are currently handled identical by ORACLE. There is no guarantee that this will still be the case in future releases, therefore if you mean <code>NULL</code> use <code>NULL</code>.</p>
<h5 id="example-bad_21">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">constants</span> <span class="k">is</span>
   <span class="n">k_null_string</span> <span class="n">constant</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

   <span class="k">function</span> <span class="n">null_string</span> <span class="k">return</span> <span class="n">varchar2</span> <span class="k">is</span> 
   <span class="k">begin</span>
       <span class="k">return</span> <span class="n">k_null_string</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">null_string</span><span class="p">;</span>
<span class="k">end</span> <span class="n">constants</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_21">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">constants</span> <span class="k">is</span>

   <span class="k">function</span> <span class="n">empty_string</span> <span class="k">return</span> <span class="n">varchar2</span> <span class="k">is</span> 
   <span class="k">begin</span>
       <span class="k">return</span> <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">empty_string</span><span class="p">;</span>
<span class="k">end</span> <span class="n">constants</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-2340-always-define-your-varchar2-variables-using-char-semantic-if-not-defined-anchored">G-2340: Always define your VARCHAR2 variables using CHAR SEMANTIC (if not defined anchored).</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Reliability</p>
</div>
<h5 id="reason_22">Reason</h5>
<p>Changes to the <code>NLS_LENGTH_SEMANTIC</code> will only be picked up by your code after a recompilation.</p>
<p>In a multibyte environment a <code>VARCHAR2(10)</code> definition may not necessarily hold 10 characters, when multibyte characters a part of the value that should be stored unless the definition was done using the char semantic.</p>
<h5 id="example-bad_22">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">types</span> <span class="k">is</span>
   <span class="n">subtype</span> <span class="n">description_type</span> <span class="k">is</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<span class="k">end</span> <span class="n">types</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_22">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">types</span> <span class="k">is</span>
   <span class="n">subtype</span> <span class="n">description_type</span> <span class="k">is</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">200</span> <span class="nb">char</span><span class="p">);</span>
<span class="k">end</span> <span class="n">types</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="boolean-data-types">Boolean Data Types</h3>
<h4 id="g-2410-try-to-use-boolean-data-type-for-values-with-dual-meaning">G-2410: Try to use boolean data type for values with dual meaning.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability</p>
</div>
<h5 id="reason_23">Reason</h5>
<p>The use of TRUE and FALSE clarifies that this is a boolean value and makes the code easier to read.</p>
<h5 id="example-bad_23">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">k_newfile</span> <span class="n">constant</span> <span class="n">pls_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
   <span class="n">k_oldfile</span> <span class="n">constant</span> <span class="n">pls_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">500</span><span class="p">;</span>
   <span class="n">l_bigger</span>   <span class="n">pls_integer</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">if</span> <span class="n">k_newfile</span> <span class="o">&lt;</span> <span class="n">k_oldfile</span> <span class="k">then</span>
      <span class="n">l_bigger</span> <span class="p">:</span><span class="o">=</span> <span class="n">constants</span><span class="p">.</span><span class="n">k_numeric_true</span><span class="p">;</span>
   <span class="k">else</span>
      <span class="n">l_bigger</span> <span class="p">:</span><span class="o">=</span> <span class="n">constants</span><span class="p">.</span><span class="n">k_numeric_false</span><span class="p">;</span>
   <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-better">Example (better)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">k_newfile</span> <span class="n">constant</span> <span class="n">pls_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
   <span class="n">k_oldfile</span> <span class="n">constant</span> <span class="n">pls_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">500</span><span class="p">;</span>
   <span class="n">l_bigger</span>  <span class="nb">boolean</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">if</span> <span class="n">k_newfile</span> <span class="o">&lt;</span> <span class="n">k_oldfile</span> <span class="k">then</span>
      <span class="n">l_bigger</span> <span class="p">:</span><span class="o">=</span> <span class="k">true</span><span class="p">;</span>
   <span class="k">else</span>
      <span class="n">l_bigger</span> <span class="p">:</span><span class="o">=</span> <span class="k">false</span><span class="p">;</span>
   <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_23">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">k_newfile</span> <span class="n">constant</span> <span class="n">pls_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
   <span class="n">k_oldfile</span> <span class="n">constant</span> <span class="n">pls_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">500</span><span class="p">;</span>
   <span class="n">l_bigger</span>  <span class="nb">boolean</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">l_bigger</span> <span class="p">:</span><span class="o">=</span> <span class="n">nvl</span><span class="p">(</span><span class="n">k_newfile</span> <span class="o">&lt;</span> <span class="n">k_oldfile</span><span class="p">,</span><span class="k">false</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="large-objects">Large Objects</h3>
<h4 id="g-2510-avoid-using-the-long-and-long-raw-data-types">G-2510: Avoid using the LONG and LONG RAW data types.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Portability</p>
</div>
<h5 id="reason_24">Reason</h5>
<p><code>LONG</code> and <code>LONG RAW</code> data types have been deprecated by ORACLE since version 8i - support might be discontinued in future ORACLE releases.</p>
<p>There are many constraints to LONG datatypes in comparison to the LOB types.</p>
<h5 id="example-bad_24">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">example_package</span> <span class="k">is</span>
   <span class="n">g_long</span> <span class="n">long</span><span class="p">;</span>
   <span class="n">g_raw</span>  <span class="n">long</span> <span class="n">raw</span><span class="p">;</span>

   <span class="k">procedure</span> <span class="n">do_something</span><span class="p">;</span>
<span class="k">end</span> <span class="n">example_package</span><span class="p">;</span>
<span class="o">/</span>

<span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">example_package</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">do_something</span> <span class="k">is</span>
   <span class="k">begin</span> 
      <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">do_something</span><span class="p">;</span>
<span class="k">end</span> <span class="n">example_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_24">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">example_package</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">do_something</span><span class="p">;</span>
<span class="k">end</span> <span class="n">example_package</span><span class="p">;</span>
<span class="o">/</span>

<span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">example_package</span> <span class="k">is</span>
   <span class="n">g_long</span> <span class="k">clob</span><span class="p">;</span>
   <span class="n">g_raw</span>  <span class="nb">blob</span><span class="p">;</span>

   <span class="k">procedure</span> <span class="n">do_something</span> <span class="k">is</span>
   <span class="k">begin</span> 
      <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">do_something</span><span class="p">;</span>
<span class="k">end</span> <span class="n">example_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h2 id="dml-sql">DML &amp; SQL</h2>
<h3 id="general_2">General</h3>
<h4 id="g-3110-always-specify-the-target-columns-when-coding-an-insert-statement">G-3110: Always specify the target columns when coding an insert statement.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Maintainability, Reliability</p>
</div>
<h5 id="reason_25">Reason</h5>
<p>Data structures often change. Having the target columns in your insert statements will lead to change-resistant code.</p>
<h5 id="example-bad_25">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">insert</span> <span class="k">into</span> <span class="n">department</span>
     <span class="k">values</span> <span class="p">(</span><span class="n">department_seq</span><span class="p">.</span><span class="n">nextval</span>
            <span class="p">,</span><span class="s1">&#39;support&#39;</span>
            <span class="p">,</span><span class="mi">100</span>
            <span class="p">,</span><span class="mi">10</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_25">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">insert</span> <span class="k">into</span> <span class="n">department</span> <span class="p">(</span><span class="n">department_id</span> 
                        <span class="p">,</span><span class="n">department_name</span>
                        <span class="p">,</span><span class="n">manager_id</span>
                        <span class="p">,</span><span class="n">location_id</span><span class="p">)</span>
     <span class="k">values</span> <span class="p">(</span><span class="k">null</span>
            <span class="p">,</span><span class="s1">&#39;support&#39;</span>
            <span class="p">,</span><span class="mi">100</span>
            <span class="p">,</span><span class="mi">10</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<p>Note: The above good example assumes the use of an identity column for department_id.</p>
<h4 id="g-3120-always-use-table-aliases-when-your-sql-statement-involves-more-than-one-source">G-3120: Always use table aliases when your SQL statement involves more than one source.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Maintainability</p>
</div>
<h5 id="reason_26">Reason</h5>
<p>It is more human readable to use aliases instead of writing columns with no table information.</p>
<p>Especially when using subqueries the omission of table aliases may end in unexpected behavior and result.</p>
<p>Also, note that even if you have a single table statement, it will almost always at some point in the future end up getting joined to another table, so you get bonus points if you use table aliases all the time.</p>
<h5 id="example-bad_26">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span> <span class="n">last_name</span>
      <span class="p">,</span><span class="n">first_name</span>
      <span class="p">,</span><span class="n">department_name</span>
  <span class="k">from</span>      <span class="n">employee</span>  
       <span class="k">join</span> <span class="n">department</span> <span class="k">using</span> <span class="p">(</span><span class="n">department_id</span><span class="p">)</span>
 <span class="k">where</span> <span class="k">extract</span><span class="p">(</span><span class="k">month</span> <span class="k">from</span> <span class="n">hire_date</span><span class="p">)</span> <span class="o">=</span> <span class="k">extract</span><span class="p">(</span><span class="k">month</span> <span class="k">from</span> <span class="n">sysdate</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<h5 id="example-better_1">Example (better)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span> <span class="n">e</span><span class="p">.</span><span class="n">last_name</span>
      <span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">first_name</span>
      <span class="p">,</span><span class="n">d</span><span class="p">.</span><span class="n">department_name</span>
  <span class="k">from</span>      <span class="n">employee</span>   <span class="n">e</span>
       <span class="k">join</span> <span class="n">department</span> <span class="n">d</span> <span class="k">using</span> <span class="p">(</span><span class="n">department_id</span><span class="p">)</span>
 <span class="k">where</span> <span class="k">extract</span><span class="p">(</span><span class="k">month</span> <span class="k">from</span> <span class="n">e</span><span class="p">.</span><span class="n">hire_date</span><span class="p">)</span> <span class="o">=</span> <span class="k">extract</span><span class="p">(</span><span class="k">month</span> <span class="k">from</span> <span class="n">sysdate</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_26">Example (good)</h5>
<p>Using meaningful aliases improves the readability of your code.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span> <span class="n">emp</span><span class="p">.</span><span class="n">last_name</span>
      <span class="p">,</span><span class="n">emp</span><span class="p">.</span><span class="n">first_name</span>
      <span class="p">,</span><span class="n">dept</span><span class="p">.</span><span class="n">department_name</span>
  <span class="k">from</span>      <span class="n">employee</span>   <span class="n">emp</span>
       <span class="k">join</span> <span class="n">department</span> <span class="n">dept</span> <span class="k">using</span> <span class="p">(</span><span class="n">department_id</span><span class="p">)</span>
 <span class="k">where</span> <span class="k">extract</span><span class="p">(</span><span class="k">month</span> <span class="k">from</span> <span class="n">emp</span><span class="p">.</span><span class="n">hire_date</span><span class="p">)</span> <span class="o">=</span> <span class="k">extract</span><span class="p">(</span><span class="k">month</span> <span class="k">from</span> <span class="n">sysdate</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<h5 id="example-subquery-bad">Example Subquery (bad)</h5>
<p>If the <code>job</code> table has no <code>employee_id</code> column and <code>employee</code> has one this query will not raise an error but return all rows of the <code>employee</code> table as a subquery is allowed to access columns of all its parent tables - this construct is known as correlated subquery.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span> <span class="n">last_name</span>
      <span class="p">,</span><span class="n">first_name</span>
  <span class="k">from</span> <span class="n">employee</span>
 <span class="k">where</span> <span class="n">employee_id</span> <span class="k">in</span> <span class="p">(</span><span class="k">select</span> <span class="n">employee_id</span>
                         <span class="k">from</span> <span class="n">job</span>
                        <span class="k">where</span> <span class="n">job_title</span> <span class="k">like</span> <span class="s1">&#39;%manager%&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<h5 id="example-subquery-good">Example Subquery (good)</h5>
<p>If the <code>job</code> table has no <code>employee_id</code> column this query will return an error due to the directive (given by adding the table alias to the column) to read the <code>employee_id</code> column from the <code>job</code> table.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span> <span class="n">emp</span><span class="p">.</span><span class="n">last_name</span>
      <span class="p">,</span><span class="n">emp</span><span class="p">.</span><span class="n">first_name</span>
  <span class="k">from</span> <span class="n">employee</span> <span class="n">emp</span>
 <span class="k">where</span> <span class="n">emp</span><span class="p">.</span><span class="n">employee_id</span> <span class="k">in</span> <span class="p">(</span><span class="k">select</span> <span class="n">j</span><span class="p">.</span><span class="n">employee_id</span>
                             <span class="k">from</span> <span class="n">job</span> <span class="n">j</span>
                            <span class="k">where</span> <span class="n">j</span><span class="p">.</span><span class="n">job_title</span> <span class="k">like</span> <span class="s1">&#39;%manager%&#39;</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<h4 id="g-3130-try-to-use-ansi-sql-92-join-syntax">G-3130: Try to use ANSI SQL-92 join syntax.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability, Portability</p>
</div>
<h5 id="reason_27">Reason</h5>
<p>ANSI SQL-92 join syntax supports the full outer join. A further advantage of the ANSI SQL-92 join syntax is the separation of the join condition from the query filters.</p>
<h5 id="example-bad_27">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span> <span class="n">e</span><span class="p">.</span><span class="n">employee_id</span>
      <span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span>
      <span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">first_name</span>
      <span class="p">,</span><span class="n">d</span><span class="p">.</span><span class="n">department_name</span>
  <span class="k">from</span> <span class="n">employees</span> <span class="n">e</span>
      <span class="p">,</span><span class="n">departments</span> <span class="n">d</span> 
 <span class="k">where</span> <span class="n">e</span><span class="p">.</span><span class="n">department_id</span> <span class="o">=</span> <span class="n">d</span><span class="p">.</span><span class="n">department_id</span>
   <span class="k">and</span> <span class="k">extract</span><span class="p">(</span><span class="k">month</span> <span class="k">from</span> <span class="n">e</span><span class="p">.</span><span class="n">hire_date</span><span class="p">)</span> <span class="o">=</span> <span class="k">extract</span><span class="p">(</span><span class="k">month</span> <span class="k">from</span> <span class="n">sysdate</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_27">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span> <span class="n">emp</span><span class="p">.</span><span class="n">employee_id</span>
      <span class="p">,</span><span class="n">emp</span><span class="p">.</span><span class="n">last_name</span>
      <span class="p">,</span><span class="n">emp</span><span class="p">.</span><span class="n">first_name</span>
      <span class="p">,</span><span class="n">dept</span><span class="p">.</span><span class="n">department_name</span>
  <span class="k">from</span>      <span class="n">employees</span>   <span class="n">emp</span>
       <span class="k">join</span> <span class="n">departments</span> <span class="n">dept</span> <span class="k">using</span> <span class="p">(</span><span class="n">department_id</span><span class="p">)</span>
 <span class="k">where</span> <span class="k">extract</span><span class="p">(</span><span class="k">month</span> <span class="k">from</span> <span class="n">emp</span><span class="p">.</span><span class="n">hire_date</span><span class="p">)</span> <span class="o">=</span> <span class="k">extract</span><span class="p">(</span><span class="k">month</span> <span class="k">from</span> <span class="n">sysdate</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<h4 id="g-3140-try-to-use-anchored-records-as-targets-for-your-cursors">G-3140: Try to use anchored records as targets for your cursors.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Maintainability, Reliability</p>
</div>
<h5 id="reason_28">Reason</h5>
<p>Using cursor-anchored records as targets for your cursors results enables the possibility of changing the structure of the cursor without regard to the target structure.</p>
<h5 id="example-bad_28">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="k">cursor</span> <span class="n">c_employee</span> <span class="k">is</span>
      <span class="k">select</span> <span class="n">employee_id</span><span class="p">,</span> <span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span>
        <span class="k">from</span> <span class="n">employee</span><span class="p">;</span>
   <span class="n">l_employee_id</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="n">l_first_name</span>  <span class="n">employee</span><span class="p">.</span><span class="n">first_name</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="n">l_last_name</span>   <span class="n">employee</span><span class="p">.</span><span class="n">last_name</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">open</span> <span class="n">c_employee</span><span class="p">;</span>
   <span class="k">fetch</span> <span class="n">c_employee</span> <span class="k">into</span> <span class="n">l_employee_id</span><span class="p">,</span> <span class="n">l_first_name</span><span class="p">,</span> <span class="n">l_last_name</span><span class="p">;</span>
   <span class="o">&lt;&lt;</span><span class="n">process_employee</span><span class="o">&gt;&gt;</span>
   <span class="n">while</span> <span class="n">c_employee</span><span class="o">%</span><span class="k">found</span>
   <span class="n">loop</span>
      <span class="c1">-- do something with the data</span>
      <span class="k">fetch</span> <span class="n">c_employee</span> <span class="k">into</span> <span class="n">l_employee_id</span><span class="p">,</span> <span class="n">l_first_name</span><span class="p">,</span> <span class="n">l_last_name</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">process_employee</span><span class="p">;</span>
   <span class="k">close</span> <span class="n">c_employee</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_28">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="k">cursor</span> <span class="n">c_employee</span> <span class="k">is</span>
      <span class="k">select</span> <span class="n">employee_id</span><span class="p">,</span> <span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span>
        <span class="k">from</span> <span class="n">employee</span><span class="p">;</span>
   <span class="n">r_employee</span> <span class="n">c_employee</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">open</span> <span class="n">c_employee</span><span class="p">;</span>
   <span class="k">fetch</span> <span class="n">c_employee</span> <span class="k">into</span> <span class="n">r_employee</span><span class="p">;</span>
   <span class="o">&lt;&lt;</span><span class="n">process_employee</span><span class="o">&gt;&gt;</span>
   <span class="n">while</span> <span class="n">c_employee</span><span class="o">%</span><span class="k">found</span>
   <span class="n">loop</span>
      <span class="c1">-- do something with the data</span>
      <span class="k">fetch</span> <span class="n">c_employee</span> <span class="k">into</span> <span class="n">r_employee</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">process_employee</span><span class="p">;</span>
   <span class="k">close</span> <span class="n">c_employee</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-3150-try-to-use-identity-columns-for-surrogate-keys">G-3150: Try to use identity columns for surrogate keys.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability, Reliability</p>
</div>
<h5 id="restriction_1">Restriction</h5>
<p>ORACLE 12c or higher</p>
<h5 id="reason_29">Reason</h5>
<p>An identity column is a surrogate key by design – there is no reason why we should not take advantage of this natural implementation when the keys are generated on database level. Using identity column (and therefore assigning sequences as default values on columns) has a huge performance advantage over a trigger solution.</p>
<h5 id="example-bad_29">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">table</span> <span class="k">location</span> <span class="p">(</span>
   <span class="n">location_id</span>        <span class="nb">number</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>        <span class="k">not</span> <span class="k">null</span> 
  <span class="p">,</span><span class="n">location_name</span>      <span class="n">varchar2</span><span class="p">(</span><span class="mi">60</span> <span class="nb">char</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span>
  <span class="p">,</span><span class="n">city</span>               <span class="n">varchar2</span><span class="p">(</span><span class="mi">30</span> <span class="nb">char</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span>
  <span class="p">,</span><span class="k">constraint</span> <span class="n">location_pk</span> <span class="k">primary</span> <span class="k">key</span> <span class="p">(</span><span class="n">location_id</span><span class="p">)</span>
  <span class="p">)</span>
<span class="o">/</span>

<span class="k">create</span> <span class="n">sequence</span> <span class="n">location_seq</span> <span class="k">start</span> <span class="k">with</span> <span class="mi">1</span> <span class="k">cache</span> <span class="mi">20</span>
<span class="o">/</span>

<span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="k">trigger</span> <span class="n">location_bri</span> 
   <span class="k">before</span> <span class="k">insert</span> <span class="k">on</span> <span class="k">location</span> 
   <span class="k">for</span> <span class="k">each</span> <span class="k">row</span> 
<span class="k">begin</span>
   <span class="p">:</span><span class="k">new</span><span class="p">.</span><span class="n">location_id</span> <span class="p">:</span><span class="o">=</span> <span class="n">location_seq</span><span class="p">.</span><span class="n">nextval</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_29">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">table</span> <span class="k">location</span> <span class="p">(</span>
   <span class="n">location_id</span>        <span class="nb">number</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>  <span class="k">generated</span> <span class="k">by</span> <span class="k">default</span> <span class="k">on</span> <span class="k">null</span> <span class="k">as</span> <span class="k">identity</span> 
  <span class="p">,</span><span class="n">location_name</span>      <span class="n">varchar2</span><span class="p">(</span><span class="mi">60</span> <span class="nb">char</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span>
  <span class="p">,</span><span class="n">city</span>               <span class="n">varchar2</span><span class="p">(</span><span class="mi">30</span> <span class="nb">char</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span>
  <span class="p">,</span><span class="k">constraint</span> <span class="n">location_pk</span> <span class="k">primary</span> <span class="k">key</span> <span class="p">(</span><span class="n">location_id</span><span class="p">))</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-3160-avoid-visible-virtual-columns">G-3160: Avoid visible virtual columns.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Maintainability, Reliability</p>
</div>
<h5 id="restriction_2">Restriction</h5>
<p>ORACLE 12c</p>
<h5 id="reason_30">Reason</h5>
<p>In contrast to visible columns, invisible columns are not part of a record defined using <code>%rowtype</code> construct. This is helpful as a virtual column may not be programmatically populated. If your virtual column is visible you have to manually define the record types used in API packages to be able to exclude them from being part of the record definition.</p>
<p>Invisible columns may be accessed by explicitly adding them to the column list in a SELECT statement.</p>
<h5 id="example-bad_30">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">alter</span> <span class="k">table</span> <span class="n">employee</span>
   <span class="k">add</span> <span class="n">total_salary</span> <span class="k">generated</span> <span class="n">always</span> <span class="k">as</span> <span class="p">(</span><span class="n">salary</span> <span class="o">+</span> <span class="n">nvl</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">salary</span><span class="p">)</span>
<span class="o">/</span>

<span class="k">declare</span>
   <span class="n">r_employee</span> <span class="n">employee</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>
   <span class="n">l_id</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="mi">107</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">r_employee</span> <span class="p">:</span><span class="o">=</span> <span class="n">employee_api</span><span class="p">.</span><span class="n">employee_by_id</span><span class="p">(</span><span class="n">l_id</span><span class="p">);</span>
   <span class="n">r_employee</span><span class="p">.</span><span class="n">salary</span> <span class="p">:</span><span class="o">=</span> <span class="n">r_employee</span><span class="p">.</span><span class="n">salary</span> <span class="o">*</span> <span class="n">constants</span><span class="p">.</span><span class="n">small_increase</span><span class="p">();</span>

   <span class="k">update</span> <span class="n">employee</span>
      <span class="k">set</span> <span class="k">row</span> <span class="o">=</span> <span class="n">r_employee</span>
    <span class="k">where</span> <span class="n">employee_id</span> <span class="o">=</span> <span class="n">l_id</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>

<span class="n">Error</span> <span class="n">report</span> <span class="o">-</span>
<span class="n">ORA</span><span class="o">-</span><span class="mi">54017</span><span class="p">:</span> <span class="k">UPDATE</span> <span class="k">operation</span> <span class="n">disallowed</span> <span class="k">ON</span> <span class="n">virtual</span> <span class="n">COLUMNS</span>
<span class="n">ORA</span><span class="o">-</span><span class="mi">06512</span><span class="p">:</span> <span class="k">at</span> <span class="n">line</span> <span class="mi">9</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_30">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">alter</span> <span class="k">table</span> <span class="n">employee</span>
   <span class="k">add</span> <span class="n">total_salary</span> <span class="n">invisible</span> <span class="k">generated</span> <span class="n">always</span> <span class="k">as</span> 
      <span class="p">(</span><span class="n">salary</span> <span class="o">+</span> <span class="n">nvl</span><span class="p">(</span><span class="n">commission_pct</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">salary</span><span class="p">)</span>
<span class="o">/</span>

<span class="k">declare</span>
   <span class="n">r_employee</span> <span class="n">employee</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>
   <span class="n">k_id</span> <span class="n">constant</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="mi">107</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">r_employee</span> <span class="p">:</span><span class="o">=</span> <span class="n">employee_api</span><span class="p">.</span><span class="n">employee_by_id</span><span class="p">(</span><span class="n">k_id</span><span class="p">);</span>
   <span class="n">r_employee</span><span class="p">.</span><span class="n">salary</span> <span class="p">:</span><span class="o">=</span> <span class="n">r_employee</span><span class="p">.</span><span class="n">salary</span> <span class="o">*</span> <span class="n">constants</span><span class="p">.</span><span class="n">small_increase</span><span class="p">();</span>

   <span class="k">update</span> <span class="n">employee</span>
      <span class="k">set</span> <span class="k">row</span> <span class="o">=</span> <span class="n">r_employee</span>
    <span class="k">where</span> <span class="n">employee_id</span> <span class="o">=</span> <span class="n">k_id</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-3170-always-use-default-on-null-declarations-to-assign-default-values-to-table-columns-if-you-refuse-to-store-null-values">G-3170: Always use DEFAULT ON NULL declarations to assign default values to table columns if you refuse to store NULL values.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Reliability</p>
</div>
<h5 id="restriction_3">Restriction</h5>
<p>ORACLE 12c</p>
<h5 id="reason_31">Reason</h5>
<p>Default values have been nullifiable until ORACLE 12c. Meaning any tool sending null as a value for a column having a default value bypassed the default value. Starting with ORACLE 12c default definitions may have an <code>ON NULL</code> definition in addition, which will assign the default value in case of a null value too.</p>
<h5 id="example-bad_31">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">table</span> <span class="n">null_test</span> <span class="p">(</span>
   <span class="n">test_case</span>        <span class="nb">number</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span>
  <span class="p">,</span><span class="n">column_defaulted</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">default</span> <span class="s1">&#39;Default&#39;</span><span class="p">)</span>
<span class="o">/</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">null_test</span><span class="p">(</span><span class="n">test_case</span><span class="p">,</span> <span class="n">column_defaulted</span><span class="p">)</span> <span class="k">values</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">null_test</span><span class="p">(</span><span class="n">test_case</span><span class="p">,</span> <span class="n">column_defaulted</span><span class="p">)</span> <span class="k">values</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="k">default</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">null_test</span><span class="p">(</span><span class="n">test_case</span><span class="p">,</span> <span class="n">column_defaulted</span><span class="p">)</span> <span class="k">values</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="k">null</span><span class="p">);</span>

<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">null_test</span><span class="p">;</span>

<span class="n">TEST_CASE</span>  <span class="n">COLUMN_DEF</span>
<span class="c1">---------  -----------</span>
        <span class="mi">1</span>  <span class="n">Value</span>
        <span class="mi">2</span>  <span class="k">Default</span>
        <span class="mi">3</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_31">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">table</span> <span class="n">null_test</span> <span class="p">(</span>
   <span class="n">test_case</span>        <span class="nb">number</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">not</span> <span class="k">null</span>
  <span class="p">,</span><span class="n">column_defaulted</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">10</span> <span class="nb">char</span><span class="p">)</span> <span class="k">default</span> <span class="k">on</span> <span class="k">null</span> <span class="s1">&#39;Default&#39;</span><span class="p">)</span>
<span class="o">/</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">null_test</span><span class="p">(</span><span class="n">test_case</span><span class="p">,</span> <span class="n">column_defaulted</span><span class="p">)</span> <span class="k">values</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">null_test</span><span class="p">(</span><span class="n">test_case</span><span class="p">,</span> <span class="n">column_defaulted</span><span class="p">)</span> <span class="k">values</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="k">default</span><span class="p">);</span>
<span class="k">insert</span> <span class="k">into</span> <span class="n">null_test</span><span class="p">(</span><span class="n">test_case</span><span class="p">,</span> <span class="n">column_defaulted</span><span class="p">)</span> <span class="k">values</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="k">null</span><span class="p">);</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">null_test</span><span class="p">;</span>

 <span class="n">TEST_CASE</span> <span class="n">COLUMN_DEF</span>
<span class="c1">---------- ----------</span>
         <span class="mi">1</span> <span class="n">Value</span>     
         <span class="mi">2</span> <span class="k">Default</span>   
         <span class="mi">3</span> <span class="k">Default</span>
</pre></div>
</td></tr></table>

<h4 id="g-3180-always-specify-column-names-instead-of-positional-references-in-order-by-clauses">G-3180: Always specify column names instead of positional references in ORDER BY clauses.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Changeability, Reliability</p>
</div>
<h5 id="reason_32">Reason</h5>
<p>If you change your select list afterwards the ORDER BY will still work but order your rows differently, when not changing the positional number. Furthermore, it is not comfortable to the readers of the code, if they have to count the columns in the SELECT list to know the way the result is ordered.</p>
<h5 id="example-bad_32">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span> <span class="k">upper</span><span class="p">(</span><span class="n">first_name</span><span class="p">)</span> 
      <span class="p">,</span><span class="n">last_name</span> 
      <span class="p">,</span><span class="n">salary</span> 
      <span class="p">,</span><span class="n">hire_date</span> 
  <span class="k">from</span> <span class="n">employee</span>
 <span class="k">order</span> <span class="k">by</span> <span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">;</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_32">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span> <span class="k">upper</span><span class="p">(</span><span class="n">first_name</span><span class="p">)</span> <span class="k">as</span> <span class="n">first_name</span>  
      <span class="p">,</span><span class="n">last_name</span> 
      <span class="p">,</span><span class="n">salary</span> 
      <span class="p">,</span><span class="n">hire_date</span>
  <span class="k">from</span> <span class="n">employee</span>
 <span class="k">order</span> <span class="k">by</span> <span class="n">hire_date</span> 
         <span class="p">,</span><span class="n">first_name</span> 
         <span class="p">,</span><span class="n">salary</span><span class="p">;</span>
</pre></div>
</td></tr></table>

<h4 id="g-3190-avoid-using-natural-join">G-3190: Avoid using NATURAL JOIN.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Changeability, Reliability</p>
</div>
<h5 id="reason_33">Reason</h5>
<p>A natural join joins tables on equally named columns. This may comfortably fit on first sight, but adding logging columns to a table (updated_by, updated) will result in inappropriate join conditions. </p>
<h5 id="example-bad_33">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span> <span class="n">department_name</span> 
      <span class="p">,</span><span class="n">last_name</span> 
      <span class="p">,</span><span class="n">first_name</span> 
  <span class="k">from</span> <span class="n">employee</span> <span class="k">natural</span> <span class="k">join</span> <span class="n">department</span>
 <span class="k">order</span> <span class="k">by</span> <span class="n">department_name</span> 
         <span class="p">,</span><span class="n">last_name</span><span class="p">;</span>
<span class="n">DEPARTMENT_NAME</span>                <span class="n">LAST_NAME</span>                 <span class="n">FIRST_NAME</span>         
<span class="c1">------------------------------ ------------------------- --------------------</span>
<span class="n">Accounting</span>                     <span class="n">Gietz</span>                     <span class="n">William</span>             
<span class="n">Executive</span>                      <span class="n">De</span> <span class="n">Haan</span>                   <span class="n">Lex</span>                 
<span class="err">…</span>

<span class="k">alter</span> <span class="k">table</span> <span class="n">department</span> <span class="k">add</span> <span class="n">updated</span> <span class="nb">date</span> <span class="k">default</span> <span class="k">on</span> <span class="k">null</span> <span class="n">sysdate</span><span class="p">;</span>
<span class="k">alter</span> <span class="k">table</span> <span class="n">employee</span> <span class="k">add</span> <span class="n">updated</span> <span class="nb">date</span> <span class="k">default</span> <span class="k">on</span> <span class="k">null</span> <span class="n">sysdate</span><span class="p">;</span>

<span class="k">select</span> <span class="n">department_name</span> 
      <span class="p">,</span><span class="n">last_name</span> 
      <span class="p">,</span><span class="n">first_name</span> 
  <span class="k">from</span> <span class="n">employee</span> <span class="k">natural</span> <span class="k">join</span> <span class="n">department</span>
 <span class="k">order</span> <span class="k">by</span> <span class="n">department_name</span> 
         <span class="p">,</span><span class="n">last_name</span><span class="p">;</span>

<span class="k">No</span> <span class="k">data</span> <span class="k">found</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_33">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span> <span class="n">d</span><span class="p">.</span><span class="n">department_name</span> 
      <span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span> 
      <span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">first_name</span> 
  <span class="k">from</span> <span class="n">employee</span>   <span class="n">e</span>
  <span class="k">join</span> <span class="n">department</span> <span class="n">d</span> <span class="k">using</span> <span class="p">(</span><span class="n">department_id</span><span class="p">)</span>
 <span class="k">order</span> <span class="k">by</span> <span class="n">d</span><span class="p">.</span><span class="n">department_name</span> 
         <span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span><span class="p">;</span>

<span class="n">DEPARTMENT_NAME</span>                <span class="n">LAST_NAME</span>                 <span class="n">FIRST_NAME</span>         
<span class="c1">------------------------------ ------------------------- --------------------</span>
<span class="n">Accounting</span>                     <span class="n">Gietz</span>                     <span class="n">William</span>             
<span class="n">Executive</span>                      <span class="n">De</span> <span class="n">Haan</span>                   <span class="n">Lex</span>                 
<span class="err">…</span>
</pre></div>
</td></tr></table>

<h4 id="g-3200-never-use-an-on-clause-when-using-will-work">G-3200: Never use an ON clause when USING will work.</h4>
<div class="admonition warning">
<p class="admonition-title">Minor</p>
<p>Maintainability</p>
</div>
<h5 id="reason_34">Reason</h5>
<p>An <code>on</code> clause requires more code than a <code>using</code> clause and presents a greater possibility for making errors. The <code>using</code> clause is easier to read and maintain.</p>
<p>Note that the <code>using</code> clause prevents the use of a table alias for the join column in any of the other clauses of the sql statement. </p>
<h5 id="example-bad_34">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span> <span class="n">e</span><span class="p">.</span><span class="n">deparment_id</span>
      <span class="p">,</span><span class="n">d</span><span class="p">.</span><span class="n">department_name</span> 
      <span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span> 
      <span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">first_name</span> 
  <span class="k">from</span> <span class="n">employee</span> <span class="n">e</span> <span class="k">join</span> <span class="n">department</span> <span class="n">d</span> <span class="k">on</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">department_id</span> <span class="o">=</span> <span class="n">d</span><span class="p">.</span><span class="n">department_id</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_34">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span>   <span class="n">department_id</span>
       <span class="n">d</span><span class="p">.</span><span class="n">department_name</span> 
      <span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">last_name</span> 
      <span class="p">,</span><span class="n">e</span><span class="p">.</span><span class="n">first_name</span> 
  <span class="k">from</span> <span class="n">employee</span> <span class="n">e</span> <span class="k">join</span> <span class="n">department</span> <span class="n">d</span> <span class="k">using</span> <span class="p">(</span><span class="n">department_id</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<h3 id="bulk-operations">Bulk Operations</h3>
<h4 id="g-3210-always-use-bulk-operations-bulk-collect-forall-whenever-you-have-to-execute-a-dml-statement-for-more-than-4-times">G-3210: Always use BULK OPERATIONS (BULK COLLECT, FORALL) whenever you have to execute a DML statement for more than 4 times.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Efficiency</p>
</div>
<h5 id="reason_35">Reason</h5>
<p>Context switches between PL/SQL and SQL are extremely costly. BULK Operations reduce the number of switches by passing an array to the SQL engine, which is used to execute the given statements repeatedly.</p>
<p>(Depending on the PLSQL_OPTIMIZE_LEVEL parameter a conversion to BULK COLLECT will be done by the PL/SQL compiler automatically.)</p>
<h5 id="example-bad_35">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">t_employee_ids</span> <span class="n">employee_api</span><span class="p">.</span><span class="n">t_employee_ids_type</span><span class="p">;</span>
   <span class="n">k_increase</span> <span class="n">constant</span> <span class="n">employee</span><span class="p">.</span><span class="n">salary</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">;</span>
   <span class="n">k_department_id</span> <span class="n">constant</span> <span class="n">departments</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">t_employee_ids</span> <span class="p">:</span><span class="o">=</span> <span class="n">employee_api</span><span class="p">.</span><span class="n">employee_ids_by_department</span><span class="p">(</span>
                        <span class="n">id_in</span> <span class="o">=&gt;</span> <span class="n">k_department_id</span>
                     <span class="p">);</span>
   <span class="o">&lt;&lt;</span><span class="n">process_employees</span><span class="o">&gt;&gt;</span>
   <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="p">..</span><span class="n">t_employee_ids</span><span class="p">.</span><span class="k">count</span><span class="p">()</span>
   <span class="n">loop</span>
      <span class="k">update</span> <span class="n">employee</span>
         <span class="k">set</span> <span class="n">salary</span> <span class="o">=</span> <span class="n">salary</span> <span class="o">+</span> <span class="p">(</span><span class="n">salary</span> <span class="o">*</span> <span class="n">k_increase</span><span class="p">)</span>
       <span class="k">where</span> <span class="n">employee_id</span> <span class="o">=</span> <span class="n">t_employee_ids</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">process_employees</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_35">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">t_employee_ids</span>  <span class="n">employee_api</span><span class="p">.</span><span class="n">t_employee_ids_type</span><span class="p">;</span>
   <span class="n">k_increase</span>      <span class="n">constant</span> <span class="n">employee</span><span class="p">.</span><span class="n">salary</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">;</span>
   <span class="n">k_department_id</span> <span class="n">constant</span> <span class="n">departments</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">t_employee_ids</span> <span class="p">:</span><span class="o">=</span> <span class="n">employee_api</span><span class="p">.</span><span class="n">employee_ids_by_department</span><span class="p">(</span>
                        <span class="n">id_in</span> <span class="o">=&gt;</span> <span class="n">k_department_id</span>
                     <span class="p">);</span>
   <span class="o">&lt;&lt;</span><span class="n">process_employees</span><span class="o">&gt;&gt;</span>
   <span class="n">forall</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="p">..</span><span class="n">t_employee_ids</span><span class="p">.</span><span class="k">count</span><span class="p">()</span>
      <span class="k">update</span> <span class="n">employee</span>
         <span class="k">set</span> <span class="n">salary</span> <span class="o">=</span> <span class="n">salary</span> <span class="o">+</span> <span class="p">(</span><span class="n">salary</span> <span class="o">*</span> <span class="n">k_increase</span><span class="p">)</span>
       <span class="k">where</span> <span class="n">employee_id</span> <span class="o">=</span> <span class="n">t_employee_ids</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h2 id="control-structures">Control Structures</h2>
<h3 id="cursor">CURSOR</h3>
<h4 id="g-4110-always-use-notfound-instead-of-not-found-to-check-whether-a-cursor-returned-data">G-4110: Always use %NOTFOUND instead of NOT %FOUND to check whether a cursor returned data.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability</p>
</div>
<h5 id="reason_36">Reason</h5>
<p>The readability of your code will be higher when you avoid negative sentences.</p>
<h5 id="example-bad_36">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="k">cursor</span> <span class="n">c_employee</span> <span class="k">is</span> 
      <span class="k">select</span> <span class="n">last_name</span>
            <span class="p">,</span><span class="n">first_name</span>
        <span class="k">from</span> <span class="n">employee</span>
       <span class="k">where</span> <span class="n">commission_pct</span> <span class="k">is</span> <span class="k">not</span> <span class="k">null</span><span class="p">;</span>

   <span class="n">r_employee</span>  <span class="n">c_employee</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">open</span> <span class="n">c_employee</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">read_employees</span><span class="o">&gt;&gt;</span>
   <span class="n">loop</span>
      <span class="k">fetch</span> <span class="n">c_employee</span> <span class="k">into</span> <span class="n">r_employee</span><span class="p">;</span>
      <span class="n">exit</span> <span class="n">read_employees</span> <span class="k">when</span> <span class="k">not</span> <span class="n">c_employee</span><span class="o">%</span><span class="k">found</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">read_employees</span><span class="p">;</span>

   <span class="k">close</span> <span class="n">c_employee</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_36">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="k">cursor</span> <span class="n">c_employee</span> <span class="k">is</span> 
      <span class="k">select</span> <span class="n">last_name</span>
            <span class="p">,</span><span class="n">first_name</span>
        <span class="k">from</span> <span class="n">employee</span>
       <span class="k">where</span> <span class="n">commission_pct</span> <span class="k">is</span> <span class="k">not</span> <span class="k">null</span><span class="p">;</span>

   <span class="n">r_employee</span>  <span class="n">c_employee</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">open</span> <span class="n">c_employee</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">read_employees</span><span class="o">&gt;&gt;</span>
   <span class="n">loop</span>
      <span class="k">fetch</span> <span class="n">c_employee</span> <span class="k">into</span> <span class="n">r_employee</span><span class="p">;</span>
      <span class="n">exit</span> <span class="n">read_employees</span> <span class="k">when</span> <span class="n">c_employee</span><span class="o">%</span><span class="n">notfound</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">read_employees</span><span class="p">;</span>

   <span class="k">close</span> <span class="n">c_employee</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-4120-avoid-using-notfound-directly-after-the-fetch-when-working-with-bulk-operations-and-limit-clause">G-4120: Avoid using %NOTFOUND directly after the FETCH when working with BULK OPERATIONS and LIMIT clause.</h4>
<div class="admonition danger">
<p class="admonition-title">Critical</p>
<p>Reliability</p>
</div>
<h5 id="reason_37">Reason</h5>
<p><code>%notfound</code> is set to <code>true</code> as soon as less than the number of rows defined by the <code>limit</code> clause has been read.</p>
<h5 id="example-bad_37">Example (bad)</h5>
<p>The employee table holds 107 rows. The example below will only show 100 rows as the cursor attribute <code>notfound</code> is set to true as soon as the number of rows to be fetched defined by the limit clause is not fulfilled anymore.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="k">cursor</span> <span class="n">c_employee</span> <span class="k">is</span> 
      <span class="k">select</span> <span class="o">*</span>
        <span class="k">from</span> <span class="n">employee</span>
       <span class="k">order</span> <span class="k">by</span> <span class="n">employee_id</span><span class="p">;</span>

   <span class="k">type</span> <span class="n">t_employee_type</span> <span class="k">is</span> <span class="k">table</span> <span class="k">of</span> <span class="n">c_employee</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>
   <span class="n">t_employee</span> <span class="n">t_employee_type</span><span class="p">;</span>
   <span class="n">k_bulk_size</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">open</span> <span class="n">c_employee</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">process_employees</span><span class="o">&gt;&gt;</span>
   <span class="n">loop</span>
      <span class="k">fetch</span> <span class="n">c_employee</span> <span class="n">bulk</span> <span class="n">collect</span> <span class="k">into</span> <span class="n">t_employee</span> <span class="k">limit</span> <span class="n">k_bulk_size</span><span class="p">;</span>
      <span class="n">exit</span> <span class="n">process_employees</span> <span class="k">when</span> <span class="n">c_employee</span><span class="o">%</span><span class="n">notfound</span><span class="p">;</span>

      <span class="o">&lt;&lt;</span><span class="n">display_employees</span><span class="o">&gt;&gt;</span>
      <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="p">..</span><span class="n">t_employee</span><span class="p">.</span><span class="k">count</span><span class="p">()</span>
      <span class="n">loop</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">t_employee</span><span class="p">(</span><span class="n">i</span><span class="p">).</span><span class="n">last_name</span><span class="p">);</span>
      <span class="k">end</span> <span class="n">loop</span> <span class="n">display_employees</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">process_employees</span><span class="p">;</span>

   <span class="k">close</span> <span class="n">c_employee</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-better_2">Example (better)</h5>
<p>This example will show all 107 rows but execute one fetch too much (12 instead of 11).</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="k">cursor</span> <span class="n">c_employee</span> <span class="k">is</span> 
      <span class="k">select</span> <span class="o">*</span>
        <span class="k">from</span> <span class="n">employee</span>
       <span class="k">order</span> <span class="k">by</span> <span class="n">employee_id</span><span class="p">;</span>

   <span class="k">type</span> <span class="n">t_employee_type</span> <span class="k">is</span> <span class="k">table</span> <span class="k">of</span> <span class="n">c_employee</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>
   <span class="n">t_employee</span> <span class="n">t_employee_type</span><span class="p">;</span>
   <span class="n">k_bulk_size</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">open</span> <span class="n">c_employee</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">process_employees</span><span class="o">&gt;&gt;</span>
   <span class="n">loop</span>
      <span class="k">fetch</span> <span class="n">c_employee</span> <span class="n">bulk</span> <span class="n">collect</span> <span class="k">into</span> <span class="n">t_employee</span> <span class="k">limit</span> <span class="n">k_bulk_size</span><span class="p">;</span>
      <span class="n">exit</span> <span class="n">process_employees</span> <span class="k">when</span> <span class="n">t_employee</span><span class="p">.</span><span class="k">count</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="o">&lt;&lt;</span><span class="n">display_employees</span><span class="o">&gt;&gt;</span>
      <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="p">..</span><span class="n">t_employee</span><span class="p">.</span><span class="k">count</span><span class="p">()</span>
      <span class="n">loop</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">t_employee</span><span class="p">(</span><span class="n">i</span><span class="p">).</span><span class="n">last_name</span><span class="p">);</span>
      <span class="k">end</span> <span class="n">loop</span> <span class="n">display_employees</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">process_employees</span><span class="p">;</span>

   <span class="k">close</span> <span class="n">c_employee</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_37">Example (good)</h5>
<p>This example does the trick (11 fetches only to process all rows)</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="k">cursor</span> <span class="n">c_employee</span> <span class="k">is</span> 
      <span class="k">select</span> <span class="o">*</span>
        <span class="k">from</span> <span class="n">employee</span>
       <span class="k">order</span> <span class="k">by</span> <span class="n">employee_id</span><span class="p">;</span>

   <span class="k">type</span> <span class="n">t_employee_type</span> <span class="k">is</span> <span class="k">table</span> <span class="k">of</span> <span class="n">c_employee</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>
   <span class="n">t_employee</span> <span class="n">t_employee_type</span><span class="p">;</span>
   <span class="n">k_bulk_size</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">open</span> <span class="n">c_employee</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">process_employees</span><span class="o">&gt;&gt;</span>
   <span class="n">loop</span>
      <span class="k">fetch</span> <span class="n">c_employee</span> <span class="n">bulk</span> <span class="n">collect</span> <span class="k">into</span> <span class="n">t_employee</span> <span class="k">limit</span> <span class="n">k_bulk_size</span><span class="p">;</span>
      <span class="o">&lt;&lt;</span><span class="n">display_employees</span><span class="o">&gt;&gt;</span>
      <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="p">..</span><span class="n">t_employee</span><span class="p">.</span><span class="k">count</span><span class="p">()</span>
      <span class="n">loop</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">t_employee</span><span class="p">(</span><span class="n">i</span><span class="p">).</span><span class="n">last_name</span><span class="p">);</span>
      <span class="k">end</span> <span class="n">loop</span> <span class="n">display_employees</span><span class="p">;</span>
      <span class="n">exit</span> <span class="n">process_employees</span> <span class="k">when</span> <span class="n">t_employee</span><span class="p">.</span><span class="k">count</span><span class="p">()</span> <span class="o">&lt;&gt;</span> <span class="n">k_bulk_size</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">process_employees</span><span class="p">;</span>

   <span class="k">close</span> <span class="n">c_employee</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-4130-always-close-locally-opened-cursors">G-4130: Always close locally opened cursors.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Efficiency, Reliability</p>
</div>
<h5 id="reason_38">Reason</h5>
<p>Any cursors left open can consume additional memory space (i.e. SGA) within the database instance, potentially in both the shared and private SQL pools. Furthermore, failure to explicitly close cursors may also cause the owning session to exceed its maximum limit of open cursors (as specified by the <code>OPEN_CURSORS</code> database initialization parameter), potentially resulting in the Oracle error of “ORA-01000: maximum open cursors exceeded”. </p>
<h5 id="example-bad_38">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">employee_api</span> <span class="k">as</span>
   <span class="k">function</span> <span class="n">department_salary</span> <span class="p">(</span><span class="n">in_dept_id</span> <span class="k">in</span> <span class="n">department</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span>
      <span class="k">return</span> <span class="nb">number</span> <span class="k">is</span>
      <span class="k">cursor</span> <span class="n">c_department_salary</span><span class="p">(</span><span class="n">p_dept_id</span> <span class="k">in</span> <span class="n">department</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span> <span class="k">is</span> 
         <span class="k">select</span> <span class="k">sum</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">as</span> <span class="n">sum_salary</span>
           <span class="k">from</span> <span class="n">employee</span>
          <span class="k">where</span> <span class="n">department_id</span> <span class="o">=</span> <span class="n">p_dept_id</span><span class="p">;</span>
      <span class="n">r_department_salary</span> <span class="n">c_department_salary</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="k">open</span> <span class="n">c_department_salary</span><span class="p">(</span><span class="n">p_dept_id</span> <span class="o">=&gt;</span> <span class="n">in_dept_id</span><span class="p">);</span>
      <span class="k">fetch</span> <span class="n">c_department_salary</span> <span class="k">into</span> <span class="n">r_department_salary</span><span class="p">;</span>

      <span class="k">return</span> <span class="n">r_department_salary</span><span class="p">.</span><span class="n">sum_salary</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">department_salary</span><span class="p">;</span>
<span class="k">end</span> <span class="n">employee_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_38">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">employee_api</span> <span class="k">as</span>
   <span class="k">function</span> <span class="n">department_salary</span> <span class="p">(</span><span class="n">in_dept_id</span> <span class="k">in</span> <span class="n">department</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span>
      <span class="k">return</span> <span class="nb">number</span> <span class="k">is</span>
      <span class="k">cursor</span> <span class="n">c_department_salary</span><span class="p">(</span><span class="n">p_dept_id</span> <span class="k">in</span> <span class="n">department</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span> <span class="k">is</span> 
         <span class="k">select</span> <span class="k">sum</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">as</span> <span class="n">sum_salary</span>
           <span class="k">from</span> <span class="n">employee</span>
          <span class="k">where</span> <span class="n">department_id</span> <span class="o">=</span> <span class="n">p_dept_id</span><span class="p">;</span>
      <span class="n">r_department_salary</span> <span class="n">c_department_salary</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="k">open</span> <span class="n">c_department_salary</span><span class="p">(</span><span class="n">p_dept_id</span> <span class="o">=&gt;</span> <span class="n">in_dept_id</span><span class="p">);</span>
      <span class="k">fetch</span> <span class="n">c_department_salary</span> <span class="k">into</span> <span class="n">r_department_salary</span><span class="p">;</span>
      <span class="k">close</span> <span class="n">c_department_salary</span><span class="p">;</span>
      <span class="k">return</span> <span class="n">r_department_salary</span><span class="p">.</span><span class="n">sum_salary</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">department_salary</span><span class="p">;</span>
<span class="k">end</span> <span class="n">employee_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-4140-avoid-executing-any-statements-between-a-sql-operation-and-the-usage-of-an-implicit-cursor-attribute">G-4140: Avoid executing any statements between a SQL operation and the usage of an implicit cursor attribute.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Reliability</p>
</div>
<h5 id="reason_39">Reason</h5>
<p>Oracle provides a variety of cursor attributes (like <code>%found</code> and <code>%rowcount</code>) that can be used to obtain information about the status of a cursor, either implicit or explicit. </p>
<p>You should avoid inserting any statements between the cursor operation and the use of an attribute against that cursor. Interposing such a statement can affect the value returned by the attribute, thereby potentially corrupting the logic of your program. </p>
<p>In the following example, a procedure call is inserted between the DELETE statement and a check for the value of <code>sql%rowcount</code>, which returns the number of rows modified by that last SQL statement executed in the session. If this procedure includes a <code>commit</code> / <code>rollback</code> or another implicit cursor the value of <code>sql%rowcount</code> is affected.</p>
<h5 id="example-bad_39">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">employee_api</span> <span class="k">as</span>
   <span class="n">k_one</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

   <span class="k">procedure</span> <span class="n">process_dept</span><span class="p">(</span><span class="n">in_dept_id</span> <span class="k">in</span> <span class="n">departments</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">process_dept</span><span class="p">;</span>

   <span class="k">procedure</span> <span class="n">remove_employee</span> <span class="p">(</span><span class="n">in_employee_id</span> <span class="k">in</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span> <span class="k">is</span>
      <span class="n">l_dept_id</span>      <span class="n">employee</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="k">delete</span> <span class="k">from</span> <span class="n">employee</span>
       <span class="k">where</span> <span class="n">employee_id</span> <span class="o">=</span> <span class="n">in_employee_id</span>
       <span class="n">returning</span> <span class="n">department_id</span> <span class="k">into</span> <span class="n">l_dept_id</span><span class="p">;</span>

      <span class="n">process_dept</span><span class="p">(</span><span class="n">in_dept_id</span> <span class="o">=&gt;</span> <span class="n">l_dept_id</span><span class="p">);</span>

      <span class="k">if</span> <span class="k">sql</span><span class="o">%</span><span class="n">rowcount</span> <span class="o">&gt;</span> <span class="n">k_one</span> <span class="k">then</span>
         <span class="c1">-- too many rows deleted. </span>
         <span class="k">rollback</span><span class="p">;</span>
      <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">remove_employee</span><span class="p">;</span>
<span class="k">end</span> <span class="n">employee_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_39">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">employee_api</span> <span class="k">as</span>
   <span class="n">k_one</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

   <span class="k">procedure</span> <span class="n">process_dept</span><span class="p">(</span><span class="n">in_dept_id</span> <span class="k">in</span> <span class="n">departments</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">process_dept</span><span class="p">;</span>

   <span class="k">procedure</span> <span class="n">remove_employee</span> <span class="p">(</span><span class="n">in_employee_id</span> <span class="k">in</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span> <span class="k">is</span>
      <span class="n">l_dept_id</span>      <span class="n">employee</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
      <span class="n">l_deleted_emps</span> <span class="n">simple_integer</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="k">delete</span> <span class="k">from</span> <span class="n">employee</span>
       <span class="k">where</span> <span class="n">employee_id</span> <span class="o">=</span> <span class="n">in_employee_id</span>
       <span class="n">returning</span> <span class="n">department_id</span> <span class="k">into</span> <span class="n">l_dept_id</span><span class="p">;</span>

      <span class="n">l_deleted_emps</span> <span class="p">:</span><span class="o">=</span> <span class="k">sql</span><span class="o">%</span><span class="n">rowcount</span><span class="p">;</span>

      <span class="n">process_dept</span><span class="p">(</span><span class="n">in_dept_id</span> <span class="o">=&gt;</span> <span class="n">l_dept_id</span><span class="p">);</span>

      <span class="k">if</span> <span class="n">l_deleted_emps</span> <span class="o">&gt;</span> <span class="n">k_one</span> <span class="k">then</span>
         <span class="c1">-- too many rows deleted. </span>
         <span class="k">rollback</span><span class="p">;</span>
      <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">remove_employee</span><span class="p">;</span>
<span class="k">end</span> <span class="n">employee_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="case-if-decode-nvl-nvl2-coalesce">CASE / IF / DECODE / NVL / NVL2 / COALESCE</h3>
<h4 id="g-4210-try-to-use-case-rather-than-an-if-statement-with-multiple-elsif-paths">G-4210: Try to use CASE rather than an IF statement with multiple ELSIF paths.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Maintainability, Testability</p>
</div>
<h5 id="reason_40">Reason</h5>
<p>Often <code>if</code> statements containing multiple <code>elsif</code> tend to become complex quickly.</p>
<h5 id="example-bad_40">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_color</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">7</span> <span class="nb">char</span><span class="p">);</span>
<span class="k">begin</span>
   <span class="k">if</span> <span class="n">l_color</span> <span class="o">=</span> <span class="n">constants</span><span class="p">.</span><span class="n">k_red</span> <span class="k">then</span>
      <span class="n">my_package</span><span class="p">.</span><span class="n">do_red</span><span class="p">();</span>
   <span class="k">elsif</span> <span class="n">l_color</span> <span class="o">=</span> <span class="n">constants</span><span class="p">.</span><span class="n">k_blue</span> <span class="k">then</span>
      <span class="n">my_package</span><span class="p">.</span><span class="n">do_blue</span><span class="p">();</span>
   <span class="k">elsif</span> <span class="n">l_color</span> <span class="o">=</span> <span class="n">constants</span><span class="p">.</span><span class="n">k_black</span> <span class="k">then</span>
      <span class="n">my_package</span><span class="p">.</span><span class="n">do_black</span><span class="p">();</span>
   <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_40">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_color</span> <span class="n">types</span><span class="p">.</span><span class="n">color_code_type</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">case</span> <span class="n">l_color</span>
      <span class="k">when</span> <span class="n">constants</span><span class="p">.</span><span class="n">k_red</span>   <span class="k">then</span> 
         <span class="n">my_package</span><span class="p">.</span><span class="n">do_red</span><span class="p">();</span>
      <span class="k">when</span> <span class="n">constants</span><span class="p">.</span><span class="n">k_blue</span>  <span class="k">then</span> 
         <span class="n">my_package</span><span class="p">.</span><span class="n">do_blue</span><span class="p">();</span>
      <span class="k">when</span> <span class="n">constants</span><span class="p">.</span><span class="n">k_black</span> <span class="k">then</span> 
         <span class="n">my_package</span><span class="p">.</span><span class="n">do_black</span><span class="p">();</span>
      <span class="k">else</span> <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span> <span class="k">case</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-4220-try-to-use-case-rather-than-decode">G-4220: Try to use CASE rather than DECODE.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability, Portability</p>
</div>
<h5 id="reason_41">Reason</h5>
<p><code>DECODE</code> is an ORACLE specific function that can be hard to understand (particularly when not formatted well) and is restricted to SQL only. The <code>CASE</code> function is much more common has a better readability and may be used within PL/SQL too.</p>
<h5 id="example-bad_41">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span> <span class="n">decode</span><span class="p">(</span><span class="n">dummy</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="mi">1</span> 
                   <span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="mi">2</span>
                   <span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="mi">3</span>
                        <span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
  <span class="k">from</span> <span class="n">dual</span><span class="p">;</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_41">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span> <span class="k">case</span> <span class="n">dummy</span>
          <span class="k">when</span> <span class="s1">&#39;x&#39;</span> <span class="k">then</span> <span class="mi">1</span>
          <span class="k">when</span> <span class="s1">&#39;y&#39;</span> <span class="k">then</span> <span class="mi">2</span>
          <span class="k">when</span> <span class="s1">&#39;z&#39;</span> <span class="k">then</span> <span class="mi">3</span>
          <span class="k">else</span> <span class="mi">0</span>
       <span class="k">end</span>
  <span class="k">from</span> <span class="n">dual</span><span class="p">;</span>
</pre></div>
</td></tr></table>

<h4 id="g-4230-always-use-a-coalesce-instead-of-a-nvl-command-if-parameter-2-of-the-nvl-function-is-a-function-call-or-a-select-statement">G-4230: Always use a COALESCE instead of a NVL command, if parameter 2 of the NVL function is a function call or a SELECT statement.</h4>
<div class="admonition danger">
<p class="admonition-title">Critical</p>
<p>Efficiency, Reliability</p>
</div>
<h5 id="reason_42">Reason</h5>
<p>The <code>nvl</code> function always evaluates both parameters before deciding which one to use. This can be harmful if parameter 2 is either a function call or a select statement, as it will be executed regardless of whether parameter 1 contains a NULL value or not.</p>
<p>The <code>coalesce</code> function does not have this drawback.</p>
<h5 id="example-bad_42">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span> <span class="n">nvl</span><span class="p">(</span><span class="n">dummy</span><span class="p">,</span> <span class="n">my_package</span><span class="p">.</span><span class="n">expensive_null</span><span class="p">(</span><span class="n">value_in</span> <span class="o">=&gt;</span> <span class="n">dummy</span><span class="p">))</span>
  <span class="k">from</span> <span class="n">dual</span><span class="p">;</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_42">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span> <span class="n">coalesce</span><span class="p">(</span><span class="n">dummy</span><span class="p">,</span> <span class="n">my_package</span><span class="p">.</span><span class="n">expensive_null</span><span class="p">(</span><span class="n">value_in</span> <span class="o">=&gt;</span> <span class="n">dummy</span><span class="p">))</span>
  <span class="k">from</span> <span class="n">dual</span><span class="p">;</span>
</pre></div>
</td></tr></table>

<h4 id="g-4240-always-use-a-case-instead-of-a-nvl2-command-if-parameter-2-or-3-of-nvl2-is-either-a-function-call-or-a-select-statement">G-4240: Always use a CASE instead of a NVL2 command if parameter 2 or 3 of NVL2 is either a function call or a SELECT statement.</h4>
<div class="admonition danger">
<p class="admonition-title">Critical</p>
<p>Efficiency, Reliability</p>
</div>
<h5 id="reason_43">Reason</h5>
<p>The <code>nvl2</code> function always evaluates all parameters before deciding which one to use. This can be harmful, if parameter 2 or 3 is either a function call or a select statement, as they will be executed regardless of whether parameter 1 contains a <code>null</code> value or not.</p>
<h5 id="example-bad_43">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span> <span class="n">nvl2</span><span class="p">(</span><span class="n">dummy</span><span class="p">,</span> <span class="n">my_package</span><span class="p">.</span><span class="n">expensive_nn</span><span class="p">(</span><span class="n">value_in</span> <span class="o">=&gt;</span> <span class="n">dummy</span><span class="p">),</span> 
                   <span class="n">my_package</span><span class="p">.</span><span class="n">expensive_null</span><span class="p">(</span><span class="n">value_in</span> <span class="o">=&gt;</span> <span class="n">dummy</span><span class="p">))</span>
  <span class="k">from</span> <span class="n">dual</span><span class="p">;</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_43">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">select</span> <span class="k">case</span>
          <span class="k">when</span> <span class="n">dummy</span> <span class="k">is</span> <span class="k">null</span> <span class="k">then</span> 
             <span class="n">my_package</span><span class="p">.</span><span class="n">expensive_null</span><span class="p">(</span><span class="n">value_in</span> <span class="o">=&gt;</span> <span class="n">dummy</span><span class="p">)</span>
          <span class="k">else</span> 
             <span class="n">my_package</span><span class="p">.</span><span class="n">expensive_nn</span><span class="p">(</span><span class="n">value_in</span> <span class="o">=&gt;</span> <span class="n">dummy</span><span class="p">)</span>
       <span class="k">end</span>
<span class="k">from</span> <span class="n">dual</span><span class="p">;</span>
</pre></div>
</td></tr></table>

<h3 id="flow-control">Flow Control</h3>
<h4 id="g-4310-never-use-goto-statements-in-your-code">G-4310: Never use GOTO statements in your code.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Maintainability, Testability</p>
</div>
<h5 id="reason_44">Reason</h5>
<p>Code containing gotos is hard to format. Indentation should be used to show logical structure and gotos have an effect on logical structure. Trying to use indentation to show the logical structure of a goto, however, is difficult or impossible.</p>
<p>Use of gotos is a matter of religion. In modern languages, you can easily replace nine out of ten gotos with equivalent structured constructs. In these simple cases, you should replace gotos out of habit. In the hard cases, 
you can break the code into smaller routines; use nested ifs; test and retest a status variable; or restructure a conditional. Eliminating the goto is harder in these cases, but it's good exercise.</p>
<h5 id="example-bad_44">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">password_check</span> <span class="p">(</span><span class="n">in_password</span> <span class="k">in</span> <span class="n">varchar2</span><span class="p">)</span> <span class="k">is</span> 
      <span class="n">k_digitarray</span>  <span class="n">constant</span> <span class="n">string</span><span class="p">(</span><span class="mi">10</span> <span class="nb">char</span><span class="p">)</span>   <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;0123456789&#39;</span><span class="p">;</span>
      <span class="n">k_lower_bound</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="n">k_errno</span>       <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="o">-</span><span class="mi">20501</span><span class="p">;</span>
      <span class="n">k_errmsg</span>      <span class="n">constant</span> <span class="n">string</span><span class="p">(</span><span class="mi">100</span> <span class="nb">char</span><span class="p">)</span>  <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;Password must contain a digit.&#39;</span><span class="p">;</span>
      <span class="n">l_isdigit</span>     <span class="nb">boolean</span>     <span class="p">:</span><span class="o">=</span> <span class="k">false</span><span class="p">;</span>
      <span class="n">l_len_pw</span>      <span class="n">pls_integer</span><span class="p">;</span>
      <span class="n">l_len_array</span>   <span class="n">pls_integer</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="n">l_len_pw</span>    <span class="p">:</span><span class="o">=</span> <span class="k">length</span><span class="p">(</span><span class="n">in_password</span><span class="p">);</span>
      <span class="n">l_len_array</span> <span class="p">:</span><span class="o">=</span> <span class="k">length</span><span class="p">(</span><span class="n">k_digitarray</span><span class="p">);</span>

      <span class="o">&lt;&lt;</span><span class="n">check_digit</span><span class="o">&gt;&gt;</span>
      <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">k_lower_bound</span> <span class="p">..</span> <span class="n">l_len_array</span>
      <span class="n">loop</span>
         <span class="o">&lt;&lt;</span><span class="n">check_pw_char</span><span class="o">&gt;&gt;</span>
         <span class="k">for</span> <span class="n">j</span> <span class="k">in</span> <span class="n">k_lower_bound</span> <span class="p">..</span> <span class="n">l_len_pw</span>
         <span class="n">loop</span>
            <span class="k">if</span> <span class="n">substr</span><span class="p">(</span><span class="n">in_password</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="n">substr</span><span class="p">(</span><span class="n">k_digitarray</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">then</span>
               <span class="n">l_isdigit</span> <span class="p">:</span><span class="o">=</span> <span class="k">true</span><span class="p">;</span>
               <span class="k">goto</span> <span class="n">check_other_things</span><span class="p">;</span>
            <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
         <span class="k">end</span> <span class="n">loop</span> <span class="n">check_pw_char</span><span class="p">;</span>
      <span class="k">end</span> <span class="n">loop</span> <span class="n">check_digit</span><span class="p">;</span>

      <span class="o">&lt;&lt;</span><span class="n">check_other_things</span><span class="o">&gt;&gt;</span>
      <span class="k">null</span><span class="p">;</span>

      <span class="k">if</span> <span class="k">not</span> <span class="n">l_isdigit</span> <span class="k">then</span>
         <span class="n">raise_application_error</span><span class="p">(</span><span class="n">k_errno</span><span class="p">,</span> <span class="n">k_errmsg</span><span class="p">);</span>
      <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">password_check</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-better_3">Example (better)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">password_check</span> <span class="p">(</span><span class="n">in_password</span> <span class="k">in</span> <span class="n">varchar2</span><span class="p">)</span> <span class="k">is</span> 
      <span class="n">k_digitarray</span>  <span class="n">constant</span> <span class="n">string</span><span class="p">(</span><span class="mi">10</span> <span class="nb">char</span><span class="p">)</span>   <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;0123456789&#39;</span><span class="p">;</span>
      <span class="n">k_lower_bound</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="n">k_errno</span>       <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="o">-</span><span class="mi">20501</span><span class="p">;</span>
      <span class="n">k_errmsg</span>      <span class="n">constant</span> <span class="n">string</span><span class="p">(</span><span class="mi">100</span> <span class="nb">char</span><span class="p">)</span>  <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;Password must contain a digit.&#39;</span><span class="p">;</span>
      <span class="n">l_isdigit</span>      <span class="nb">boolean</span>     <span class="p">:</span><span class="o">=</span> <span class="k">false</span><span class="p">;</span>
      <span class="n">l_len_pw</span>       <span class="n">pls_integer</span><span class="p">;</span>
      <span class="n">l_len_array</span>    <span class="n">pls_integer</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="n">l_len_pw</span>    <span class="p">:</span><span class="o">=</span> <span class="k">length</span><span class="p">(</span><span class="n">in_password</span><span class="p">);</span>
      <span class="n">l_len_array</span> <span class="p">:</span><span class="o">=</span> <span class="k">length</span><span class="p">(</span><span class="n">k_digitarray</span><span class="p">);</span>

      <span class="o">&lt;&lt;</span><span class="n">check_digit</span><span class="o">&gt;&gt;</span>
      <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">k_lower_bound</span> <span class="p">..</span> <span class="n">l_len_array</span>
      <span class="n">loop</span>
         <span class="o">&lt;&lt;</span><span class="n">check_pw_char</span><span class="o">&gt;&gt;</span>
         <span class="k">for</span> <span class="n">j</span> <span class="k">in</span> <span class="n">k_lower_bound</span> <span class="p">..</span> <span class="n">l_len_pw</span>
         <span class="n">loop</span>
            <span class="k">if</span> <span class="n">substr</span><span class="p">(</span><span class="n">in_password</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="n">substr</span><span class="p">(</span><span class="n">k_digitarray</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">then</span>
               <span class="n">l_isdigit</span> <span class="p">:</span><span class="o">=</span> <span class="k">true</span><span class="p">;</span>
               <span class="n">exit</span> <span class="n">check_digit</span><span class="p">;</span> <span class="c1">-- early exit condition</span>
            <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
         <span class="k">end</span> <span class="n">loop</span> <span class="n">check_pw_char</span><span class="p">;</span>
      <span class="k">end</span> <span class="n">loop</span> <span class="n">check_digit</span><span class="p">;</span>

      <span class="o">&lt;&lt;</span><span class="n">check_other_things</span><span class="o">&gt;&gt;</span>
      <span class="k">null</span><span class="p">;</span>

      <span class="k">if</span> <span class="k">not</span> <span class="n">l_isdigit</span> <span class="k">then</span>
         <span class="n">raise_application_error</span><span class="p">(</span><span class="n">k_errno</span><span class="p">,</span> <span class="n">k_errmsg</span><span class="p">);</span>
      <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">password_check</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_44">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">password_check</span> <span class="p">(</span><span class="n">in_password</span> <span class="k">in</span> <span class="n">varchar2</span><span class="p">)</span> <span class="k">is</span>
      <span class="n">k_digitpattern</span> <span class="n">constant</span> <span class="n">string</span><span class="p">(</span><span class="mi">10</span> <span class="nb">char</span><span class="p">)</span>   <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;\d&#39;</span><span class="p">;</span>
      <span class="n">k_errno</span>        <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="o">-</span><span class="mi">20501</span><span class="p">;</span>
      <span class="n">k_errmsg</span>       <span class="n">constant</span> <span class="n">string</span><span class="p">(</span><span class="mi">100</span> <span class="nb">char</span><span class="p">)</span>  <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;Password must contain a digit.&#39;</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="k">if</span> <span class="k">not</span> <span class="n">regexp_like</span><span class="p">(</span><span class="n">in_password</span><span class="p">,</span> <span class="n">k_digitpattern</span><span class="p">)</span> 
      <span class="k">then</span>
         <span class="n">raise_application_error</span><span class="p">(</span><span class="n">k_errno</span><span class="p">,</span> <span class="n">k_errmsg</span><span class="p">);</span>
      <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">password_check</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-4320-always-label-your-loops">G-4320: Always label your loops.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability</p>
</div>
<h5 id="reason_45">Reason</h5>
<p>It's a good alternative for comments to indicate the start and end of a named loop processing.</p>
<h5 id="example-bad_45">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">i</span> <span class="nb">integer</span><span class="p">;</span>
   <span class="n">k_min_value</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="n">k_max_value</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
   <span class="n">k_increment</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">i</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_min_value</span><span class="p">;</span>
   <span class="n">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">k_max_value</span><span class="p">)</span> 
   <span class="n">loop</span> 
      <span class="n">i</span> <span class="p">:</span><span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">k_increment</span><span class="p">;</span> 
   <span class="k">end</span> <span class="n">loop</span><span class="p">;</span>

   <span class="n">loop</span> 
      <span class="n">exit</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span><span class="p">;</span>

   <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">k_min_value</span><span class="p">..</span><span class="n">k_max_value</span>
   <span class="n">loop</span> 
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
   <span class="k">end</span> <span class="n">loop</span><span class="p">;</span>

   <span class="k">for</span> <span class="n">r_employee</span> <span class="k">in</span> <span class="p">(</span><span class="k">select</span> <span class="n">last_name</span> <span class="k">from</span> <span class="n">employee</span><span class="p">)</span>
   <span class="n">loop</span>
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">r_employee</span><span class="p">.</span><span class="n">last_name</span><span class="p">);</span>
   <span class="k">end</span> <span class="n">loop</span><span class="p">;</span>   
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_45">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">i</span> <span class="nb">integer</span><span class="p">;</span>
   <span class="n">k_min_value</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="n">k_max_value</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
   <span class="n">k_increment</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">i</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_min_value</span><span class="p">;</span>
   <span class="o">&lt;&lt;</span><span class="n">while_loop</span><span class="o">&gt;&gt;</span>
   <span class="n">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">k_max_value</span><span class="p">)</span> 
   <span class="n">loop</span> 
      <span class="n">i</span> <span class="p">:</span><span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">k_increment</span><span class="p">;</span> 
   <span class="k">end</span> <span class="n">loop</span> <span class="n">while_loop</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">basic_loop</span><span class="o">&gt;&gt;</span>
   <span class="n">loop</span> 
      <span class="n">exit</span> <span class="n">basic_loop</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">basic_loop</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">for_loop</span><span class="o">&gt;&gt;</span>
   <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">k_min_value</span><span class="p">..</span><span class="n">k_max_value</span>
   <span class="n">loop</span> 
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">for_loop</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">process_employees</span><span class="o">&gt;&gt;</span>
   <span class="k">for</span> <span class="n">r_employee</span> <span class="k">in</span> <span class="p">(</span><span class="k">select</span> <span class="n">last_name</span>
                        <span class="k">from</span> <span class="n">employee</span><span class="p">)</span>
   <span class="n">loop</span>
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">r_employee</span><span class="p">.</span><span class="n">last_name</span><span class="p">);</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">process_employees</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-4330-always-use-a-cursor-for-loop-to-process-the-complete-cursor-results-unless-you-are-using-bulk-operations">G-4330: Always use a CURSOR FOR loop to process the complete cursor results unless you are using bulk operations.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability</p>
</div>
<h5 id="reason_46">Reason</h5>
<p>It is easier for the reader to see, that the complete data set is processed. Using SQL to define the data to be processed is easier to maintain and typically faster than using conditional processing within the loop.</p>
<p>Since an <code>exit</code> statement is similar to a <code>goto</code> statement, it should be avoided whenever possible.</p>
<h5 id="example-bad_46">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="k">cursor</span> <span class="n">c_employee</span> <span class="k">is</span>
      <span class="k">select</span> <span class="n">employee_id</span><span class="p">,</span> <span class="n">last_name</span>
        <span class="k">from</span> <span class="n">employee</span><span class="p">;</span>
   <span class="n">r_employee</span> <span class="n">c_employee</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">open</span> <span class="n">c_employee</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">read_employees</span><span class="o">&gt;&gt;</span>
   <span class="n">loop</span>
      <span class="k">fetch</span> <span class="n">c_employee</span> <span class="k">into</span> <span class="n">r_employee</span><span class="p">;</span>
      <span class="n">exit</span> <span class="n">read_employees</span> <span class="k">when</span> <span class="n">c_employees</span><span class="o">%</span><span class="n">notfound</span><span class="p">;</span>
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">r_employee</span><span class="p">.</span><span class="n">last_name</span><span class="p">);</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">read_employees</span><span class="p">;</span>

   <span class="k">close</span> <span class="n">c_employee</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_46">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="k">cursor</span> <span class="n">c_employee</span> <span class="k">is</span>
      <span class="k">select</span> <span class="n">employee_id</span><span class="p">,</span> <span class="n">last_name</span>
        <span class="k">from</span> <span class="n">employee</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="o">&lt;&lt;</span><span class="n">read_employees</span><span class="o">&gt;&gt;</span>
   <span class="k">for</span> <span class="n">r_employee</span> <span class="k">in</span> <span class="n">c_employee</span>
   <span class="n">loop</span>
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">r_employee</span><span class="p">.</span><span class="n">last_name</span><span class="p">);</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">read_employees</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-4340-always-use-a-numeric-for-loop-to-process-a-dense-array">G-4340: Always use a NUMERIC FOR loop to process a dense array.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability</p>
</div>
<h5 id="reason_47">Reason</h5>
<p>It is easier for the reader to see that the complete array is processed.</p>
<p>Since an <code>exit</code> statement is similar to a <code>goto</code> statement, it should be avoided whenever possible.</p>
<h5 id="example-bad_47">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="k">type</span> <span class="n">t_employee_type</span> <span class="k">is</span> <span class="n">varray</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">of</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="n">t_employees</span> <span class="n">t_employee_type</span><span class="p">;</span>
   <span class="n">k_himuro</span>     <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">118</span><span class="p">;</span>
   <span class="n">k_livingston</span> <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">177</span><span class="p">;</span>
   <span class="n">k_min_value</span>  <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="n">k_increment</span>  <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="n">i</span> <span class="n">pls_integer</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">t_employees</span> <span class="p">:</span><span class="o">=</span> <span class="n">t_employee_type</span><span class="p">(</span><span class="n">k_himuro</span><span class="p">,</span> <span class="n">k_livingston</span><span class="p">);</span>
   <span class="n">i</span>           <span class="p">:</span><span class="o">=</span> <span class="n">k_min_value</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">process_employees</span><span class="o">&gt;&gt;</span>
   <span class="n">loop</span>
      <span class="n">exit</span> <span class="n">process_employees</span> <span class="k">when</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">t_employees</span><span class="p">.</span><span class="k">count</span><span class="p">();</span>
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">t_employees</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
      <span class="n">i</span> <span class="p">:</span><span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">k_increment</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">process_employees</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_47">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="k">type</span> <span class="n">t_employee_type</span> <span class="k">is</span> <span class="n">varray</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">of</span> <span class="n">employees</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="n">t_employees</span> <span class="n">t_employee_type</span><span class="p">;</span>
   <span class="n">k_himuro</span>     <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">118</span><span class="p">;</span>
   <span class="n">k_livingston</span> <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">177</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">t_employees</span> <span class="p">:</span><span class="o">=</span> <span class="n">t_employee_type</span><span class="p">(</span><span class="n">k_himuro</span><span class="p">,</span> <span class="n">k_livingston</span><span class="p">);</span>

   <span class="o">&lt;&lt;</span><span class="n">process_employees</span><span class="o">&gt;&gt;</span>
   <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="p">..</span><span class="n">t_employees</span><span class="p">.</span><span class="k">count</span><span class="p">()</span>
   <span class="n">loop</span>
     <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">t_employees</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">process_employees</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-4350-always-use-1-as-lower-and-count-as-upper-bound-when-looping-through-a-dense-array">G-4350: Always use 1 as lower and COUNT() as upper bound when looping through a dense array.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Reliability</p>
</div>
<h5 id="reason_48">Reason</h5>
<p>Doing so will not raise a <code>value_error</code> if the array you are looping through is empty. If you want to use <code>first()..last()</code> you need to check the array for emptiness beforehand to avoid the raise of <code>value_error</code>.</p>
<h5 id="example-bad_48">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="k">type</span> <span class="n">t_employee_type</span> <span class="k">is</span> <span class="k">table</span> <span class="k">of</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="n">t_employee</span> <span class="n">t_employee_type</span> <span class="p">:</span><span class="o">=</span> <span class="n">t_employee_type</span><span class="p">();</span>
<span class="k">begin</span>
   <span class="o">&lt;&lt;</span><span class="n">process_employees</span><span class="o">&gt;&gt;</span>
   <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">t_employee</span><span class="p">.</span><span class="k">first</span><span class="p">()..</span><span class="n">t_employee</span><span class="p">.</span><span class="k">last</span><span class="p">()</span>
   <span class="n">loop</span>
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">t_employee</span><span class="p">(</span><span class="n">i</span><span class="p">));</span> <span class="c1">-- some processing</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">process_employees</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-better_4">Example (better)</h5>
<p>Raise an unitialized collection error if <code>t_employee</code> is not initialized.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="k">type</span> <span class="n">t_employee_type</span> <span class="k">is</span> <span class="k">table</span> <span class="k">of</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="n">t_employee</span> <span class="n">t_employee_type</span> <span class="p">:</span><span class="o">=</span> <span class="n">t_employee_type</span><span class="p">();</span>
<span class="k">begin</span>
   <span class="o">&lt;&lt;</span><span class="n">process_employees</span><span class="o">&gt;&gt;</span>
   <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="p">..</span><span class="n">t_employee</span><span class="p">.</span><span class="k">count</span><span class="p">()</span>
   <span class="n">loop</span>
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">t_employee</span><span class="p">(</span><span class="n">i</span><span class="p">));</span> <span class="c1">-- some processing</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">process_employees</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_48">Example (good)</h5>
<p>Raises neither an error nor checking whether the array is empty. <code>t_employee.count()</code> always returns a <code>number</code> (unless the array is not initialized). If the array is empty <code>count()</code> returns 0 and therefore the loop will not be entered.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="k">type</span> <span class="n">t_employee_type</span> <span class="k">is</span> <span class="k">table</span> <span class="k">of</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="n">t_employee</span> <span class="n">t_employee_type</span> <span class="p">:</span><span class="o">=</span> <span class="n">t_employee_type</span><span class="p">();</span>
<span class="k">begin</span>
   <span class="k">if</span> <span class="n">t_employee</span> <span class="k">is</span> <span class="k">not</span> <span class="k">null</span> <span class="k">then</span>
      <span class="o">&lt;&lt;</span><span class="n">process_employees</span><span class="o">&gt;&gt;</span>
      <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="p">..</span><span class="n">t_employee</span><span class="p">.</span><span class="k">count</span><span class="p">()</span>
      <span class="n">loop</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">t_employee</span><span class="p">(</span><span class="n">i</span><span class="p">));</span> <span class="c1">-- some processing</span>
      <span class="k">end</span> <span class="n">loop</span> <span class="n">process_employees</span><span class="p">;</span>
   <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-4360-always-use-a-while-loop-to-process-a-loose-array">G-4360: Always use a WHILE loop to process a loose array.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Efficiency</p>
</div>
<h5 id="reason_49">Reason</h5>
<p>When a loose array is processed using a numeric <code>for loop</code> we have to check with all iterations whether the element exist to avoid a <code>no_data_found</code> exception. In addition, the number of iterations is not driven by the number of elements in the array but by the number of the lowest/highest element. The more gaps we have, the more superfluous iterations will be done.</p>
<h5 id="example-bad_49">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span> <span class="c1">-- raises no_data_found when processing 2nd record</span>
   <span class="k">type</span> <span class="n">t_employee_type</span> <span class="k">is</span> <span class="k">table</span> <span class="k">of</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="n">t_employee</span>    <span class="n">t_employee_type</span><span class="p">;</span>
   <span class="n">k_rogers</span>      <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">134</span><span class="p">;</span>
   <span class="n">k_matos</span>       <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">143</span><span class="p">;</span>
   <span class="n">k_mcewen</span>      <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">158</span><span class="p">;</span>
   <span class="n">k_index_matos</span> <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">t_employee</span> <span class="p">:</span><span class="o">=</span> <span class="n">t_employee_type</span><span class="p">(</span><span class="n">k_rogers</span><span class="p">,</span> <span class="n">k_matos</span><span class="p">,</span> <span class="n">k_mcewen</span><span class="p">);</span>
   <span class="n">t_employee</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="n">k_index_matos</span><span class="p">);</span>

   <span class="k">if</span> <span class="n">t_employee</span> <span class="k">is</span> <span class="k">not</span> <span class="k">null</span> <span class="k">then</span>
      <span class="o">&lt;&lt;</span><span class="n">process_employees</span><span class="o">&gt;&gt;</span>
      <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="p">..</span><span class="n">t_employee</span><span class="p">.</span><span class="k">count</span><span class="p">()</span>
      <span class="n">loop</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">t_employee</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
      <span class="k">end</span> <span class="n">loop</span> <span class="n">process_employees</span><span class="p">;</span>
   <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_49">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="k">type</span> <span class="n">t_employee_type</span> <span class="k">is</span> <span class="k">table</span> <span class="k">of</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="n">t_employee</span>    <span class="n">t_employee_type</span><span class="p">;</span>
   <span class="n">k_rogers</span>      <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">134</span><span class="p">;</span>
   <span class="n">k_matos</span>       <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">143</span><span class="p">;</span>
   <span class="n">k_mcewen</span>      <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">158</span><span class="p">;</span>
   <span class="n">k_index_matos</span> <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
   <span class="n">l_index</span>       <span class="n">pls_integer</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">t_employee</span> <span class="p">:</span><span class="o">=</span> <span class="n">t_employee_type</span><span class="p">(</span><span class="n">k_rogers</span><span class="p">,</span> <span class="n">k_matos</span><span class="p">,</span> <span class="n">k_mcewen</span><span class="p">);</span>
   <span class="n">t_employee</span><span class="p">.</span><span class="k">delete</span><span class="p">(</span><span class="n">k_index_matos</span><span class="p">);</span>

   <span class="n">l_index</span> <span class="p">:</span><span class="o">=</span> <span class="n">t_employee</span><span class="p">.</span><span class="k">first</span><span class="p">();</span>

   <span class="o">&lt;&lt;</span><span class="n">process_employees</span><span class="o">&gt;&gt;</span>
   <span class="n">while</span> <span class="n">l_index</span> <span class="k">is</span> <span class="k">not</span> <span class="k">null</span>
   <span class="n">loop</span>
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">t_employee</span><span class="p">(</span><span class="n">l_index</span><span class="p">));</span>
      <span class="n">l_index</span> <span class="p">:</span><span class="o">=</span> <span class="n">t_employee</span><span class="p">.</span><span class="k">next</span><span class="p">(</span><span class="n">l_index</span><span class="p">);</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">process_employees</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-4370-avoid-using-exit-to-stop-loop-processing-unless-you-are-in-a-basic-loop">G-4370: Avoid using EXIT to stop loop processing unless you are in a basic loop.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Maintainability</p>
</div>
<h5 id="reason_50">Reason</h5>
<p>A numeric for loop as well as a while loop and a cursor for loop have defined loop boundaries. If you are not able to exit your loop using those loop boundaries, then a basic loop is the right loop to choose.</p>
<h5 id="example-bad_50">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">i</span> <span class="nb">integer</span><span class="p">;</span>
   <span class="n">k_min_value</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="n">k_max_value</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
   <span class="n">k_increment</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">i</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_min_value</span><span class="p">;</span>
   <span class="o">&lt;&lt;</span><span class="n">while_loop</span><span class="o">&gt;&gt;</span>
   <span class="n">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">k_max_value</span><span class="p">)</span> 
   <span class="n">loop</span> 
      <span class="n">i</span> <span class="p">:</span><span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">k_increment</span><span class="p">;</span> 
      <span class="n">exit</span> <span class="n">while_loop</span> <span class="k">when</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">k_max_value</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">while_loop</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">basic_loop</span><span class="o">&gt;&gt;</span>
   <span class="n">loop</span> 
      <span class="n">exit</span> <span class="n">basic_loop</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">basic_loop</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">for_loop</span><span class="o">&gt;&gt;</span>
   <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">k_min_value</span><span class="p">..</span><span class="n">k_max_value</span>
   <span class="n">loop</span> 
      <span class="k">null</span><span class="p">;</span>
      <span class="n">exit</span> <span class="n">for_loop</span> <span class="k">when</span> <span class="n">i</span> <span class="o">=</span> <span class="n">k_max_value</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">for_loop</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">process_employees</span><span class="o">&gt;&gt;</span>
   <span class="k">for</span> <span class="n">r_employee</span> <span class="k">in</span> <span class="p">(</span><span class="k">select</span> <span class="n">last_name</span>
                        <span class="k">from</span> <span class="n">employee</span><span class="p">)</span>
   <span class="n">loop</span>
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">r_employee</span><span class="p">.</span><span class="n">last_name</span><span class="p">);</span>
      <span class="k">null</span><span class="p">;</span> <span class="c1">-- some processing</span>
      <span class="n">exit</span> <span class="n">process_employees</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">process_employees</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_50">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">i</span> <span class="nb">integer</span><span class="p">;</span>
   <span class="n">k_min_value</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="n">k_max_value</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
   <span class="n">k_increment</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">i</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_min_value</span><span class="p">;</span>
   <span class="o">&lt;&lt;</span><span class="n">while_loop</span><span class="o">&gt;&gt;</span>
   <span class="n">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">k_max_value</span><span class="p">)</span> 
   <span class="n">loop</span> 
      <span class="n">i</span> <span class="p">:</span><span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">k_increment</span><span class="p">;</span> 
   <span class="k">end</span> <span class="n">loop</span> <span class="n">while_loop</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">basic_loop</span><span class="o">&gt;&gt;</span>
   <span class="n">loop</span> 
      <span class="n">exit</span> <span class="n">basic_loop</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">basic_loop</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">for_loop</span><span class="o">&gt;&gt;</span>
   <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">k_min_value</span><span class="p">..</span><span class="n">k_max_value</span>
   <span class="n">loop</span> 
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">for_loop</span><span class="p">;</span>

   <span class="o">&lt;&lt;</span><span class="n">process_employees</span><span class="o">&gt;&gt;</span>
   <span class="k">for</span> <span class="n">r_employee</span> <span class="k">in</span> <span class="p">(</span><span class="k">select</span> <span class="n">last_name</span>
                        <span class="k">from</span> <span class="n">employee</span><span class="p">)</span>
   <span class="n">loop</span>
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">r_employee</span><span class="p">.</span><span class="n">last_name</span><span class="p">);</span> <span class="c1">-- some processing</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">process_employees</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-4375-always-use-exit-when-instead-of-an-if-statement-to-exit-from-a-loop">G-4375: Always use EXIT WHEN instead of an IF statement to exit from a loop.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability</p>
</div>
<h5 id="reason_51">Reason</h5>
<p>If you need to use an <code>exit</code> statement use its full semantic to make the code easier to understand and maintain. There is simply no need for an additional IF statement.</p>
<h5 id="example-bad_51">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">k_first_year</span> <span class="n">constant</span> <span class="n">pls_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1900</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="o">&lt;&lt;</span><span class="n">process_employees</span><span class="o">&gt;&gt;</span>
   <span class="n">loop</span>
      <span class="n">my_package</span><span class="p">.</span><span class="n">some_processing</span><span class="p">();</span>

      <span class="k">if</span> <span class="k">extract</span><span class="p">(</span><span class="k">year</span> <span class="k">from</span> <span class="n">sysdate</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">k_first_year</span> <span class="k">then</span>
         <span class="n">exit</span> <span class="n">process_employees</span><span class="p">;</span>
      <span class="k">end</span> <span class="k">if</span><span class="p">;</span>

      <span class="n">my_package</span><span class="p">.</span><span class="n">some_further_processing</span><span class="p">();</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">process_employees</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_51">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">k_first_year</span> <span class="n">constant</span> <span class="n">pls_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1900</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="o">&lt;&lt;</span><span class="n">process_employees</span><span class="o">&gt;&gt;</span>
   <span class="n">loop</span>
      <span class="n">my_package</span><span class="p">.</span><span class="n">some_processing</span><span class="p">();</span>

      <span class="n">exit</span> <span class="n">process_employees</span> <span class="k">when</span> <span class="k">extract</span><span class="p">(</span><span class="k">year</span> <span class="k">from</span> <span class="n">sysdate</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">k_first_year</span><span class="p">;</span>

      <span class="n">my_package</span><span class="p">.</span><span class="n">some_further_processing</span><span class="p">();</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">process_employees</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-4380-try-to-label-your-exit-when-statements">G-4380 Try to label your EXIT WHEN statements.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability</p>
</div>
<h5 id="reason_52">Reason</h5>
<p>It's a good alternative for comments, especially for nested loops to name the loop to exit.</p>
<h5 id="example-bad_52">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">k_init_loop</span>  <span class="n">constant</span> <span class="n">simple_integer</span>        <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="n">k_increment</span>  <span class="n">constant</span> <span class="n">simple_integer</span>        <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="n">k_exit_value</span> <span class="n">constant</span> <span class="n">simple_integer</span>        <span class="p">:</span><span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
   <span class="n">k_outer_text</span> <span class="n">constant</span> <span class="n">types</span><span class="p">.</span><span class="n">short_text_type</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;outer loop counter is &#39;</span><span class="p">;</span>
   <span class="n">k_inner_text</span> <span class="n">constant</span> <span class="n">types</span><span class="p">.</span><span class="n">short_text_type</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39; inner loop counter is &#39;</span><span class="p">;</span>
   <span class="n">l_outerloop</span>    <span class="n">pls_integer</span><span class="p">;</span>
   <span class="n">l_innerloop</span>    <span class="n">pls_integer</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">l_outerloop</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_init_loop</span><span class="p">;</span>
   <span class="o">&lt;&lt;</span><span class="n">outerloop</span><span class="o">&gt;&gt;</span>
   <span class="n">loop</span>
      <span class="n">l_innerloop</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_init_loop</span><span class="p">;</span>
      <span class="n">l_outerloop</span> <span class="p">:</span><span class="o">=</span> <span class="n">nvl</span><span class="p">(</span><span class="n">l_outerloop</span><span class="p">,</span><span class="n">k_init_loop</span><span class="p">)</span> <span class="o">+</span> <span class="n">k_increment</span><span class="p">;</span>
      <span class="o">&lt;&lt;</span><span class="n">innerloop</span><span class="o">&gt;&gt;</span>
      <span class="n">loop</span>
         <span class="n">l_innerloop</span> <span class="p">:</span><span class="o">=</span> <span class="n">nvl</span><span class="p">(</span><span class="n">l_innerloop</span><span class="p">,</span> <span class="n">k_init_loop</span><span class="p">)</span> <span class="o">+</span> <span class="n">k_increment</span><span class="p">;</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">k_outer_text</span> <span class="o">||</span> <span class="n">l_outerloop</span> <span class="o">||</span>
                                  <span class="n">k_inner_text</span> <span class="o">||</span> <span class="n">l_innerloop</span><span class="p">);</span>

         <span class="n">exit</span> <span class="k">when</span> <span class="n">l_innerloop</span> <span class="o">=</span> <span class="n">k_exit_value</span><span class="p">;</span>
      <span class="k">end</span> <span class="n">loop</span> <span class="n">innerloop</span><span class="p">;</span>

      <span class="n">exit</span> <span class="k">when</span> <span class="n">l_innerloop</span> <span class="o">=</span> <span class="n">k_exit_value</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">outerloop</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_52">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">k_init_loop</span>  <span class="n">constant</span> <span class="n">simple_integer</span>        <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="n">k_increment</span>  <span class="n">constant</span> <span class="n">simple_integer</span>        <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="n">k_exit_value</span> <span class="n">constant</span> <span class="n">simple_integer</span>        <span class="p">:</span><span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
   <span class="n">k_outer_text</span> <span class="n">constant</span> <span class="n">types</span><span class="p">.</span><span class="n">short_text_type</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;outer loop counter is &#39;</span><span class="p">;</span>
   <span class="n">k_inner_text</span> <span class="n">constant</span> <span class="n">types</span><span class="p">.</span><span class="n">short_text_type</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39; inner loop counter is &#39;</span><span class="p">;</span>
   <span class="n">l_outerloop</span>  <span class="n">pls_integer</span><span class="p">;</span>
   <span class="n">l_innerloop</span>    <span class="n">pls_integer</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">l_outerloop</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_init_loop</span><span class="p">;</span>
   <span class="o">&lt;&lt;</span><span class="n">outerloop</span><span class="o">&gt;&gt;</span>
   <span class="n">loop</span>
      <span class="n">l_innerloop</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_init_loop</span><span class="p">;</span>
      <span class="n">l_outerloop</span> <span class="p">:</span><span class="o">=</span> <span class="n">nvl</span><span class="p">(</span><span class="n">l_outerloop</span><span class="p">,</span><span class="n">k_init_loop</span><span class="p">)</span> <span class="o">+</span> <span class="n">k_increment</span><span class="p">;</span>
      <span class="o">&lt;&lt;</span><span class="n">innerloop</span><span class="o">&gt;&gt;</span>
      <span class="n">loop</span>
         <span class="n">l_innerloop</span> <span class="p">:</span><span class="o">=</span> <span class="n">nvl</span><span class="p">(</span><span class="n">l_innerloop</span><span class="p">,</span> <span class="n">k_init_loop</span><span class="p">)</span> <span class="o">+</span> <span class="n">k_increment</span><span class="p">;</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">k_outer_text</span> <span class="o">||</span> <span class="n">l_outerloop</span> <span class="o">||</span>
                                  <span class="n">k_inner_text</span> <span class="o">||</span> <span class="n">l_innerloop</span><span class="p">);</span>

         <span class="n">exit</span> <span class="n">outerloop</span> <span class="k">when</span> <span class="n">l_innerloop</span> <span class="o">=</span> <span class="n">k_exit_value</span><span class="p">;</span>
      <span class="k">end</span> <span class="n">loop</span> <span class="n">innerloop</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">outerloop</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-4385-never-use-a-cursor-for-loop-to-check-whether-a-cursor-returns-data">G-4385: Never use a cursor for loop to check whether a cursor returns data.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Efficiency</p>
</div>
<h5 id="reason_53">Reason</h5>
<p>You might process more data than required, which leads to bad performance.</p>
<p>Also, check out rule <a href="/docs/4-language-usage/8-patterns/1-checking-the-number-of-rows/g-8110.md">G-8110: Never use SELECT COUNT(*) if you are only interested in the existence of a row.</a></p>
<h5 id="example-bad_53">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_employee_found</span> <span class="nb">boolean</span> <span class="p">:</span><span class="o">=</span> <span class="k">false</span><span class="p">;</span>
   <span class="k">cursor</span> <span class="n">c_employee</span> <span class="k">is</span>
      <span class="k">select</span> <span class="n">employee_id</span><span class="p">,</span> <span class="n">last_name</span>
        <span class="k">from</span> <span class="n">employee</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="o">&lt;&lt;</span><span class="n">check_employees</span><span class="o">&gt;&gt;</span>
   <span class="k">for</span> <span class="n">r_employee</span> <span class="k">in</span> <span class="n">c_employee</span>
   <span class="n">loop</span>
      <span class="n">l_employee_found</span> <span class="p">:</span><span class="o">=</span> <span class="k">true</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">check_employees</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_53">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_employee_found</span> <span class="nb">boolean</span> <span class="p">:</span><span class="o">=</span> <span class="k">false</span><span class="p">;</span>
   <span class="k">cursor</span> <span class="n">c_employee</span> <span class="k">is</span>
      <span class="k">select</span> <span class="n">employee_id</span><span class="p">,</span> <span class="n">last_name</span>
        <span class="k">from</span> <span class="n">employee</span><span class="p">;</span>
   <span class="n">r_employee</span> <span class="n">c_employee</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">open</span> <span class="n">c_employee</span><span class="p">;</span>
   <span class="k">fetch</span> <span class="n">c_employee</span> <span class="k">into</span> <span class="n">r_employee</span><span class="p">;</span>
   <span class="n">l_employee_found</span> <span class="p">:</span><span class="o">=</span> <span class="n">c_employee</span><span class="o">%</span><span class="k">found</span><span class="p">;</span>
   <span class="k">close</span> <span class="n">c_employee</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-4390-avoid-use-of-unreferenced-for-loop-indexes">G-4390: Avoid use of unreferenced FOR loop indexes.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Efficiency</p>
</div>
<h5 id="reason_54">Reason</h5>
<p>If the loop index is used for anything but traffic control inside the loop, this is one of the indicators that a numeric FOR loop is being used incorrectly. The actual body of executable statements completely ignores the loop index. When that is the case, there is a good chance that you do not need the loop at all.</p>
<h5 id="example-bad_54">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_row</span>   <span class="n">pls_integer</span><span class="p">;</span>
   <span class="n">l_value</span> <span class="n">pls_integer</span><span class="p">;</span>
   <span class="n">k_lower_bound</span> <span class="n">constant</span> <span class="n">simple_integer</span>           <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="n">k_upper_bound</span> <span class="n">constant</span> <span class="n">simple_integer</span>           <span class="p">:</span><span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
   <span class="n">k_row_incr</span>    <span class="n">constant</span> <span class="n">simple_integer</span>           <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="n">k_value_incr</span>  <span class="n">constant</span> <span class="n">simple_integer</span>           <span class="p">:</span><span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
   <span class="n">k_delimiter</span>   <span class="n">constant</span> <span class="n">types</span><span class="p">.</span><span class="n">short_text_type</span>    <span class="p">:</span><span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="p">;</span>
   <span class="n">k_first_value</span> <span class="n">constant</span> <span class="n">simple_integer</span>           <span class="p">:</span><span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">l_row</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_lower_bound</span><span class="p">;</span>
   <span class="n">l_value</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_first_value</span><span class="p">;</span>
   <span class="o">&lt;&lt;</span><span class="n">for_loop</span><span class="o">&gt;&gt;</span>
   <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">k_lower_bound</span> <span class="p">..</span> <span class="n">k_upper_bound</span>
   <span class="n">loop</span>
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">l_row</span> <span class="o">||</span> <span class="n">k_delimiter</span> <span class="o">||</span> <span class="n">l_value</span><span class="p">);</span>
      <span class="n">l_row</span>   <span class="p">:</span><span class="o">=</span> <span class="n">l_row</span> <span class="o">+</span> <span class="n">k_row_incr</span><span class="p">;</span>
      <span class="n">l_value</span> <span class="p">:</span><span class="o">=</span> <span class="n">l_value</span> <span class="o">+</span> <span class="n">k_value_incr</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">for_loop</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_54">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">k_lower_bound</span> <span class="n">constant</span> <span class="n">simple_integer</span>           <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="n">k_upper_bound</span> <span class="n">constant</span> <span class="n">simple_integer</span>           <span class="p">:</span><span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
   <span class="n">k_value_incr</span>  <span class="n">constant</span> <span class="n">simple_integer</span>           <span class="p">:</span><span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
   <span class="n">k_delimiter</span>   <span class="n">constant</span> <span class="n">types</span><span class="p">.</span><span class="n">short_text_type</span>    <span class="p">:</span><span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="p">;</span>
   <span class="n">k_first_value</span> <span class="n">constant</span> <span class="n">simple_integer</span>           <span class="p">:</span><span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="o">&lt;&lt;</span><span class="n">for_loop</span><span class="o">&gt;&gt;</span>
   <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">k_lower_bound</span> <span class="p">..</span> <span class="n">k_upper_bound</span>
   <span class="n">loop</span>
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">i</span> <span class="o">||</span> <span class="n">k_delimiter</span> <span class="o">||</span>
                               <span class="n">to_char</span><span class="p">(</span><span class="n">k_first_value</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="n">k_value_incr</span><span class="p">));</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">for_loop</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-4395-avoid-hard-coded-upper-or-lower-bound-values-with-for-loops">G-4395: Avoid hard-coded upper or lower bound values with FOR loops.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Changeability, Maintainability</p>
</div>
<h5 id="reason_55">Reason</h5>
<p>Your <code>loop</code> statement uses a hard-coded value for either its upper or lower bounds. This creates a "weak link" in your program because it assumes that this value will never change. A better practice is to create a named constant (or function) and reference this named element instead of the hard-coded value.</p>
<h5 id="example-bad_55">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">begin</span>
   <span class="o">&lt;&lt;</span><span class="n">output_loop</span><span class="o">&gt;&gt;</span>
   <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="p">..</span><span class="mi">5</span>
   <span class="n">loop</span>
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">output_loop</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_55">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">k_lower_bound</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="n">k_upper_bound</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="o">&lt;&lt;</span><span class="n">output_loop</span><span class="o">&gt;&gt;</span>
   <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">k_lower_bound</span><span class="p">..</span><span class="n">k_upper_bound</span>
   <span class="n">loop</span>
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
   <span class="k">end</span> <span class="n">loop</span> <span class="n">output_loop</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h2 id="exception-handling">Exception Handling</h2>
<h3 id="g-5010-always-use-an-errorlogging-framework-for-your-application">G-5010: Always use an error/logging framework for your application.</h3>
<div class="admonition danger">
<p class="admonition-title">Critical</p>
<p>Reliability, Reusability, Testability</p>
</div>
<h4 id="reason_56">Reason</h4>
<p>Having a framework to raise/handle/log your errors allows you to easily avoid duplicate application error numbers and having different error messages for the same type of error.</p>
<p>This kind of framework should include</p>
<ul>
<li>Logging (different channels like table, mail, file, etc. if needed)</li>
<li>Error Raising</li>
<li>Multilanguage support if needed</li>
<li>Translate ORACLE error messages to a user friendly error text</li>
<li>Error repository</li>
</ul>
<p>By far, the best logging framework available is Logger from OraOpenSource: https://github.com/OraOpenSource/Logger</p>
<h4 id="example-bad_56">Example (bad)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">begin</span>
   <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">);</span>
   <span class="c1">-- some processing</span>
   <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="example-good_56">Example (good)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span> 
  <span class="c1">-- see https://github.com/oraopensource/logger</span>
  <span class="n">l_scope</span> <span class="n">logger_logs</span><span class="p">.</span><span class="k">scope</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;demo&#39;</span><span class="p">;</span>
<span class="k">begin</span>
  <span class="n">logger</span><span class="p">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="n">l_scope</span><span class="p">);</span>
  <span class="c1">-- some processing</span>
  <span class="n">logger</span><span class="p">.</span><span class="n">log</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="n">l_scope</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="g-5020-never-handle-unnamed-exceptions-using-the-error-number">G-5020: Never handle unnamed exceptions using the error number.</h3>
<div class="admonition danger">
<p class="admonition-title">Critical</p>
<p>Maintainability</p>
</div>
<h4 id="reason_57">Reason</h4>
<p>When literals are used for error numbers the reader needs the error message manual to unterstand what is going on. Commenting the code or using constants is an option, 
but it is better to use named exceptions instead, because it ensures a certain level of consistency which makes maintenance easier.</p>
<h4 id="example-bad_57">Example (bad)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">k_no_data_found</span> <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">my_package</span><span class="p">.</span><span class="n">some_processing</span><span class="p">();</span> <span class="c1">-- some code which raises an exception</span>
<span class="k">exception</span>
   <span class="k">when</span> <span class="n">too_many_rows</span> <span class="k">then</span>
      <span class="n">my_package</span><span class="p">.</span><span class="n">some_further_processing</span><span class="p">();</span>
   <span class="k">when</span> <span class="n">others</span> <span class="k">then</span>
      <span class="k">if</span> <span class="k">sqlcode</span> <span class="o">=</span> <span class="n">k_no_data_found</span> <span class="k">then</span>
         <span class="k">null</span><span class="p">;</span>
      <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="example-good_57">Example (good)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">begin</span>
   <span class="n">my_package</span><span class="p">.</span><span class="n">some_processing</span><span class="p">();</span> <span class="c1">-- some code which raises an exception</span>
<span class="k">exception</span>
   <span class="k">when</span> <span class="n">too_many_rows</span> <span class="k">then</span>
      <span class="n">my_package</span><span class="p">.</span><span class="n">some_further_processing</span><span class="p">();</span>
   <span class="k">when</span> <span class="n">no_data_found</span> <span class="k">then</span>
      <span class="k">null</span><span class="p">;</span> <span class="c1">-- handle no_data_found</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="g-5030-never-assign-predefined-exception-names-to-user-defined-exceptions">G-5030: Never assign predefined exception names to user defined exceptions.</h3>
<div class="admonition bug">
<p class="admonition-title">Blocker</p>
<p>Reliability, Testability</p>
</div>
<h4 id="reason_58">Reason</h4>
<p>This is error-prone because your local declaration overrides the global declaration. While it is technically possible to use the same names, it causes confusion for others needing to read and maintain this code. Additionally, you will need to be very careful to use the prefix <code>standard</code> in front of any reference that needs to use Oracle’s default exception behavior.</p>
<h4 id="example-bad_58">Example (bad)</h4>
<p>Using the code below, we are not able to handle the no_data_found exception raised by the <code>select</code> statement as we have overwritten that exception handler. In addition, our exception handler doesn't have an exception number assigned, which should be raised when the SELECT statement does not find any rows.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_dummy</span> <span class="n">dual</span><span class="p">.</span><span class="n">dummy</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="n">no_data_found</span>   <span class="k">exception</span><span class="p">;</span>
   <span class="n">k_rownum</span>        <span class="n">constant</span> <span class="n">simple_integer</span>           <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="n">k_no_data_found</span> <span class="n">constant</span> <span class="n">types</span><span class="p">.</span><span class="n">short_text_type</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;no_data_found&#39;</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">select</span> <span class="n">dummy</span>
     <span class="k">into</span> <span class="n">l_dummy</span>
     <span class="k">from</span> <span class="n">dual</span>
    <span class="k">where</span> <span class="n">rownum</span> <span class="o">=</span> <span class="n">k_rownum</span><span class="p">;</span>

   <span class="k">if</span> <span class="n">l_dummy</span> <span class="k">is</span> <span class="k">null</span> <span class="k">then</span> 
      <span class="n">raise</span> <span class="n">no_data_found</span><span class="p">;</span>
   <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
<span class="k">exception</span>
   <span class="k">when</span> <span class="n">no_data_found</span> <span class="k">then</span>
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">k_no_data_found</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>

<span class="n">Error</span> <span class="n">report</span> <span class="o">-</span>
<span class="n">ORA</span><span class="o">-</span><span class="mi">01403</span><span class="p">:</span> <span class="k">no</span> <span class="k">data</span> <span class="k">found</span>
<span class="n">ORA</span><span class="o">-</span><span class="mi">06512</span><span class="p">:</span> <span class="k">at</span> <span class="n">line</span> <span class="mi">5</span>
<span class="mi">01403</span><span class="p">.</span> <span class="mi">00000</span> <span class="o">-</span>  <span class="ss">&quot;no data found&quot;</span>
<span class="o">*</span><span class="n">Cause</span><span class="p">:</span>    <span class="k">No</span> <span class="k">data</span> <span class="n">was</span> <span class="k">found</span> <span class="k">from</span> <span class="n">the</span> <span class="n">objects</span><span class="p">.</span>
<span class="o">*</span><span class="n">Action</span><span class="p">:</span>   <span class="n">There</span> <span class="n">was</span> <span class="k">no</span> <span class="k">data</span> <span class="k">from</span> <span class="n">the</span> <span class="n">objects</span> <span class="n">which</span> <span class="n">may</span> <span class="n">be</span> <span class="n">due</span> <span class="k">to</span> <span class="k">end</span> <span class="k">of</span> <span class="k">fetch</span><span class="p">.</span>
</pre></div>
</td></tr></table>

<h4 id="example-good_58">Example (good)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_dummy</span> <span class="n">dual</span><span class="p">.</span><span class="n">dummy</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="n">empty_value</span>     <span class="k">exception</span><span class="p">;</span>
   <span class="n">k_rownum</span>        <span class="n">constant</span> <span class="n">simple_integer</span>           <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="n">k_empty_value</span>   <span class="n">constant</span> <span class="n">types</span><span class="p">.</span><span class="n">short_text_type</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;empty_value&#39;</span><span class="p">;</span>
   <span class="n">k_no_data_found</span> <span class="n">constant</span> <span class="n">types</span><span class="p">.</span><span class="n">short_text_type</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;no_data_found&#39;</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">select</span> <span class="n">dummy</span>
     <span class="k">into</span> <span class="n">l_dummy</span>
     <span class="k">from</span> <span class="n">dual</span>
    <span class="k">where</span> <span class="n">rownum</span> <span class="o">=</span> <span class="n">k_rownum</span><span class="p">;</span>

   <span class="k">if</span> <span class="n">l_dummy</span> <span class="k">is</span> <span class="k">null</span> <span class="k">then</span>
      <span class="n">raise</span> <span class="n">empty_value</span><span class="p">;</span>
   <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
<span class="k">exception</span>
   <span class="k">when</span> <span class="n">empty_value</span> <span class="k">then</span>
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">k_empty_value</span><span class="p">);</span>
   <span class="k">when</span> <span class="n">no_data_found</span> <span class="k">then</span>
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">k_no_data_found</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="g-5040-avoid-use-of-when-others-clause-in-an-exception-section-without-any-other-specific-handlers">G-5040: Avoid use of WHEN OTHERS clause in an exception section without any other specific handlers.</h3>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Reliability</p>
</div>
<h4 id="reason_59">Reason</h4>
<p>There is not necessarily anything wrong with using <code>when others</code>, but it can cause you to "lose" error information unless your handler code is relatively sophisticated. Generally, you should use <code>when others</code> to grab any and every error only after you have thought about your executable section and decided that you are not able to trap any specific exceptions. If you know, on the other hand, that a certain exception might be raised, include a handler for that error. By declaring two different exception handlers, the code more clearly states what we expect to have happen and how we want to handle the errors. That makes it easier to maintain and enhance. We also avoid hard-coding error numbers in checks against <code>sqlcode</code>.</p>
<h4 id="example-bad_59">Example (bad)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">begin</span>
   <span class="n">my_package</span><span class="p">.</span><span class="n">some_processing</span><span class="p">();</span>
<span class="k">exception</span>
   <span class="k">when</span> <span class="n">others</span> <span class="k">then</span>
      <span class="n">my_package</span><span class="p">.</span><span class="n">some_further_processing</span><span class="p">();</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="example-good_59">Example (good)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">begin</span>
   <span class="n">my_package</span><span class="p">.</span><span class="n">some_processing</span><span class="p">();</span>
<span class="k">exception</span>
   <span class="k">when</span> <span class="n">dup_val_on_index</span> <span class="k">then</span>
      <span class="n">my_package</span><span class="p">.</span><span class="n">some_further_processing</span><span class="p">();</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="g-5050-avoid-use-of-the-raise_application_error-built-in-procedure-with-a-hard-coded-20nnn-error-number-or-hard-coded-message">G-5050: Avoid use of the RAISE_APPLICATION_ERROR built-in procedure with a hard-coded  20nnn error number or hard-coded message.</h3>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Changeability, Maintainability</p>
</div>
<h4 id="reason_60">Reason</h4>
<p>If you are not very organized in the way you allocate, define and use the error numbers between  20999 and  20000 (those reserved by Oracle for its user community), it is very easy to end up with conflicting usages. You should assign these error numbers to named constants and consolidate all definitions within a single package. When you call <code>raise_application_error</code>, you should reference these named elements and error message text stored in a table. Use your own raise procedure in place of explicit calls to <code>raise_application_error</code>. If you are raising a "system" exception like <code>no_data_found</code>, you must use RAISE. However, when you want to raise an application-specific error, you use <code>raise_application_error</code>. If you use the latter, you then have to provide an error number and message. This leads to unnecessary and damaging hard-coded values. A more fail-safe approach is to provide a predefined raise procedure that automatically checks the error number and determines the correct way to raise the error. </p>
<h4 id="example-bad_60">Example (bad)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">begin</span>
   <span class="n">raise_application_error</span><span class="p">(</span><span class="o">-</span><span class="mi">20501</span><span class="p">,</span><span class="s1">&#39;invalid employee_id&#39;</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="example-good_60">Example (good)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">begin</span>
   <span class="n">errors</span><span class="p">.</span><span class="n">raise</span><span class="p">(</span><span class="n">in_error</span> <span class="o">=&gt;</span> <span class="n">errors</span><span class="p">.</span><span class="n">k_invalid_employee_id</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="g-5060-avoid-unhandled-exceptions">G-5060: Avoid unhandled exceptions.</h3>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Reliability</p>
</div>
<h4 id="reason_61">Reason</h4>
<p>This may be your intention, but you should review the code to confirm this behavior. </p>
<p>If you are raising an error in a program, then you are clearly predicting a situation in which that error will occur. You should consider including a handler in your code for predictable errors, allowing for a graceful and informative failure. After all, it is much more difficult for an enclosing block to be aware of the various errors you might raise and more importantly, what should be done in response to the error. </p>
<p>The form that this failure takes does not necessarily need to be an exception. When writing functions, you may well decide that in the case of certain exceptions, you will want to return a value such as NULL, rather than allow an exception to propagate out of the function. </p>
<h4 id="example-bad_61">Example (bad)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">department_api</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">name_by_id</span> <span class="p">(</span><span class="n">in_id</span> <span class="k">in</span> <span class="n">department</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span> 
      <span class="k">return</span> <span class="n">department</span><span class="p">.</span><span class="n">department_name</span><span class="o">%</span><span class="k">type</span> <span class="k">is</span>
      <span class="n">l_department_name</span> <span class="n">department</span><span class="p">.</span><span class="n">department_name</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="k">select</span> <span class="n">department_name</span>
        <span class="k">into</span> <span class="n">l_department_name</span>
        <span class="k">from</span> <span class="n">department</span>
       <span class="k">where</span> <span class="n">department_id</span> <span class="o">=</span> <span class="n">in_id</span><span class="p">;</span>

      <span class="k">return</span> <span class="n">l_department_name</span><span class="p">;</span>   
   <span class="k">end</span> <span class="n">name_by_id</span><span class="p">;</span>
<span class="k">end</span> <span class="n">department_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="example-good_61">Example (good)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">department_api</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">name_by_id</span> <span class="p">(</span><span class="n">in_id</span> <span class="k">in</span> <span class="n">department</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span> 
      <span class="k">return</span> <span class="n">department</span><span class="p">.</span><span class="n">department_name</span><span class="o">%</span><span class="k">type</span> <span class="k">is</span>
      <span class="n">l_department_name</span> <span class="n">department</span><span class="p">.</span><span class="n">department_name</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="k">select</span> <span class="n">department_name</span>
        <span class="k">into</span> <span class="n">l_department_name</span>
        <span class="k">from</span> <span class="n">department</span>
       <span class="k">where</span> <span class="n">department_id</span> <span class="o">=</span> <span class="n">in_id</span><span class="p">;</span>

      <span class="k">return</span> <span class="n">l_department_name</span><span class="p">;</span>  
   <span class="k">exception</span>
      <span class="k">when</span> <span class="n">no_data_found</span> <span class="k">then</span> <span class="k">return</span> <span class="k">null</span><span class="p">;</span>
      <span class="k">when</span> <span class="n">too_many_rows</span> <span class="k">then</span> <span class="n">raise</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">name_by_id</span><span class="p">;</span>
<span class="k">end</span> <span class="n">department_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="g-5070-avoid-using-oracle-predefined-exceptions">G-5070: Avoid using Oracle predefined exceptions.</h3>
<div class="admonition danger">
<p class="admonition-title">Critical</p>
<p>Reliability</p>
</div>
<h4 id="reason_62">Reason</h4>
<p>You have raised an exception whose name was defined by Oracle. While it is possible that you have a good reason for "using" one of Oracle's predefined exceptions, you should make sure that you would not be better off declaring your own exception and raising that instead.</p>
<p>If you decide to change the exception you are using, you should apply the same consideration to your own exceptions. Specifically, do not "re-use" exceptions. You should define a separate exception for each error condition, rather than use the same exception for different circumstances. </p>
<p>Being as specific as possible with the errors raised will allow developers to check for, and handle, the different kinds of errors the code might produce.</p>
<h4 id="example-bad_62">Example (bad)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">begin</span>
   <span class="n">raise</span> <span class="n">no_data_found</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="example-good_62">Example (good)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">my_exception</span> <span class="k">exception</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">raise</span> <span class="n">my_exception</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h2 id="dynamic-sql">Dynamic SQL</h2>
<h3 id="g-6010-always-use-a-character-variable-to-execute-dynamic-sql">G-6010: Always use a character variable to execute dynamic SQL.</h3>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Maintainability, Testability</p>
</div>
<h4 id="reason_63">Reason</h4>
<p>Having the executed statement in a variable makes it easier to debug your code (e.g. by logging the statement that failed).</p>
<h4 id="example-bad_63">Example (bad)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_next_val</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">execute</span> <span class="k">immediate</span> <span class="s1">&#39;select employee_seq.nextval from dual&#39;</span> <span class="k">into</span> <span class="n">l_next_val</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="example-good_63">Example (good)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_next_val</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="n">k_sql</span> <span class="n">constant</span> <span class="n">types</span><span class="p">.</span><span class="n">big_string_type</span> <span class="p">:</span><span class="o">=</span> 
       <span class="s1">&#39;select employee_seq.nextval from dual&#39;</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">execute</span> <span class="k">immediate</span> <span class="n">k_sql</span> <span class="k">into</span> <span class="n">l_next_val</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="g-6020-try-to-use-output-bind-arguments-in-the-returning-into-clause-of-dynamic-dml-statements-rather-than-the-using-clause">G-6020: Try to use output bind arguments in the RETURNING INTO clause of dynamic DML statements rather than the USING clause.</h3>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability</p>
</div>
<h4 id="reason_64">Reason</h4>
<p>When a dynamic <code>insert</code>, <code>update</code>, or <code>delete</code> statement has a <code>returning</code> clause, output bind arguments can go in the <code>returning into</code> clause or in the <code>using</code> clause.</p>
<p>You should use the <code>returning into</code> clause for values returned from a DML operation. Reserve <code>out</code> and <code>in out</code> bind variables for dynamic PL/SQL blocks that return values in PL/SQL variables.</p>
<h4 id="example-bad_64">Example (bad)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">employee_api</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">upd_salary</span> <span class="p">(</span><span class="n">in_employee_id</span>  <span class="k">in</span>   <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span>
                        <span class="p">,</span><span class="n">in_increase_pct</span> <span class="k">in</span>   <span class="n">types</span><span class="p">.</span><span class="n">percentage</span>
                        <span class="p">,</span><span class="n">out_new_salary</span>  <span class="k">out</span>  <span class="n">employee</span><span class="p">.</span><span class="n">salary</span><span class="o">%</span><span class="k">type</span><span class="p">)</span>
   <span class="k">is</span>
      <span class="n">k_sql_stmt</span> <span class="n">constant</span> <span class="n">types</span><span class="p">.</span><span class="n">big_string_type</span> <span class="p">:</span><span class="o">=</span>
          <span class="s1">&#39;update employee set salary = salary + (salary / 100 * :1) </span>
<span class="s1">            where employee_id = :2</span>
<span class="s1">        returning salary into :3&#39;</span><span class="p">;</span>
   <span class="k">begin</span>
     <span class="k">execute</span> <span class="k">immediate</span> <span class="n">k_sql_stmt</span>
           <span class="k">using</span> <span class="n">in_increase_pct</span><span class="p">,</span> <span class="n">in_employee_id</span><span class="p">,</span> <span class="k">out</span> <span class="n">out_new_salary</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">upd_salary</span><span class="p">;</span>
<span class="k">end</span> <span class="n">employee_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="example-good_64">Example (good)</h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">employee_api</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">upd_salary</span> <span class="p">(</span><span class="n">in_employee_id</span>  <span class="k">in</span>   <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span>
                        <span class="p">,</span><span class="n">in_increase_pct</span> <span class="k">in</span>   <span class="n">types</span><span class="p">.</span><span class="n">percentage</span>
                        <span class="p">,</span><span class="n">out_new_salary</span>  <span class="k">out</span>  <span class="n">employee</span><span class="p">.</span><span class="n">salary</span><span class="o">%</span><span class="k">type</span><span class="p">)</span>
   <span class="k">is</span>
      <span class="n">k_sql_stmt</span> <span class="n">constant</span> <span class="n">types</span><span class="p">.</span><span class="n">big_string_type</span> <span class="p">:</span><span class="o">=</span> 
          <span class="s1">&#39;update employee set salary = salary + (salary / 100 * :1) </span>
<span class="s1">            where employee_id = :2</span>
<span class="s1">        returning salary into :3&#39;</span><span class="p">;</span>
   <span class="k">begin</span>
     <span class="k">execute</span> <span class="k">immediate</span> <span class="n">k_sql_stmt</span>
           <span class="k">using</span> <span class="n">in_increase_pct</span><span class="p">,</span> <span class="n">in_employee_id</span>
           <span class="n">returning</span> <span class="k">into</span> <span class="n">out_new_salary</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">upd_salary</span><span class="p">;</span>
<span class="k">end</span> <span class="n">employee_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h2 id="stored-objects">Stored Objects</h2>
<h3 id="general_3">General</h3>
<h4 id="g-7110-try-to-use-named-notation-when-calling-program-units">G-7110: Try to use named notation when calling program units.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Changeability, Maintainability</p>
</div>
<h5 id="reason_65">Reason</h5>
<p>Named notation makes sure that changes to the signature of the called program unit do not affect your call.</p>
<p>This is not needed for standard functions like (<code>to_char</code>, <code>to_date</code>, <code>nvl</code>, <code>round</code>, etc.) but should be followed for any other stored object having more than one parameter.</p>
<h5 id="example-bad_65">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">r_employee</span> <span class="n">employee</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>
   <span class="n">k_id</span> <span class="n">constant</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="mi">107</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">employee_api</span><span class="p">.</span><span class="n">employee_by_id</span><span class="p">(</span><span class="n">r_employee</span><span class="p">,</span> <span class="n">k_id</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_65">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">r_employee</span> <span class="n">employee</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>
   <span class="n">k_id</span> <span class="n">constant</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="mi">107</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">employee_api</span><span class="p">.</span><span class="n">employee_by_id</span><span class="p">(</span><span class="n">out_row</span> <span class="o">=&gt;</span> <span class="n">r_employee</span><span class="p">,</span> <span class="n">in_employee_id</span> <span class="o">=&gt;</span> <span class="n">k_id</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-7120-always-add-the-name-of-the-program-unit-to-its-end-keyword">G-7120 Always add the name of the program unit to its end keyword.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability</p>
</div>
<h5 id="reason_66">Reason</h5>
<p>It's a good alternative for comments to indicate the end of program units, especially if they are lengthy or nested.</p>
<h5 id="example-bad_66">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">employee_api</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">employee_by_id</span> <span class="p">(</span><span class="n">in_employee_id</span> <span class="k">in</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">employee</span><span class="o">%</span><span class="n">rowtype</span> <span class="k">is</span>
      <span class="n">r_employee</span> <span class="n">employee</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="k">select</span> <span class="o">*</span>
        <span class="k">into</span> <span class="n">r_employee</span>
        <span class="k">from</span> <span class="n">employee</span>
       <span class="k">where</span> <span class="n">employee_id</span> <span class="o">=</span> <span class="n">in_employee_id</span><span class="p">;</span>

      <span class="k">return</span> <span class="n">r_employee</span><span class="p">;</span>
   <span class="k">exception</span>
      <span class="k">when</span> <span class="n">no_data_found</span> <span class="k">then</span>
         <span class="k">null</span><span class="p">;</span>
      <span class="k">when</span> <span class="n">too_many_rows</span> <span class="k">then</span>
         <span class="n">raise</span><span class="p">;</span>
   <span class="k">end</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_66">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">employee_api</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">employee_by_id</span> <span class="p">(</span><span class="n">in_employee_id</span> <span class="k">in</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">employee</span><span class="o">%</span><span class="n">rowtype</span> <span class="k">is</span>
      <span class="n">r_employee</span> <span class="n">employee</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="k">select</span> <span class="o">*</span>
        <span class="k">into</span> <span class="n">r_employee</span>
        <span class="k">from</span> <span class="n">employee</span>
       <span class="k">where</span> <span class="n">employee_id</span> <span class="o">=</span> <span class="n">in_employee_id</span><span class="p">;</span>

      <span class="k">return</span> <span class="n">r_employee</span><span class="p">;</span>
   <span class="k">exception</span>
      <span class="k">when</span> <span class="n">no_data_found</span> <span class="k">then</span>
         <span class="k">null</span><span class="p">;</span>
      <span class="k">when</span> <span class="n">too_many_rows</span> <span class="k">then</span>
         <span class="n">raise</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">employee_by_id</span><span class="p">;</span>
<span class="k">end</span> <span class="n">employee_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-7130-always-use-parameters-or-pull-in-definitions-rather-than-referencing-external-variables-in-a-local-program-unit">G-7130: Always use parameters or pull in definitions rather than referencing external variables in a local program unit.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Maintainability, Reliability, Testability</p>
</div>
<h5 id="reason_67">Reason</h5>
<p>Local procedures and functions offer an excellent way to avoid code redundancy and make your code more readable (and thus more maintainable). Your local program refers, however, an external data structure, i.e., a variable that is declared outside of the local program. Thus, it is acting as a global variable inside the program. </p>
<p>This external dependency is hidden, and may cause problems in the future. You should instead add a parameter to the parameter list of this program and pass the value through the list. This technique makes your program more reusable and avoids scoping problems, i.e. the program unit is less tied to particular variables in the program. In addition, unit encapsulation makes maintenance a lot easier and cheaper.</p>
<h5 id="example-bad_67">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">employee_api</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">calc_salary</span> <span class="p">(</span><span class="n">in_employee_id</span> <span class="k">in</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span> <span class="k">is</span>
      <span class="n">r_employee</span> <span class="n">employee</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>

      <span class="k">function</span> <span class="n">commission</span> <span class="k">return</span> <span class="nb">number</span> <span class="k">is</span>
         <span class="n">l_commission</span> <span class="n">employee</span><span class="p">.</span><span class="n">salary</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">begin</span>
         <span class="k">if</span> <span class="n">r_employee</span><span class="p">.</span><span class="n">commission_pct</span> <span class="k">is</span> <span class="k">not</span> <span class="k">null</span>
         <span class="k">then</span>
            <span class="n">l_commission</span> <span class="p">:</span><span class="o">=</span> <span class="n">r_employee</span><span class="p">.</span><span class="n">salary</span> <span class="o">*</span> <span class="n">r_employee</span><span class="p">.</span><span class="n">commission_pct</span><span class="p">;</span>
         <span class="k">end</span> <span class="k">if</span><span class="p">;</span>

         <span class="k">return</span> <span class="n">l_commission</span><span class="p">;</span>
      <span class="k">end</span> <span class="n">commission</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="k">select</span> <span class="o">*</span>
        <span class="k">into</span> <span class="n">r_employee</span>
        <span class="k">from</span> <span class="n">employee</span>
       <span class="k">where</span> <span class="n">employee_id</span> <span class="o">=</span> <span class="n">in_employee_id</span><span class="p">;</span>

      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">r_employee</span><span class="p">.</span><span class="n">salary</span> <span class="o">+</span> <span class="n">commission</span><span class="p">());</span>
   <span class="k">exception</span>
      <span class="k">when</span> <span class="n">no_data_found</span> <span class="k">then</span>
         <span class="k">null</span><span class="p">;</span>
      <span class="k">when</span> <span class="n">too_many_rows</span> <span class="k">then</span>
         <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">calc_salary</span><span class="p">;</span>
<span class="k">end</span> <span class="n">employee_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_67">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">employee_api</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">calc_salary</span> <span class="p">(</span><span class="n">in_employee_id</span> <span class="k">in</span> <span class="n">employee</span><span class="p">.</span><span class="n">employee_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span> <span class="k">is</span>
      <span class="n">r_employee</span> <span class="n">employee</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>

      <span class="k">function</span> <span class="n">commission</span> <span class="p">(</span><span class="n">in_salary</span>   <span class="k">in</span> <span class="n">employee</span><span class="p">.</span><span class="n">salary</span><span class="o">%</span><span class="k">type</span>
                          <span class="p">,</span><span class="n">in_comm_pct</span> <span class="k">in</span> <span class="n">employee</span><span class="p">.</span><span class="n">commission_pct</span><span class="o">%</span><span class="k">type</span><span class="p">)</span>
         <span class="k">return</span> <span class="nb">number</span> <span class="k">is</span>
         <span class="n">l_commission</span> <span class="n">employee</span><span class="p">.</span><span class="n">salary</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">begin</span>
         <span class="k">if</span> <span class="n">in_comm_pct</span> <span class="k">is</span> <span class="k">not</span> <span class="k">null</span> <span class="k">then</span>
            <span class="n">l_commission</span> <span class="p">:</span><span class="o">=</span> <span class="n">in_salary</span> <span class="o">*</span> <span class="n">in_comm_pct</span><span class="p">;</span>
         <span class="k">end</span> <span class="k">if</span><span class="p">;</span>

         <span class="k">return</span> <span class="n">l_commission</span><span class="p">;</span>
      <span class="k">end</span> <span class="n">commission</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="k">select</span> <span class="o">*</span>
        <span class="k">into</span> <span class="n">r_employee</span>
        <span class="k">from</span> <span class="n">employee</span>
       <span class="k">where</span> <span class="n">employee_id</span> <span class="o">=</span> <span class="n">in_employee_id</span><span class="p">;</span>

      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span>
         <span class="n">r_employee</span><span class="p">.</span><span class="n">salary</span> <span class="o">+</span> <span class="n">commission</span><span class="p">(</span><span class="n">in_salary</span>   <span class="o">=&gt;</span> <span class="n">r_employee</span><span class="p">.</span><span class="n">salary</span>
                                  <span class="p">,</span><span class="n">in_comm_pct</span> <span class="o">=&gt;</span> <span class="n">r_employee</span><span class="p">.</span><span class="n">commission_pct</span><span class="p">)</span>
      <span class="p">);</span>
   <span class="k">exception</span>
      <span class="k">when</span> <span class="n">no_data_found</span> <span class="k">then</span>
         <span class="k">null</span><span class="p">;</span>
      <span class="k">when</span> <span class="n">too_many_rows</span> <span class="k">then</span>
         <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">calc_salary</span><span class="p">;</span>
<span class="k">end</span> <span class="n">employee_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-7140-always-ensure-that-locally-defined-procedures-or-functions-are-referenced">G-7140: Always ensure that locally defined procedures or functions are referenced.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Maintainability, Reliability</p>
</div>
<h5 id="reason_68">Reason</h5>
<p>This can occur as the result of changes to code over time, but you should make sure that this situation does not reflect a problem. And you should remove the declaration to avoid maintenance errors in the future.    </p>
<p>You should go through your programs and remove any part of your code that is no longer used. This is a relatively straightforward process for variables and named constants. Simply execute searches for a variable's name in that variable's scope. If you find that the only place it appears is in its declaration, delete the declaration. </p>
<p>There is never a better time to review all the steps you took, and to understand the reasons you took them, then immediately upon completion of your program. If you wait, you will find it particularly difficult to remember those parts of the program that were needed at one point, but were rendered unnecessary in the end.</p>
<h5 id="example-bad_68">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">my_procedure</span> <span class="k">is</span>
      <span class="k">function</span> <span class="n">my_func</span> <span class="k">return</span> <span class="nb">number</span> <span class="k">is</span>
         <span class="n">k_true</span> <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">begin</span>
         <span class="k">return</span> <span class="n">k_true</span><span class="p">;</span>
      <span class="k">end</span> <span class="n">my_func</span><span class="p">;</span>
   <span class="k">begin</span>
       <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">my_procedure</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_68">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">my_procedure</span> <span class="k">is</span>
      <span class="k">function</span> <span class="n">my_func</span> <span class="k">return</span> <span class="nb">number</span> <span class="k">is</span>
         <span class="n">k_true</span> <span class="n">constant</span> <span class="nb">integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">begin</span>
         <span class="k">return</span> <span class="n">k_true</span><span class="p">;</span>
      <span class="k">end</span> <span class="n">my_func</span><span class="p">;</span>
   <span class="k">begin</span>
       <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">my_func</span><span class="p">());</span>
   <span class="k">end</span> <span class="n">my_procedure</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-7150-try-to-remove-unused-parameters">G-7150: Try to remove unused parameters.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Efficiency, Maintainability</p>
</div>
<h5 id="reason_69">Reason</h5>
<p>You should go through your programs and remove any partameter that is no longer used.</p>
<h5 id="example-bad_69">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">department_api</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">name_by_id</span> <span class="p">(</span><span class="n">in_department_id</span> <span class="k">in</span> <span class="n">department</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span>
                       <span class="p">,</span><span class="n">in_manager_id</span>    <span class="k">in</span> <span class="n">department</span><span class="p">.</span><span class="n">manager_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">department</span><span class="p">.</span><span class="n">department_name</span><span class="o">%</span><span class="k">type</span> <span class="k">is</span>
      <span class="n">l_department_name</span> <span class="n">department</span><span class="p">.</span><span class="n">department_name</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="o">&lt;&lt;</span><span class="n">find_department</span><span class="o">&gt;&gt;</span>
      <span class="k">begin</span>
         <span class="k">select</span> <span class="n">department_name</span>
           <span class="k">into</span> <span class="n">l_department_name</span>
           <span class="k">from</span> <span class="n">department</span>
          <span class="k">where</span> <span class="n">department_id</span> <span class="o">=</span> <span class="n">in_department_id</span><span class="p">;</span>
      <span class="k">exception</span>
         <span class="k">when</span> <span class="n">no_data_found</span> <span class="k">or</span> <span class="n">too_many_rows</span> <span class="k">then</span> 
            <span class="n">l_department_name</span> <span class="p">:</span><span class="o">=</span> <span class="k">null</span><span class="p">;</span>
      <span class="k">end</span> <span class="n">find_department</span><span class="p">;</span>

      <span class="k">return</span> <span class="n">l_department_name</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">name_by_id</span><span class="p">;</span>
<span class="k">end</span> <span class="n">department_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_69">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">department_api</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">name_by_id</span> <span class="p">(</span><span class="n">in_department_id</span> <span class="k">in</span> <span class="n">department</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">department</span><span class="p">.</span><span class="n">department_name</span><span class="o">%</span><span class="k">type</span> <span class="k">is</span>
      <span class="n">l_department_name</span> <span class="n">department</span><span class="p">.</span><span class="n">department_name</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="o">&lt;&lt;</span><span class="n">find_department</span><span class="o">&gt;&gt;</span>
      <span class="k">begin</span>
         <span class="k">select</span> <span class="n">department_name</span>
           <span class="k">into</span> <span class="n">l_department_name</span>
           <span class="k">from</span> <span class="n">department</span>
          <span class="k">where</span> <span class="n">department_id</span> <span class="o">=</span> <span class="n">in_department_id</span><span class="p">;</span>
      <span class="k">exception</span>
         <span class="k">when</span> <span class="n">no_data_found</span> <span class="k">or</span> <span class="n">too_many_rows</span> <span class="k">then</span> 
            <span class="n">l_department_name</span> <span class="p">:</span><span class="o">=</span> <span class="k">null</span><span class="p">;</span>
      <span class="k">end</span> <span class="n">find_department</span><span class="p">;</span>

      <span class="k">return</span> <span class="n">l_department_name</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">name_by_id</span><span class="p">;</span>
<span class="k">end</span> <span class="n">department_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="packages">Packages</h3>
<h4 id="g-7210-try-to-keep-your-packages-small-include-only-few-procedures-and-functions-that-are-used-in-the-same-context">G-7210: Try to keep your packages small. Include only few procedures and functions that are used in the same context.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Efficiency, Maintainability</p>
</div>
<h5 id="reason_70">Reason</h5>
<p>The entire package is loaded into memory when the package is called the first time. To optimize memory consumption and keep load time small packages should be kept small but include components that are used together.</p>
<h4 id="g-7220-always-use-forward-declaration-for-private-functions-and-procedures">G-7220: Always use forward declaration for private functions and procedures.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Changeability</p>
</div>
<h5 id="reason_71">Reason</h5>
<p>Having forward declarations allows you to order the functions and procedures of the package in a reasonable way. </p>
<h5 id="example-bad_70">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">department_api</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">del</span> <span class="p">(</span><span class="n">in_department_id</span> <span class="k">in</span> <span class="n">department</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">);</span>
<span class="k">end</span> <span class="n">department_api</span><span class="p">;</span>
<span class="o">/</span>

<span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">department_api</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">does_exist</span> <span class="p">(</span><span class="n">in_department_id</span> <span class="k">in</span> <span class="n">department</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span>
      <span class="k">return</span> <span class="nb">boolean</span> <span class="k">is</span>
      <span class="n">l_return</span> <span class="n">pls_integer</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="o">&lt;&lt;</span><span class="n">check_row_exists</span><span class="o">&gt;&gt;</span>
      <span class="k">begin</span> 
         <span class="k">select</span> <span class="mi">1</span>
           <span class="k">into</span> <span class="n">l_return</span>
           <span class="k">from</span> <span class="n">department</span>
          <span class="k">where</span> <span class="n">department_id</span> <span class="o">=</span> <span class="n">in_department_id</span><span class="p">;</span>
      <span class="k">exception</span>
         <span class="k">when</span> <span class="n">no_data_found</span> <span class="k">or</span> <span class="n">too_many_rows</span> <span class="k">then</span> 
            <span class="n">l_return</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">end</span> <span class="n">check_row_exists</span><span class="p">;</span>

      <span class="k">return</span> <span class="n">l_return</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">does_exist</span><span class="p">;</span>

   <span class="k">procedure</span> <span class="n">del</span> <span class="p">(</span><span class="n">in_department_id</span> <span class="k">in</span> <span class="n">department</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="k">if</span> <span class="n">does_exist</span><span class="p">(</span><span class="n">in_department_id</span><span class="p">)</span> <span class="k">then</span>
        <span class="k">null</span><span class="p">;</span>
      <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">del</span><span class="p">;</span>
<span class="k">end</span> <span class="n">department_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_70">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">department_api</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">del</span> <span class="p">(</span><span class="n">in_department_id</span> <span class="k">in</span> <span class="n">department</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">);</span>
<span class="k">end</span> <span class="n">department_api</span><span class="p">;</span>
<span class="o">/</span>

<span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">department_api</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">does_exist</span> <span class="p">(</span><span class="n">in_department_id</span> <span class="k">in</span> <span class="n">department</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span>
      <span class="k">return</span> <span class="nb">boolean</span><span class="p">;</span>

   <span class="k">procedure</span> <span class="n">del</span> <span class="p">(</span><span class="n">in_department_id</span> <span class="k">in</span> <span class="n">department</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="k">if</span> <span class="n">does_exist</span><span class="p">(</span><span class="n">in_department_id</span><span class="p">)</span> <span class="k">then</span>
        <span class="k">null</span><span class="p">;</span>
      <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">del</span><span class="p">;</span>

   <span class="k">function</span> <span class="n">does_exist</span> <span class="p">(</span><span class="n">in_department_id</span> <span class="k">in</span> <span class="n">department</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span>
      <span class="k">return</span> <span class="nb">boolean</span> <span class="k">is</span>
      <span class="n">l_return</span>          <span class="n">pls_integer</span><span class="p">;</span>
      <span class="n">k_exists</span>          <span class="n">constant</span> <span class="n">pls_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="n">k_something_wrong</span> <span class="n">constant</span> <span class="n">pls_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="o">&lt;&lt;</span><span class="n">check_row_exists</span><span class="o">&gt;&gt;</span>
      <span class="k">begin</span> 
         <span class="k">select</span> <span class="n">k_exists</span>
           <span class="k">into</span> <span class="n">l_return</span>
           <span class="k">from</span> <span class="n">department</span>
          <span class="k">where</span> <span class="n">department_id</span> <span class="o">=</span> <span class="n">in_department_id</span><span class="p">;</span>
      <span class="k">exception</span> 
         <span class="k">when</span> <span class="n">no_data_found</span> <span class="k">or</span> <span class="n">too_many_rows</span> <span class="k">then</span>
            <span class="n">l_return</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_something_wrong</span><span class="p">;</span>
      <span class="k">end</span> <span class="n">check_row_exists</span><span class="p">;</span>

      <span class="k">return</span> <span class="n">l_return</span> <span class="o">=</span> <span class="n">k_exists</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">does_exist</span><span class="p">;</span>
<span class="k">end</span> <span class="n">department_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-7230-avoid-declaring-global-variables-public">G-7230: Avoid declaring global variables public.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Reliability</p>
</div>
<h5 id="reason_72">Reason</h5>
<p>You should always declare package-level data inside the package body. You can then define "get and set" methods (functions and procedures, respectively) in the package specification to provide controlled access to that data. By doing so you can guarantee data integrity, you can change your data structure implementation, and also track access to those data structures. </p>
<p>Data structures (scalar variables, collections, cursors) declared in the package specification (not within any specific program) can be referenced directly by any program running in a session with EXECUTE rights to the package. </p>
<p>Instead, declare all package-level data in the package body and provide "get and set" methods - a function to get the value and a procedure to set the value - in the package specification. Developers then can access the data using these methods - and will automatically follow all rules you set upon data modification.</p>
<h5 id="example-bad_71">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">employee_api</span> <span class="k">as</span>
   <span class="n">k_min_increase</span> <span class="n">constant</span> <span class="n">types</span><span class="p">.</span><span class="n">sal_increase_type</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="p">;</span>
   <span class="n">k_max_increase</span> <span class="n">constant</span> <span class="n">types</span><span class="p">.</span><span class="n">sal_increase_type</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">;</span>
   <span class="n">g_salary_increase</span> <span class="n">types</span><span class="p">.</span><span class="n">sal_increase_type</span> <span class="p">:</span><span class="o">=</span> <span class="n">k_min_increase</span><span class="p">;</span>

   <span class="k">procedure</span> <span class="n">set_salary_increase</span> <span class="p">(</span><span class="n">in_increase</span> <span class="k">in</span> <span class="n">types</span><span class="p">.</span><span class="n">sal_increase_type</span><span class="p">);</span>
   <span class="k">function</span> <span class="n">salary_increase</span> <span class="k">return</span> <span class="n">types</span><span class="p">.</span><span class="n">sal_increase_type</span><span class="p">;</span>
<span class="k">end</span> <span class="n">employee_api</span><span class="p">;</span>
<span class="o">/</span>

<span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">employee_api</span> <span class="k">as</span>
   <span class="k">procedure</span> <span class="n">set_salary_increase</span> <span class="p">(</span><span class="n">in_increase</span> <span class="k">in</span> <span class="n">types</span><span class="p">.</span><span class="n">sal_increase_type</span><span class="p">)</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="n">g_salary_increase</span> <span class="p">:</span><span class="o">=</span> <span class="n">greatest</span><span class="p">(</span><span class="n">least</span><span class="p">(</span><span class="n">in_increase</span><span class="p">,</span><span class="n">k_max_increase</span><span class="p">)</span>
                                   <span class="p">,</span><span class="n">k_min_increase</span><span class="p">);</span>
   <span class="k">end</span> <span class="n">set_salary_increase</span><span class="p">;</span>

   <span class="k">function</span> <span class="n">salary_increase</span> <span class="k">return</span> <span class="n">types</span><span class="p">.</span><span class="n">sal_increase_type</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="k">return</span> <span class="n">g_salary_increase</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">salary_increase</span><span class="p">;</span>
<span class="k">end</span> <span class="n">employee_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_71">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">employee_api</span> <span class="k">as</span>
   <span class="k">procedure</span> <span class="n">set_salary_increase</span> <span class="p">(</span><span class="n">in_increase</span> <span class="k">in</span> <span class="n">types</span><span class="p">.</span><span class="n">sal_increase_type</span><span class="p">);</span>
   <span class="k">function</span> <span class="n">salary_increase</span> <span class="k">return</span> <span class="n">types</span><span class="p">.</span><span class="n">sal_increase_type</span><span class="p">;</span>
<span class="k">end</span> <span class="n">employee_api</span><span class="p">;</span>
<span class="o">/</span>

<span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">employee_api</span> <span class="k">as</span>
   <span class="n">g_salary_increase</span> <span class="n">types</span><span class="p">.</span><span class="n">sal_increase_type</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>

   <span class="k">procedure</span> <span class="n">init</span><span class="p">;</span>

   <span class="k">procedure</span> <span class="n">set_salary_increase</span> <span class="p">(</span><span class="n">in_increase</span> <span class="k">in</span> <span class="n">types</span><span class="p">.</span><span class="n">sal_increase_type</span><span class="p">)</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="n">g_salary_increase</span> <span class="p">:</span><span class="o">=</span> <span class="n">greatest</span><span class="p">(</span><span class="n">least</span><span class="p">(</span><span class="n">in_increase</span>
                                         <span class="p">,</span><span class="n">constants</span><span class="p">.</span><span class="n">max_salary_increase</span><span class="p">())</span>
                                   <span class="p">,</span><span class="n">constants</span><span class="p">.</span><span class="n">min_salary_increase</span><span class="p">());</span>
   <span class="k">end</span> <span class="n">set_salary_increase</span><span class="p">;</span>

   <span class="k">function</span> <span class="n">salary_increase</span> <span class="k">return</span> <span class="n">types</span><span class="p">.</span><span class="n">sal_increase_type</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="k">return</span> <span class="n">g_salary_increase</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">salary_increase</span><span class="p">;</span>

   <span class="k">procedure</span> <span class="n">init</span>
   <span class="k">is</span>
   <span class="k">begin</span>
      <span class="n">g_salary_increase</span> <span class="p">:</span><span class="o">=</span> <span class="n">constants</span><span class="p">.</span><span class="n">min_salary_increase</span><span class="p">();</span>
   <span class="k">end</span> <span class="n">init</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">init</span><span class="p">();</span>
<span class="k">end</span> <span class="n">employee_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-7240-avoid-using-an-in-out-parameter-as-in-or-out-only">G-7240: Avoid using an IN OUT parameter as IN or OUT only.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Efficiency, Maintainability</p>
</div>
<h5 id="reason_73">Reason</h5>
<p>By showing the mode of parameters, you help the reader. If you do not specify a parameter mode, the default mode is <code>in</code>. Explicitly showing the mode indication of all parameters is a more assertive action than simply taking the default mode. Anyone reviewing the code later will be more confident that you intended the parameter mode to be <code>in</code> / <code>out</code>.</p>
<h5 id="example-bad_72">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">employee_up</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">rcv_emp</span> <span class="p">(</span><span class="n">io_first_name</span>     <span class="k">in</span> <span class="k">out</span> <span class="n">employee</span><span class="p">.</span><span class="n">first_name</span><span class="o">%</span><span class="k">type</span>
                     <span class="p">,</span><span class="n">io_last_name</span>      <span class="k">in</span> <span class="k">out</span> <span class="n">employee</span><span class="p">.</span><span class="n">last_name</span><span class="o">%</span><span class="k">type</span> 
                     <span class="p">,</span><span class="n">io_email</span>          <span class="k">in</span> <span class="k">out</span> <span class="n">employee</span><span class="p">.</span><span class="n">email</span><span class="o">%</span><span class="k">type</span> 
                     <span class="p">,</span><span class="n">io_phone_number</span>   <span class="k">in</span> <span class="k">out</span> <span class="n">employee</span><span class="p">.</span><span class="n">phone_number</span><span class="o">%</span><span class="k">type</span>
                     <span class="p">,</span><span class="n">io_hire_date</span>      <span class="k">in</span> <span class="k">out</span> <span class="n">employee</span><span class="p">.</span><span class="n">hire_date</span><span class="o">%</span><span class="k">type</span> 
                     <span class="p">,</span><span class="n">io_job_id</span>         <span class="k">in</span> <span class="k">out</span> <span class="n">employee</span><span class="p">.</span><span class="n">job_id</span><span class="o">%</span><span class="k">type</span>
                     <span class="p">,</span><span class="n">io_salary</span>         <span class="k">in</span> <span class="k">out</span> <span class="n">employee</span><span class="p">.</span><span class="n">salary</span><span class="o">%</span><span class="k">type</span>
                     <span class="p">,</span><span class="n">io_commission_pct</span> <span class="k">in</span> <span class="k">out</span> <span class="n">employee</span><span class="p">.</span><span class="n">commission_pct</span><span class="o">%</span><span class="k">type</span> 
                     <span class="p">,</span><span class="n">io_manager_id</span>     <span class="k">in</span> <span class="k">out</span> <span class="n">employee</span><span class="p">.</span><span class="n">manager_id</span><span class="o">%</span><span class="k">type</span>
                     <span class="p">,</span><span class="n">io_department_id</span>  <span class="k">in</span> <span class="k">out</span> <span class="n">employee</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span>
                     <span class="p">,</span><span class="n">in_wait</span>                  <span class="nb">integer</span><span class="p">)</span> <span class="k">is</span>
      <span class="n">l_status</span> <span class="n">pls_integer</span><span class="p">;</span>
      <span class="n">k_pipe_name</span> <span class="n">constant</span> <span class="n">string</span><span class="p">(</span><span class="mi">6</span> <span class="nb">char</span><span class="p">)</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;mypipe&#39;</span><span class="p">;</span>
      <span class="n">k_ok</span> <span class="n">constant</span> <span class="n">pls_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="c1">-- receive next message and unpack for each column. </span>
      <span class="n">l_status</span> <span class="p">:</span><span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">receive_message</span><span class="p">(</span><span class="n">pipename</span> <span class="o">=&gt;</span> <span class="n">k_pipe_name</span>
                                               <span class="p">,</span><span class="n">timeout</span>  <span class="o">=&gt;</span> <span class="n">in_wait</span><span class="p">);</span>
      <span class="k">if</span> <span class="n">l_status</span> <span class="o">=</span> <span class="n">k_ok</span> <span class="k">then</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">unpack_message</span> <span class="p">(</span><span class="n">io_first_name</span><span class="p">);</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">unpack_message</span> <span class="p">(</span><span class="n">io_last_name</span><span class="p">);</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">unpack_message</span> <span class="p">(</span><span class="n">io_email</span><span class="p">);</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">unpack_message</span> <span class="p">(</span><span class="n">io_phone_number</span><span class="p">);</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">unpack_message</span> <span class="p">(</span><span class="n">io_hire_date</span><span class="p">);</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">unpack_message</span> <span class="p">(</span><span class="n">io_job_id</span><span class="p">);</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">unpack_message</span> <span class="p">(</span><span class="n">io_salary</span><span class="p">);</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">unpack_message</span> <span class="p">(</span><span class="n">io_commission_pct</span><span class="p">);</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">unpack_message</span> <span class="p">(</span><span class="n">io_manager_id</span><span class="p">);</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">unpack_message</span> <span class="p">(</span><span class="n">io_department_id</span><span class="p">);</span>
      <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">rcv_emp</span><span class="p">;</span>
<span class="k">end</span> <span class="n">employee_up</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_72">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">employee_up</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">rcv_emp</span> <span class="p">(</span><span class="n">out_first_name</span>     <span class="k">out</span> <span class="n">employee</span><span class="p">.</span><span class="n">first_name</span><span class="o">%</span><span class="k">type</span>
                     <span class="p">,</span><span class="n">out_last_name</span>      <span class="k">out</span> <span class="n">employee</span><span class="p">.</span><span class="n">last_name</span><span class="o">%</span><span class="k">type</span> 
                     <span class="p">,</span><span class="n">out_email</span>          <span class="k">out</span> <span class="n">employee</span><span class="p">.</span><span class="n">email</span><span class="o">%</span><span class="k">type</span> 
                     <span class="p">,</span><span class="n">out_phone_number</span>   <span class="k">out</span> <span class="n">employee</span><span class="p">.</span><span class="n">phone_number</span><span class="o">%</span><span class="k">type</span>
                     <span class="p">,</span><span class="n">out_hire_date</span>      <span class="k">out</span> <span class="n">employee</span><span class="p">.</span><span class="n">hire_date</span><span class="o">%</span><span class="k">type</span> 
                     <span class="p">,</span><span class="n">out_job_id</span>         <span class="k">out</span> <span class="n">employee</span><span class="p">.</span><span class="n">job_id</span><span class="o">%</span><span class="k">type</span>
                     <span class="p">,</span><span class="n">out_salary</span>         <span class="k">out</span> <span class="n">employee</span><span class="p">.</span><span class="n">salary</span><span class="o">%</span><span class="k">type</span>
                     <span class="p">,</span><span class="n">out_commission_pct</span> <span class="k">out</span> <span class="n">employee</span><span class="p">.</span><span class="n">commission_pct</span><span class="o">%</span><span class="k">type</span> 
                     <span class="p">,</span><span class="n">out_manager_id</span>     <span class="k">out</span> <span class="n">employee</span><span class="p">.</span><span class="n">manager_id</span><span class="o">%</span><span class="k">type</span>
                     <span class="p">,</span><span class="n">out_department_id</span>  <span class="k">out</span> <span class="n">employee</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span>
                     <span class="p">,</span><span class="n">in_wait</span>            <span class="k">in</span>  <span class="nb">integer</span><span class="p">)</span> <span class="k">is</span>
      <span class="n">l_status</span> <span class="n">pls_integer</span><span class="p">;</span>
      <span class="n">k_pipe_name</span> <span class="n">constant</span> <span class="n">string</span><span class="p">(</span><span class="mi">6</span> <span class="nb">char</span><span class="p">)</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;mypipe&#39;</span><span class="p">;</span>
      <span class="n">k_ok</span> <span class="n">constant</span> <span class="n">pls_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="c1">-- receive next message and unpack for each column. </span>
      <span class="n">l_status</span> <span class="p">:</span><span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">receive_message</span><span class="p">(</span><span class="n">pipename</span> <span class="o">=&gt;</span> <span class="n">k_pipe_name</span>
                                               <span class="p">,</span><span class="n">timeout</span>  <span class="o">=&gt;</span> <span class="n">in_wait</span><span class="p">);</span>
      <span class="k">if</span> <span class="n">l_status</span> <span class="o">=</span> <span class="n">k_ok</span> <span class="k">then</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">unpack_message</span> <span class="p">(</span><span class="n">out_first_name</span><span class="p">);</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">unpack_message</span> <span class="p">(</span><span class="n">out_last_name</span><span class="p">);</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">unpack_message</span> <span class="p">(</span><span class="n">out_email</span><span class="p">);</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">unpack_message</span> <span class="p">(</span><span class="n">out_phone_number</span><span class="p">);</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">unpack_message</span> <span class="p">(</span><span class="n">out_hire_date</span><span class="p">);</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">unpack_message</span> <span class="p">(</span><span class="n">out_job_id</span><span class="p">);</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">unpack_message</span> <span class="p">(</span><span class="n">out_salary</span><span class="p">);</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">unpack_message</span> <span class="p">(</span><span class="n">out_commission_pct</span><span class="p">);</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">unpack_message</span> <span class="p">(</span><span class="n">out_manager_id</span><span class="p">);</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_pipe</span><span class="p">.</span><span class="n">unpack_message</span> <span class="p">(</span><span class="n">out_department_id</span><span class="p">);</span>
      <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">rcv_emp</span><span class="p">;</span>
<span class="k">end</span> <span class="n">employee_up</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-7250-always-use-nocopy-when-appropriate">G-7250: Always use NOCOPY when appropriate</h4>
<h3 id="procedures">Procedures</h3>
<h4 id="g-7310-avoid-standalone-procedures-put-your-procedures-in-packages">G-7310: Avoid standalone procedures – put your procedures in packages.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability</p>
</div>
<h5 id="reason_74">Reason</h5>
<p>Use packages to structure your code, combine procedures and functions which belong together.</p>
<p>Package bodies may be changed and compiled without invalidating other packages. This is major advantage compared to standalone procedures and functions.</p>
<h5 id="example-bad_73">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="k">procedure</span> <span class="n">my_procedure</span> <span class="k">is</span>
<span class="k">begin</span>
   <span class="k">null</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_procedure</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_73">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">my_procedure</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>

<span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">my_procedure</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">my_procedure</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-7320-avoid-using-return-statements-in-a-procedure">G-7320: Avoid using RETURN statements in a PROCEDURE.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Maintainability, Testability</p>
</div>
<h5 id="reason_75">Reason</h5>
<p>Use of the <code>return</code> statement is legal within a procedure in PL/SQL, but it is very similar to a <code>goto</code>, which means you end up with poorly structured code that is hard to debug and maintain. </p>
<p>A good general rule to follow as you write your PL/SQL programs is "one way in and one way out". In other words, there should be just one way to enter or call a program, and there should be one way out, one exit path from a program (or loop) on successful termination. By following this rule, you end up with code that is much easier to trace, debug, and maintain.</p>
<h5 id="example-bad_74">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">my_procedure</span> <span class="k">is</span>
      <span class="n">l_idx</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="n">k_modulo</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="o">&lt;&lt;</span><span class="n">mod7_loop</span><span class="o">&gt;&gt;</span>
      <span class="n">loop</span>
        <span class="k">if</span> <span class="k">mod</span><span class="p">(</span><span class="n">l_idx</span><span class="p">,</span><span class="n">k_modulo</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">then</span>
           <span class="k">return</span><span class="p">;</span>
        <span class="k">end</span> <span class="k">if</span><span class="p">;</span>

        <span class="n">l_idx</span> <span class="p">:</span><span class="o">=</span> <span class="n">l_idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">end</span> <span class="n">loop</span> <span class="n">mod7_loop</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">my_procedure</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_74">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">my_procedure</span> <span class="k">is</span>
      <span class="n">l_idx</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="n">k_modulo</span> <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="o">&lt;&lt;</span><span class="n">mod7_loop</span><span class="o">&gt;&gt;</span>
      <span class="n">loop</span>
        <span class="n">exit</span> <span class="n">mod7_loop</span> <span class="k">when</span> <span class="k">mod</span><span class="p">(</span><span class="n">l_idx</span><span class="p">,</span><span class="n">k_modulo</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

        <span class="n">l_idx</span> <span class="p">:</span><span class="o">=</span> <span class="n">l_idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">end</span> <span class="n">loop</span> <span class="n">mod7_loop</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">my_procedure</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="functions">Functions</h3>
<h4 id="g-7410-avoid-standalone-functions-put-your-functions-in-packages">G-7410: Avoid standalone functions – put your functions in packages.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability</p>
</div>
<h5 id="reason_76">Reason</h5>
<p>Use packages to structure your code, combine procedures and functions which belong together.</p>
<p>Package bodies may be changed and compiled without invalidating other packages. This is major advantage compared to standalone procedures and functions.</p>
<h5 id="example-bad_75">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="k">function</span> <span class="n">my_function</span> <span class="k">return</span> <span class="n">varchar2</span> <span class="k">is</span>
<span class="k">begin</span>
   <span class="k">return</span> <span class="k">null</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_function</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_75">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">my_function</span> <span class="k">return</span> <span class="n">varchar2</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="k">return</span> <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">my_function</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-7420-always-make-the-return-statement-the-last-statement-of-your-function">G-7420: Always make the RETURN statement the last statement of your function.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Maintainability</p>
</div>
<h5 id="reason_77">Reason</h5>
<p>The reader expects the <code>return</code> statement to be the last statement of a function.</p>
<h5 id="example-bad_76">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">my_function</span> <span class="p">(</span><span class="n">in_from</span> <span class="k">in</span> <span class="n">pls_integer</span>
                       <span class="p">,</span> <span class="n">in_to</span>   <span class="k">in</span> <span class="n">pls_integer</span><span class="p">)</span> <span class="k">return</span> <span class="n">pls_integer</span> <span class="k">is</span>
      <span class="n">l_ret</span> <span class="n">pls_integer</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="n">l_ret</span> <span class="p">:</span><span class="o">=</span> <span class="n">in_from</span><span class="p">;</span>
      <span class="o">&lt;&lt;</span><span class="n">for_loop</span><span class="o">&gt;&gt;</span>
      <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">in_from</span> <span class="p">..</span> <span class="n">in_to</span> 
      <span class="n">loop</span>
         <span class="n">l_ret</span> <span class="p">:</span><span class="o">=</span> <span class="n">l_ret</span> <span class="o">+</span> <span class="n">i</span><span class="p">;</span>
         <span class="k">if</span> <span class="n">i</span> <span class="o">=</span> <span class="n">in_to</span> <span class="k">then</span>
            <span class="k">return</span> <span class="n">l_ret</span><span class="p">;</span>
         <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
      <span class="k">end</span> <span class="n">loop</span> <span class="n">for_loop</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">my_function</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_76">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">my_function</span> <span class="p">(</span><span class="n">in_from</span> <span class="k">in</span> <span class="n">pls_integer</span>
                       <span class="p">,</span> <span class="n">in_to</span>   <span class="k">in</span> <span class="n">pls_integer</span><span class="p">)</span> <span class="k">return</span> <span class="n">pls_integer</span> <span class="k">is</span>
      <span class="n">l_ret</span> <span class="n">pls_integer</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="n">l_ret</span> <span class="p">:</span><span class="o">=</span> <span class="n">in_from</span><span class="p">;</span>
      <span class="o">&lt;&lt;</span><span class="n">for_loop</span><span class="o">&gt;&gt;</span>
      <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="n">in_from</span> <span class="p">..</span> <span class="n">in_to</span> 
      <span class="n">loop</span>
         <span class="n">l_ret</span> <span class="p">:</span><span class="o">=</span> <span class="n">l_ret</span> <span class="o">+</span> <span class="n">i</span><span class="p">;</span>
      <span class="k">end</span> <span class="n">loop</span> <span class="n">for_loop</span><span class="p">;</span>
      <span class="k">return</span> <span class="n">l_ret</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">my_function</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-7430-try-to-use-no-more-than-one-return-statement-within-a-function">G-7430: Try to use no more than one RETURN statement within a function.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Will have a medium/potential impact on the maintenance cost.
Maintainability, Testability</p>
</div>
<h5 id="reason_78">Reason</h5>
<p>A function should have a single point of entry as well as a single exit-point.</p>
<h5 id="example-bad_77">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">my_function</span> <span class="p">(</span><span class="n">in_value</span> <span class="k">in</span> <span class="n">pls_integer</span><span class="p">)</span> <span class="k">return</span> <span class="nb">boolean</span> <span class="k">is</span>
      <span class="n">k_yes</span> <span class="n">constant</span> <span class="n">pls_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="k">if</span> <span class="n">in_value</span> <span class="o">=</span> <span class="n">k_yes</span> <span class="k">then</span>
         <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
      <span class="k">else</span>
         <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
      <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">my_function</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-better_5">Example (better)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">my_function</span> <span class="p">(</span><span class="n">in_value</span> <span class="k">in</span> <span class="n">pls_integer</span><span class="p">)</span> <span class="k">return</span> <span class="nb">boolean</span> <span class="k">is</span>
      <span class="n">k_yes</span> <span class="n">constant</span> <span class="n">pls_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="n">l_ret</span> <span class="nb">boolean</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="k">if</span> <span class="n">in_value</span> <span class="o">=</span> <span class="n">k_yes</span> <span class="k">then</span>
         <span class="n">l_ret</span> <span class="p">:</span><span class="o">=</span> <span class="k">true</span><span class="p">;</span>
      <span class="k">else</span>
         <span class="n">l_ret</span> <span class="p">:</span><span class="o">=</span> <span class="k">false</span><span class="p">;</span>
      <span class="k">end</span> <span class="k">if</span><span class="p">;</span>

      <span class="k">return</span> <span class="n">l_ret</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">my_function</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_77">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">my_function</span> <span class="p">(</span><span class="n">in_value</span> <span class="k">in</span> <span class="n">pls_integer</span><span class="p">)</span> <span class="k">return</span> <span class="nb">boolean</span> <span class="k">is</span>
      <span class="n">k_yes</span> <span class="n">constant</span> <span class="n">pls_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="k">return</span> <span class="n">in_value</span> <span class="o">=</span> <span class="n">k_yes</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">my_function</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-7440-never-use-out-parameters-to-return-values-from-a-function">G-7440: Never use OUT parameters to return values from a function.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Reusability</p>
</div>
<h5 id="reason_79">Reason</h5>
<p>A function should return all its data through the RETURN clause. Having an OUT parameter prohibits usage of a function within SQL statements.</p>
<h5 id="example-bad_78">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">my_function</span> <span class="p">(</span><span class="n">out_date</span> <span class="k">out</span> <span class="nb">date</span><span class="p">)</span> <span class="k">return</span> <span class="nb">boolean</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="n">out_date</span> <span class="p">:</span><span class="o">=</span> <span class="n">sysdate</span><span class="p">;</span>
      <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">my_function</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_78">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">my_function</span> <span class="k">return</span> <span class="nb">date</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="k">return</span> <span class="n">sysdate</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">my_function</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-7450-never-return-a-null-value-from-a-boolean-function">G-7450: Never return a NULL value from a BOOLEAN function.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Reliability, Testability</p>
</div>
<h5 id="reason_80">Reason</h5>
<p>If a boolean function returns null, the caller has do deal with it. This makes the usage cumbersome and more error-prone.</p>
<h5 id="example-bad_79">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">my_function</span> <span class="k">return</span> <span class="nb">boolean</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="k">return</span> <span class="k">null</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">my_function</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_79">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">my_package</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">my_function</span> <span class="k">return</span> <span class="nb">boolean</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">my_function</span><span class="p">;</span>
<span class="k">end</span> <span class="n">my_package</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-7460-try-to-define-your-packagedstandalone-function-deterministic-if-appropriate">G-7460: Try to define your packaged/standalone function deterministic if appropriate.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Efficiency</p>
</div>
<h5 id="reason_81">Reason</h5>
<p>A deterministic function (always return same result for identical parameters) which is defined to be deterministic will be executed once per different parameter within a SQL statement whereas if the function is not defined to be deterministic it is executed once per result row.</p>
<h5 id="example-bad_80">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">department_api</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">name_by_id</span> <span class="p">(</span><span class="n">in_department_id</span> <span class="k">in</span> <span class="n">departments</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">departments</span><span class="p">.</span><span class="n">department_name</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
<span class="k">end</span> <span class="n">department_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_80">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">department_api</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">name_by_id</span> <span class="p">(</span><span class="n">in_department_id</span> <span class="k">in</span> <span class="n">departments</span><span class="p">.</span><span class="n">department_id</span><span class="o">%</span><span class="k">type</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">departments</span><span class="p">.</span><span class="n">department_name</span><span class="o">%</span><span class="k">type</span> <span class="k">deterministic</span><span class="p">;</span>
<span class="k">end</span> <span class="n">department_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="oracle-supplied-packages">Oracle Supplied Packages</h3>
<h4 id="g-7510-always-prefix-oracle-supplied-packages-with-owner-schema-name">G-7510: Always prefix ORACLE supplied packages with owner schema name.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Security</p>
</div>
<h5 id="reason_82">Reason</h5>
<p>The signature of oracle-supplied packages is well known and therefore it is quite easy to provide packages with the same name as those from oracle doing something completely different without you noticing it.</p>
<h5 id="example-bad_81">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">k_hello_world</span> <span class="n">constant</span> <span class="n">string</span><span class="p">(</span><span class="mi">11</span> <span class="nb">char</span><span class="p">)</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;Hello World&#39;</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">k_hello_world</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_81">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">k_hello_world</span> <span class="n">constant</span> <span class="n">string</span><span class="p">(</span><span class="mi">11</span> <span class="nb">char</span><span class="p">)</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;Hello World&#39;</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">sys</span><span class="p">.</span><span class="n">dbms_output</span><span class="p">.</span><span class="n">put_line</span><span class="p">(</span><span class="n">k_hello_world</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="object-types">Object Types</h3>
<p>There are no object type-specific recommendations to be defined at the time of writing. </p>
<h3 id="triggers">Triggers</h3>
<h4 id="g-7710-avoid-cascading-triggers">G-7710: Avoid cascading triggers.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Maintainability, Testability</p>
</div>
<h5 id="reason_83">Reason</h5>
<p>Having triggers that act on other tables in a way that causes triggers on that table to fire lead to obscure behavior. </p>
<p>Note that the example below is an anti-pattern as Flashback Data Archive should be used for row history instead of history tables.</p>
<h5 id="example-bad_82">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="k">trigger</span> <span class="n">dept_br_u</span>
<span class="k">before</span> <span class="k">update</span> <span class="k">on</span> <span class="n">department</span> <span class="k">for</span> <span class="k">each</span> <span class="k">row</span>
<span class="k">begin</span>
   <span class="k">insert</span> <span class="k">into</span> <span class="n">department_hist</span> <span class="p">(</span><span class="n">department_id</span>
                                <span class="p">,</span><span class="n">department_name</span>
                                <span class="p">,</span><span class="n">manager_id</span>
                                <span class="p">,</span><span class="n">location_id</span>
                                <span class="p">,</span><span class="n">modification_date</span><span class="p">)</span> 
        <span class="k">values</span> <span class="p">(:</span><span class="k">old</span><span class="p">.</span><span class="n">department_id</span>
               <span class="p">,:</span><span class="k">old</span><span class="p">.</span><span class="n">department_name</span>
               <span class="p">,:</span><span class="k">old</span><span class="p">.</span><span class="n">manager_id</span>
               <span class="p">,:</span><span class="k">old</span><span class="p">.</span><span class="n">location_id</span>
               <span class="p">,</span><span class="n">sysdate</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span> 
<span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="k">trigger</span> <span class="n">dept_hist_br_i</span>
<span class="k">before</span> <span class="k">insert</span> <span class="k">on</span> <span class="n">department_hist</span> <span class="k">for</span> <span class="k">each</span> <span class="k">row</span>
<span class="k">begin</span>
   <span class="k">insert</span> <span class="k">into</span> <span class="n">department_log</span> <span class="p">(</span><span class="n">department_id</span>
                               <span class="p">,</span><span class="n">department_name</span>
                               <span class="p">,</span><span class="n">modification_date</span><span class="p">)</span> 
                        <span class="k">values</span> <span class="p">(:</span><span class="k">new</span><span class="p">.</span><span class="n">department_id</span>
                               <span class="p">,:</span><span class="k">new</span><span class="p">.</span><span class="n">department_name</span>
                               <span class="p">,</span><span class="n">sysdate</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_82">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="k">trigger</span> <span class="n">dept_br_u</span>
<span class="k">before</span> <span class="k">update</span> <span class="k">on</span> <span class="n">department</span> <span class="k">for</span> <span class="k">each</span> <span class="k">row</span>
<span class="k">begin</span>
   <span class="k">insert</span> <span class="k">into</span> <span class="n">department_hist</span> <span class="p">(</span><span class="n">department_id</span>
                                <span class="p">,</span><span class="n">department_name</span>
                                <span class="p">,</span><span class="n">manager_id</span>
                                <span class="p">,</span><span class="n">location_id</span>
                                <span class="p">,</span><span class="n">modification_date</span><span class="p">)</span> 
        <span class="k">values</span> <span class="p">(:</span><span class="k">old</span><span class="p">.</span><span class="n">department_id</span>
               <span class="p">,:</span><span class="k">old</span><span class="p">.</span><span class="n">department_name</span>
               <span class="p">,:</span><span class="k">old</span><span class="p">.</span><span class="n">manager_id</span>
               <span class="p">,:</span><span class="k">old</span><span class="p">.</span><span class="n">location_id</span>
               <span class="p">,</span><span class="n">sysdate</span><span class="p">);</span>

   <span class="k">insert</span> <span class="k">into</span> <span class="n">department_log</span> <span class="p">(</span><span class="n">department_id</span>
                               <span class="p">,</span><span class="n">department_name</span>
                               <span class="p">,</span><span class="n">modification_date</span><span class="p">)</span> 
                        <span class="k">values</span> <span class="p">(:</span><span class="k">old</span><span class="p">.</span><span class="n">department_id</span>
                               <span class="p">,:</span><span class="k">old</span><span class="p">.</span><span class="n">department_name</span>
                               <span class="p">,</span><span class="n">sysdate</span><span class="p">);</span>

<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-7720-avoid-triggers-for-business-logic">G-7720: Avoid triggers for business logic</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Efficiency, Maintainability</p>
</div>
<h5 id="reason_84">Reason</h5>
<p>When business logic is part of a trigger, it becomes obfuscated. In general, maintainers don't look for code in a trigger.
More importantly, if the code on the trigger does SQL or worse PL/SQL access, this becomes a context switch or even a nested loop that could significantly affect performance. </p>
<h4 id="g-7730-if-using-triggers-use-compound-triggers">G-7730: If using triggers, use compound triggers</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Efficiency, Maintainability</p>
</div>
<h5 id="reason_85">Reason</h5>
<p>A single trigger is better than several</p>
<h5 id="example-bad_83">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="k">trigger</span> <span class="n">dept_i_trg</span>
<span class="k">before</span> <span class="k">insert</span>
<span class="k">on</span> <span class="n">dept</span>
<span class="k">for</span> <span class="k">each</span> <span class="k">row</span>
<span class="k">begin</span>
  <span class="p">:</span><span class="k">new</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">dept_seq</span><span class="p">.</span><span class="n">nextval</span><span class="p">;</span>
  <span class="p">:</span><span class="k">new</span><span class="p">.</span><span class="n">created_on</span> <span class="p">:</span><span class="o">=</span> <span class="n">sysdate</span><span class="p">;</span>
  <span class="p">:</span><span class="k">new</span><span class="p">.</span><span class="n">created_by</span> <span class="p">:</span><span class="o">=</span> <span class="n">sys_context</span><span class="p">(</span><span class="s1">&#39;userenv&#39;</span><span class="p">,</span><span class="s1">&#39;session_user&#39;</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
<span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="k">trigger</span> <span class="n">dept_u_trg</span>
<span class="k">before</span> <span class="k">update</span>
<span class="k">on</span> <span class="n">dept</span>
<span class="k">for</span> <span class="k">each</span> <span class="k">row</span>
<span class="k">begin</span>
  <span class="p">:</span><span class="k">new</span><span class="p">.</span><span class="n">updated_on</span> <span class="p">:</span><span class="o">=</span> <span class="n">sysdate</span><span class="p">;</span>
  <span class="p">:</span><span class="k">new</span><span class="p">.</span><span class="n">updated_by</span> <span class="p">:</span><span class="o">=</span> <span class="n">sys_context</span><span class="p">(</span><span class="s1">&#39;userenv&#39;</span><span class="p">,</span><span class="s1">&#39;session_user&#39;</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_83">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="k">trigger</span> <span class="n">dept_ui_trg</span>
<span class="k">before</span> <span class="k">insert</span> <span class="k">or</span> <span class="k">update</span>
<span class="k">on</span> <span class="n">dept</span>
<span class="k">for</span> <span class="k">each</span> <span class="k">row</span>
<span class="k">begin</span>
  <span class="k">if</span> <span class="n">inserting</span> <span class="k">then</span>
    <span class="p">:</span><span class="k">new</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">dept_seq</span><span class="p">.</span><span class="n">nextval</span><span class="p">;</span>
    <span class="p">:</span><span class="k">new</span><span class="p">.</span><span class="n">created_on</span> <span class="p">:</span><span class="o">=</span> <span class="n">sysdate</span><span class="p">;</span>
    <span class="p">:</span><span class="k">new</span><span class="p">.</span><span class="n">created_by</span> <span class="p">:</span><span class="o">=</span> <span class="n">sys_context</span><span class="p">(</span><span class="s1">&#39;userenv&#39;</span><span class="p">,</span><span class="s1">&#39;session_user&#39;</span><span class="p">);</span>
  <span class="k">elsif</span> <span class="n">updating</span> <span class="k">then</span>
    <span class="p">:</span><span class="k">new</span><span class="p">.</span><span class="n">updated_on</span> <span class="p">:</span><span class="o">=</span> <span class="n">sysdate</span><span class="p">;</span>
    <span class="p">:</span><span class="k">new</span><span class="p">.</span><span class="n">updated_by</span> <span class="p">:</span><span class="o">=</span> <span class="n">sys_context</span><span class="p">(</span><span class="s1">&#39;userenv&#39;</span><span class="p">,</span><span class="s1">&#39;session_user&#39;</span><span class="p">);</span>
  <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="sequences">Sequences</h3>
<h4 id="g-7810-never-use-sql-inside-plsql-to-read-sequence-numbers-or-sysdate">G-7810: Never use SQL inside PL/SQL to read sequence numbers (or SYSDATE).</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Efficiency, Maintainability</p>
</div>
<h5 id="reason_86">Reason</h5>
<p>Since ORACLE 11g it is no longer needed to use a SELECT statement to read a sequence (which would imply a context switch).</p>
<h5 id="example-bad_84">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_sequence_number</span> <span class="n">employees</span><span class="p">.</span><span class="n">emloyee_id</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">select</span> <span class="n">employees_seq</span><span class="p">.</span><span class="n">nextval</span>
     <span class="k">into</span> <span class="n">l_sequence_number</span>
     <span class="k">from</span> <span class="n">dual</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_84">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_sequence_number</span> <span class="n">employees</span><span class="p">.</span><span class="n">emloyee_id</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">l_sequence_number</span> <span class="p">:</span><span class="o">=</span> <span class="n">employees_seq</span><span class="p">.</span><span class="n">nextval</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h2 id="patterns">Patterns</h2>
<h3 id="checking-the-number-of-rows">Checking the Number of Rows</h3>
<h4 id="g-8110-never-use-select-count-if-you-are-only-interested-in-the-existence-of-a-row">G-8110: Never use SELECT COUNT(*) if you are only interested in the existence of a row.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Efficiency</p>
</div>
<h5 id="reason_87">Reason</h5>
<p>If you do a select count(*), all rows will be read according to the where clause even if only the availability of data is of interest. This could have a big performance impact.</p>
<p>If we do a select count(*) where rownum = 1 there is also some overhead as there are two context switches between the PL/SQL and SQL engines.</p>
<p>See the following example for a better solution.</p>
<h5 id="example-bad_85">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_count</span>  <span class="n">pls_integer</span><span class="p">;</span>
   <span class="n">k_zero</span>   <span class="n">constant</span> <span class="n">simple_integer</span> <span class="p">:</span><span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="n">k_salary</span> <span class="n">constant</span> <span class="n">employee</span><span class="p">.</span><span class="n">salary</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="mi">5000</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
     <span class="k">into</span> <span class="n">l_count</span>
     <span class="k">from</span> <span class="n">employee</span>
    <span class="k">where</span> <span class="n">salary</span> <span class="o">&lt;</span> <span class="n">k_salary</span><span class="p">;</span>
    <span class="k">if</span> <span class="n">l_count</span> <span class="o">&gt;</span> <span class="n">k_zero</span> <span class="k">then</span>
       <span class="o">&lt;&lt;</span><span class="n">emp_loop</span><span class="o">&gt;&gt;</span>
       <span class="k">for</span> <span class="n">r_emp</span> <span class="k">in</span> <span class="p">(</span><span class="k">select</span> <span class="n">employee_id</span>
                       <span class="k">from</span> <span class="n">employee</span><span class="p">)</span>
       <span class="n">loop</span>
          <span class="k">if</span> <span class="n">r_emp</span><span class="p">.</span><span class="n">salary</span> <span class="o">&lt;</span> <span class="n">k_salary</span> <span class="k">then</span>
             <span class="n">my_package</span><span class="p">.</span><span class="n">my_proc</span><span class="p">(</span><span class="n">in_employee_id</span> <span class="o">=&gt;</span> <span class="n">r_emp</span><span class="p">.</span><span class="n">employee_id</span><span class="p">);</span> 
          <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
       <span class="k">end</span> <span class="n">loop</span> <span class="n">emp_loop</span><span class="p">;</span>
    <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_85">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">k_salary</span> <span class="n">constant</span> <span class="n">employee</span><span class="p">.</span><span class="n">salary</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="mi">5000</span><span class="p">;</span>
<span class="k">begin</span>
    <span class="o">&lt;&lt;</span><span class="n">emp_loop</span><span class="o">&gt;&gt;</span>
    <span class="k">for</span> <span class="n">r_emp</span> <span class="k">in</span> <span class="p">(</span><span class="k">select</span> <span class="n">e1</span><span class="p">.</span><span class="n">employee_id</span>
                    <span class="k">from</span> <span class="n">employee</span> <span class="n">e1</span>
                   <span class="k">where</span> <span class="k">exists</span><span class="p">(</span><span class="k">select</span> <span class="n">e2</span><span class="p">.</span><span class="n">salary</span>
                                  <span class="k">from</span> <span class="n">employee</span> <span class="n">e2</span>
                                 <span class="k">where</span> <span class="n">e2</span><span class="p">.</span><span class="n">salary</span> <span class="o">&lt;</span> <span class="n">k_salary</span><span class="p">))</span>
    <span class="n">loop</span>
       <span class="n">my_package</span><span class="p">.</span><span class="n">my_proc</span><span class="p">(</span><span class="n">in_employee_id</span> <span class="o">=&gt;</span> <span class="n">r_emp</span><span class="p">.</span><span class="n">employee_id</span><span class="p">);</span> 
    <span class="k">end</span> <span class="n">loop</span> <span class="n">emp_loop</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h4 id="g-8120-never-check-existence-of-a-row-to-decide-whether-to-create-it-or-not">G-8120: Never check existence of a row to decide whether to create it or not.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Efficiency, Reliability</p>
</div>
<h5 id="reason_88">Reason</h5>
<p>The result of an existence check is a snapshot of the current situation. You never know whether in the time between the check and the (insert) action someone else has decided to create a row with the values you checked. Therefore, you should only rely on constraints when it comes to preventioin of duplicate records.</p>
<h5 id="example-bad_86">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">department_api</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">ins</span> <span class="p">(</span><span class="n">in_r_department</span> <span class="k">in</span> <span class="n">department</span><span class="o">%</span><span class="n">rowtype</span><span class="p">)</span> <span class="k">is</span>
      <span class="n">l_count</span> <span class="n">pls_integer</span><span class="p">;</span>
   <span class="k">begin</span>
      <span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
        <span class="k">into</span> <span class="n">l_count</span>
        <span class="k">from</span> <span class="n">department</span>
       <span class="k">where</span> <span class="n">department_id</span> <span class="o">=</span> <span class="n">in_r_department</span><span class="p">.</span><span class="n">department_id</span><span class="p">;</span>

       <span class="k">if</span> <span class="n">l_count</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">then</span>
          <span class="k">insert</span> <span class="k">into</span> <span class="n">department</span>
               <span class="k">values</span> <span class="n">in_r_department</span><span class="p">;</span>
       <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">ins</span><span class="p">;</span>
<span class="k">end</span> <span class="n">department_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_86">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">department_api</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">ins</span> <span class="p">(</span><span class="n">in_r_department</span> <span class="k">in</span> <span class="n">department</span><span class="o">%</span><span class="n">rowtype</span><span class="p">)</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="k">insert</span> <span class="k">into</span> <span class="n">department</span>
           <span class="k">values</span> <span class="n">in_r_department</span><span class="p">;</span>
   <span class="k">exception</span>
      <span class="k">when</span> <span class="n">dup_val_on_index</span> <span class="k">then</span> <span class="k">null</span><span class="p">;</span> <span class="c1">-- handle exception</span>
   <span class="k">end</span> <span class="n">ins</span><span class="p">;</span>
<span class="k">end</span> <span class="n">department_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="access-objects-of-foreign-application-schemas">Access objects of foreign application schemas</h3>
<h4 id="g-8210-always-use-synonyms-when-accessing-objects-of-another-application-schema">G-8210: Always use synonyms when accessing objects of another application schema.</h4>
<div class="admonition warning">
<p class="admonition-title">Major</p>
<p>Changeability, Maintainability</p>
</div>
<h5 id="reason_89">Reason</h5>
<p>If a connection is needed to a table that is placed in a foreign schema, using synonyms is a good choice. If there are structural changes to that table (e.g. the table name changes or the table changes into another schema) only the synonym has to be changed no changes to the package are needed (single point of change). If you only have read access for a table inside another schema, or there is another reason that does not allow you to change data in this table, you can switch the synonym to a table in your own schema.  This is also good practice for testers working on test systems.</p>
<h5 id="example-bad_87">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">declare</span>
   <span class="n">l_product_name</span> <span class="n">oe</span><span class="p">.</span><span class="n">product</span><span class="p">.</span><span class="n">product_name</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="n">k_price</span> <span class="n">constant</span> <span class="n">oe</span><span class="p">.</span><span class="n">product</span><span class="p">.</span><span class="n">list_price</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">select</span> <span class="n">product_name</span>
     <span class="k">into</span> <span class="n">l_product_name</span>
     <span class="k">from</span> <span class="n">oe</span><span class="p">.</span><span class="n">product</span> 
    <span class="k">where</span> <span class="n">list_price</span> <span class="o">&gt;</span> <span class="n">k_price</span><span class="p">;</span>
<span class="k">exception</span>
   <span class="k">when</span> <span class="n">no_data_found</span> <span class="k">then</span>
      <span class="k">null</span><span class="p">;</span> <span class="c1">-- handle_no_data_found;</span>
   <span class="k">when</span> <span class="n">too_many_rows</span> <span class="k">then</span>
      <span class="k">null</span><span class="p">;</span> <span class="c1">-- handle_too_many_rows;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_87">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="n">synonym</span> <span class="n">oe_product</span> <span class="k">for</span> <span class="n">oe</span><span class="p">.</span><span class="n">product</span><span class="p">;</span>

<span class="k">declare</span>
   <span class="n">l_product_name</span> <span class="n">oe_product</span><span class="p">.</span><span class="n">product_name</span><span class="o">%</span><span class="k">type</span><span class="p">;</span>
   <span class="n">k_price</span> <span class="n">constant</span> <span class="n">oe_product</span><span class="p">.</span><span class="n">list_price</span><span class="o">%</span><span class="k">type</span> <span class="p">:</span><span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="k">select</span> <span class="n">product_name</span>
     <span class="k">into</span> <span class="n">l_product_name</span>
     <span class="k">from</span> <span class="n">oe_product</span> 
    <span class="k">where</span> <span class="n">list_price</span> <span class="o">&gt;</span> <span class="n">k_price</span><span class="p">;</span>
<span class="k">exception</span>
   <span class="k">when</span> <span class="n">no_data_found</span> <span class="k">then</span>
      <span class="k">null</span><span class="p">;</span> <span class="c1">-- handle_no_data_found;</span>
   <span class="k">when</span> <span class="n">too_many_rows</span> <span class="k">then</span>
      <span class="k">null</span><span class="p">;</span> <span class="c1">-- handle_too_many_rows;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="validating-input-parameter-size">Validating input parameter size</h3>
<h4 id="g-8310-always-validate-input-parameter-size-by-assigning-the-parameter-to-a-size-limited-variable-in-the-declaration-section-of-program-unit">G-8310: Always validate input parameter size by assigning the parameter to a size limited variable in the declaration section of program unit.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Maintainability, Reliability, Reusability, Testability</p>
</div>
<h5 id="reason_90">Reason</h5>
<p>This technique raises an error (value_error) which may not be handled in the called program unit. This is the right way to do it, as the error is not within this unit but when calling it, so the caller should handle the error.</p>
<h5 id="example-bad_88">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">department_api</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">dept_by_name</span> <span class="p">(</span><span class="n">in_dept_name</span> <span class="k">in</span> <span class="n">department</span><span class="p">.</span><span class="n">department_name</span><span class="o">%</span><span class="k">type</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">department</span><span class="o">%</span><span class="n">rowtype</span> <span class="k">is</span>
      <span class="n">l_return</span> <span class="n">department</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>
   <span class="k">begin</span>
       <span class="k">if</span>    <span class="n">in_dept_name</span> <span class="k">is</span> <span class="k">null</span> 
          <span class="k">or</span> <span class="k">length</span><span class="p">(</span><span class="n">in_dept_name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">20</span>
       <span class="k">then</span>
          <span class="n">raise</span> <span class="n">err</span><span class="p">.</span><span class="n">e_param_to_large</span><span class="p">;</span>
       <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
       <span class="c1">-- get the department by name</span>
       <span class="k">select</span> <span class="o">*</span>
         <span class="k">from</span> <span class="n">department</span>
        <span class="k">where</span> <span class="n">department_name</span> <span class="o">=</span> <span class="n">in_dept_name</span><span class="p">;</span>

       <span class="k">return</span> <span class="n">l_return</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">dept_by_name</span><span class="p">;</span>
<span class="k">end</span> <span class="n">department_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_88">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">department_api</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">dept_by_name</span> <span class="p">(</span><span class="n">in_dept_name</span> <span class="k">in</span> <span class="n">department</span><span class="p">.</span><span class="n">department_name</span><span class="o">%</span><span class="k">type</span><span class="p">)</span>
      <span class="k">return</span> <span class="n">department</span><span class="o">%</span><span class="n">rowtype</span> <span class="k">is</span>
      <span class="n">l_dept_name</span> <span class="n">department</span><span class="p">.</span><span class="n">department_name</span><span class="o">%</span><span class="k">type</span> <span class="k">not</span> <span class="k">null</span> <span class="p">:</span><span class="o">=</span> <span class="n">in_dept_name</span><span class="p">;</span>
      <span class="n">l_return</span> <span class="n">department</span><span class="o">%</span><span class="n">rowtype</span><span class="p">;</span>
   <span class="k">begin</span>
       <span class="c1">-- get the department by name</span>
       <span class="k">select</span> <span class="o">*</span>
         <span class="k">from</span> <span class="n">department</span>
        <span class="k">where</span> <span class="n">department_name</span> <span class="o">=</span> <span class="n">l_dept_name</span><span class="p">;</span>

       <span class="k">return</span> <span class="n">l_return</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">dept_by_name</span><span class="p">;</span>
<span class="k">end</span> <span class="n">department_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="function-call">Function call</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="p">...</span>
   <span class="n">r_deparment</span> <span class="p">:</span><span class="o">=</span> <span class="n">department_api</span><span class="p">.</span><span class="n">dept_by_name</span><span class="p">(</span><span class="s1">&#39;Far to long name of a department&#39;</span><span class="p">);</span>
<span class="p">...</span>
<span class="k">exception</span>
   <span class="k">when</span> <span class="n">value_error</span> <span class="k">then</span> <span class="p">...</span>
</pre></div>
</td></tr></table>

<h3 id="ensure-single-execution-at-a-time-of-a-program-unit">Ensure single execution at a time of a program unit</h3>
<h4 id="g-8410-always-use-application-locks-to-ensure-a-program-unit-is-only-running-once-at-a-given-time">G-8410: Always use application locks to ensure a program unit is only running once at a given time.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Efficiency, Reliability</p>
</div>
<h5 id="reason_91">Reason</h5>
<p>This technique allows us to have locks across transactions as well as a proven way to clean up at the end of the session.</p>
<p>The alternative using a table where a “Lock-Row” is stored has the disadvantage that in case of an error a proper cleanup has to be done to “unlock” the program unit.</p>
<h5 id="example-bad_89">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cm">/* bad example */</span>
<span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">lock_up</span> <span class="k">is</span>
   <span class="c1">-- manage locks in a dedicated table created as follows:</span>
   <span class="c1">--   create table app_locks (</span>
   <span class="c1">--      lock_name varchar2(128 char) not null primary key</span>
   <span class="c1">--   );</span>

   <span class="k">procedure</span> <span class="n">request_lock</span> <span class="p">(</span><span class="n">in_lock_name</span> <span class="k">in</span> <span class="n">varchar2</span><span class="p">)</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="c1">-- raises dup_val_on_index</span>
      <span class="k">insert</span> <span class="k">into</span> <span class="n">app_locks</span> <span class="p">(</span><span class="n">lock_name</span><span class="p">)</span> <span class="k">values</span> <span class="p">(</span><span class="n">in_lock_name</span><span class="p">);</span>
   <span class="k">end</span> <span class="n">request_lock</span><span class="p">;</span>

   <span class="k">procedure</span> <span class="n">release_lock</span><span class="p">(</span><span class="n">in_lock_name</span> <span class="k">in</span> <span class="n">varchar2</span><span class="p">)</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="k">delete</span> <span class="k">from</span> <span class="n">app_locks</span> <span class="k">where</span> <span class="n">lock_name</span> <span class="o">=</span> <span class="n">in_lock_name</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">release_lock</span><span class="p">;</span>
<span class="k">end</span> <span class="n">lock_up</span><span class="p">;</span>
<span class="o">/</span>

<span class="cm">/* call bad example */</span>
<span class="k">declare</span>
   <span class="n">k_lock_name</span> <span class="n">constant</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">30</span> <span class="nb">char</span><span class="p">)</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;APPLICATION_LOCK&#39;</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">lock_up</span><span class="p">.</span><span class="n">request_lock</span><span class="p">(</span><span class="n">in_lock_name</span> <span class="o">=&gt;</span> <span class="n">k_lock_name</span><span class="p">);</span>
   <span class="c1">-- processing</span>
   <span class="n">lock_up</span><span class="p">.</span><span class="n">release_lock</span><span class="p">(</span><span class="n">in_lock_handle</span> <span class="o">=&gt;</span> <span class="n">l_handle</span><span class="p">);</span>
<span class="k">exception</span>
   <span class="k">when</span> <span class="n">others</span> <span class="k">then</span>
      <span class="c1">-- log error</span>
      <span class="n">lock_up</span><span class="p">.</span><span class="n">release_lock</span><span class="p">(</span><span class="n">in_lock_handle</span> <span class="o">=&gt;</span> <span class="n">l_handle</span><span class="p">);</span>
      <span class="n">raise</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_89">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="cm">/* good example */</span>
<span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">lock_up</span> <span class="k">is</span>
   <span class="k">function</span> <span class="n">request_lock</span><span class="p">(</span>
      <span class="n">in_lock_name</span>         <span class="k">in</span> <span class="n">varchar2</span><span class="p">,</span>
      <span class="n">in_release_on_commit</span> <span class="k">in</span> <span class="nb">boolean</span> <span class="p">:</span><span class="o">=</span> <span class="k">false</span><span class="p">)</span> 
   <span class="k">return</span> <span class="n">varchar2</span> <span class="k">is</span>
      <span class="n">l_lock_handle</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">128</span> <span class="nb">char</span><span class="p">);</span>
   <span class="k">begin</span>
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_lock</span><span class="p">.</span><span class="n">allocate_unique</span><span class="p">(</span>
         <span class="n">lockname</span>        <span class="o">=&gt;</span> <span class="n">in_lock_name</span><span class="p">,</span>
         <span class="n">lockhandle</span>      <span class="o">=&gt;</span> <span class="n">l_lock_handle</span><span class="p">,</span>
         <span class="n">expiration_secs</span> <span class="o">=&gt;</span> <span class="n">constants</span><span class="p">.</span><span class="n">k_one_week</span>
      <span class="p">);</span>
      <span class="k">if</span> <span class="n">sys</span><span class="p">.</span><span class="n">dbms_lock</span><span class="p">.</span><span class="n">request</span><span class="p">(</span>
            <span class="n">lockhandle</span>        <span class="o">=&gt;</span> <span class="n">l_lock_handle</span><span class="p">,</span>
            <span class="n">lockmode</span>          <span class="o">=&gt;</span> <span class="n">sys</span><span class="p">.</span><span class="n">dbms_lock</span><span class="p">.</span><span class="n">x_mode</span><span class="p">,</span>
            <span class="n">timeout</span>           <span class="o">=&gt;</span> <span class="n">sys</span><span class="p">.</span><span class="n">dbms_lock</span><span class="p">.</span><span class="n">maxwait</span><span class="p">,</span>
            <span class="n">release_on_commit</span> <span class="o">=&gt;</span> <span class="n">coalesce</span><span class="p">(</span><span class="n">in_release_on_commit</span><span class="p">,</span> <span class="k">false</span><span class="p">)</span>
         <span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> 
      <span class="k">then</span>
         <span class="n">raise</span> <span class="n">errors</span><span class="p">.</span><span class="n">e_lock_request_failed</span><span class="p">;</span>
      <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
      <span class="k">return</span> <span class="n">l_lock_handle</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">request_lock</span><span class="p">;</span>

   <span class="k">procedure</span> <span class="n">release_lock</span><span class="p">(</span><span class="n">in_lock_handle</span> <span class="k">in</span> <span class="n">varchar2</span><span class="p">)</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="k">if</span> <span class="n">sys</span><span class="p">.</span><span class="n">dbms_lock</span><span class="p">.</span><span class="n">release</span><span class="p">(</span><span class="n">lockhandle</span> <span class="o">=&gt;</span> <span class="n">in_lock_handle</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">then</span>
         <span class="n">raise</span> <span class="n">errors</span><span class="p">.</span><span class="n">e_lock_request_failed</span><span class="p">;</span>
      <span class="k">end</span> <span class="k">if</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">release_lock</span><span class="p">;</span>
<span class="k">end</span> <span class="n">lock_up</span><span class="p">;</span>
<span class="o">/</span>

<span class="cm">/* Call good example */</span>
<span class="k">declare</span>
   <span class="n">l_handle</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">128</span> <span class="nb">char</span><span class="p">);</span>
   <span class="n">k_lock_name</span> <span class="n">constant</span> <span class="n">varchar2</span><span class="p">(</span><span class="mi">30</span> <span class="nb">char</span><span class="p">)</span> <span class="p">:</span><span class="o">=</span> <span class="s1">&#39;APPLICATION_LOCK&#39;</span><span class="p">;</span>
<span class="k">begin</span>
   <span class="n">l_handle</span> <span class="p">:</span><span class="o">=</span> <span class="n">lock_up</span><span class="p">.</span><span class="n">request_lock</span><span class="p">(</span><span class="n">in_lock_name</span> <span class="o">=&gt;</span> <span class="n">k_lock_name</span><span class="p">);</span>
   <span class="c1">-- processing</span>
   <span class="n">lock_up</span><span class="p">.</span><span class="n">release_lock</span><span class="p">(</span><span class="n">in_lock_handle</span> <span class="o">=&gt;</span> <span class="n">l_handle</span><span class="p">);</span>
<span class="k">exception</span>
   <span class="k">when</span> <span class="n">others</span> <span class="k">then</span>
      <span class="c1">-- log error</span>
      <span class="n">lock_up</span><span class="p">.</span><span class="n">release_lock</span><span class="p">(</span><span class="n">in_lock_handle</span> <span class="o">=&gt;</span> <span class="n">l_handle</span><span class="p">);</span>
      <span class="n">raise</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h3 id="use-dbms_application_info-package-to-follow-progress-of-a-process">Use dbms_application_info package to follow progress of a process</h3>
<h4 id="g-8510-always-use-dbms_application_info-to-track-program-process-transiently">G-8510: Always use dbms_application_info to track program process transiently.</h4>
<div class="admonition tip">
<p class="admonition-title">Minor</p>
<p>Efficiency, Reliability</p>
</div>
<h5 id="reason_92">Reason</h5>
<p>This technique allows us to view progress of a process without having to persistently write log data in either a table or a file. The information is accessible through the <code>v$session</code> view.</p>
<h5 id="example-bad_90">Example (bad)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">employee_api</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">process_emps</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="o">&lt;&lt;</span><span class="n">employees</span><span class="o">&gt;&gt;</span>
      <span class="k">for</span> <span class="n">emp_rec</span> <span class="k">in</span> <span class="p">(</span><span class="k">select</span> <span class="n">employee_id</span>
                        <span class="k">from</span> <span class="n">employee</span>
                       <span class="k">order</span> <span class="k">by</span> <span class="n">employee_id</span><span class="p">)</span>
      <span class="n">loop</span>
         <span class="k">null</span><span class="p">;</span> <span class="c1">-- some processing</span>
      <span class="k">end</span> <span class="n">loop</span> <span class="n">employees</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">process_emps</span><span class="p">;</span>
<span class="k">end</span> <span class="n">employee_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h5 id="example-good_90">Example (good)</h5>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">create</span> <span class="k">or</span> <span class="k">replace</span> <span class="n">package</span> <span class="n">body</span> <span class="n">employee_api</span> <span class="k">is</span>
   <span class="k">procedure</span> <span class="n">process_emps</span> <span class="k">is</span>
   <span class="k">begin</span>
      <span class="n">sys</span><span class="p">.</span><span class="n">dbms_application_info</span><span class="p">.</span><span class="n">set_module</span><span class="p">(</span><span class="n">module_name</span> <span class="o">=&gt;</span> <span class="err">$$</span><span class="n">plsql_unit</span>
                                          <span class="p">,</span><span class="n">action_name</span> <span class="o">=&gt;</span> <span class="s1">&#39;init&#39;</span><span class="p">);</span>
      <span class="o">&lt;&lt;</span><span class="n">employees</span><span class="o">&gt;&gt;</span>
      <span class="k">for</span> <span class="n">emp_rec</span> <span class="k">in</span> <span class="p">(</span><span class="k">select</span> <span class="n">employee_id</span> 
                        <span class="k">from</span> <span class="n">employee</span>
                       <span class="k">order</span> <span class="k">by</span> <span class="n">employee_id</span><span class="p">)</span>
      <span class="n">loop</span>
         <span class="n">sys</span><span class="p">.</span><span class="n">dbms_application_info</span><span class="p">.</span><span class="n">set_action</span><span class="p">(</span><span class="s1">&#39;processing &#39;</span> <span class="o">||</span> <span class="n">emp_rec</span><span class="p">.</span><span class="n">employee_id</span><span class="p">);</span>
      <span class="k">end</span> <span class="n">loop</span> <span class="n">employees</span><span class="p">;</span>
   <span class="k">end</span> <span class="n">process_emps</span><span class="p">;</span>
<span class="k">end</span> <span class="n">employee_api</span><span class="p">;</span>
<span class="o">/</span>
</pre></div>
</td></tr></table>

<h1 id="code-reviews">Code Reviews</h1>
<p>Code reviews check the results of software engineering. According to IEEE-Norm 729, a review is a more or less planned and structured analysis and evaluation process. Here we distinguish between code review and architect review. </p>
<p>To perform a code review means that after or during the development one or more reviewer proof-reads the code to find potential errors, potential areas for simplification, or test cases. A code review is a very good opportunity to save costs by fixing issues before the testing phase.</p>
<p>What can a code-review be good for?</p>
<ul>
<li>Code quality</li>
<li>Code clarity and maintainability</li>
<li>Quality of the overall architecture</li>
<li>Quality of the documentation</li>
<li>Quality of the interface specification</li>
</ul>
<p>For an effective review, the following factors must be considered:</p>
<ul>
<li>Definition of clear goals.</li>
<li>Choice of a suitable person with constructive critical faculties.</li>
<li>Psychological aspects.</li>
<li>Selection of the right review techniques.</li>
<li>Support of the review process from the management.</li>
<li>Existence of a culture of learning and process optimization. </li>
</ul>
<p>Requirements for the reviewer: </p>
<ul>
<li>The reviewer must not be the owner of the code.</li>
<li>Code reviews may be unpleasant for the developer, as he or she could fear that code will be criticized. If the critic is not considerate, the code writer will build up rejection and resistance against code reviews.</li>
</ul>
<p>Precheck</p>
<p>Developers should complete the following checklist prior to requesting a peer code review.</p>
<ul>
<li>Can I answer "Yes" to each of these questions?
Did I take time to think about what I wanted to do before doing it? Would I pay for this? Can I defend my work / decisions I made?</li>
<li>NO sloppiness. Code is well formatted. Code is not duplicated in multiple places. Named variables. Tables have foreign keys (and associated indexes)...</li>
<li>Run the APEX Advisor (if using APEX)</li>
<li>Code is well commented.
Package specs includes a description of what the procedure does and what the input variables represent. Package body includes comments throughout the code to indicate what is happening.</li>
<li>The application includes end user help.</li>
</ul>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="assets/fonts/font-awesome.css">
    
      <a href="https://github.com/insum-labs" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/insumsolutions" class="md-footer-social__link fa fa-twitter"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/application.c648116f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>